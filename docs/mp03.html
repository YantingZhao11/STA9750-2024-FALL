<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Analysis of the U.S. Electoral College system – STA 9750 2024 Submission Material 1</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<link href="site_libs/htmltools-fill-0.5.8.1/fill.css" rel="stylesheet">

<script src="site_libs/htmlwidgets-1.6.4/htmlwidgets.js"></script>

<link href="site_libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet">

<script src="site_libs/datatables-binding-0.33/datatables.js"></script>

<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>

<link href="site_libs/dt-core-1.13.6/css/jquery.dataTables.min.css" rel="stylesheet">

<link href="site_libs/dt-core-1.13.6/css/jquery.dataTables.extra.css" rel="stylesheet">

<script src="site_libs/dt-core-1.13.6/js/jquery.dataTables.min.js"></script>

<link href="site_libs/crosstalk-1.2.1/css/crosstalk.min.css" rel="stylesheet">

<script src="site_libs/crosstalk-1.2.1/js/crosstalk.min.js"></script>



</head>

<body class="nav-fixed fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">STA 9750 2024 Submission Material 1</span>
    </a>
  </div>
        <div class="quarto-navbar-tools tools-end">
</div>
          <div id="quarto-search" class="" title="Search"></div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Analysis of the U.S. Electoral College system</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<p>The Electoral College, established by Article II, Section 1 of the U.S. Constitution, serves as the mechanism for electing the President of the United States. Each state is granted a number of electors equal to its representation in Congress—comprising both Senators and Representatives. Over time, the states have developed their own methods for allocating these electoral votes (ECVs), often opting for a “winner-takes-all” system based on the state’s popular vote. Notably, Maine and Nebraska allocate their ECVs differently, by congressional district.</p>
<p>In this mini-project, we examine the impact of alternative electoral allocation methods on U.S. presidential election outcomes, specifically investigating whether different methods could affect perceived biases in the Electoral College system. Our analysis will simulate alternative ECV allocations using historical voting data, assessing how proportional or district-based allocations might alter electoral outcomes.</p>
<section id="data-set-up-and-initial-exploration" class="level2">
<h2 class="anchored" data-anchor-id="data-set-up-and-initial-exploration">Data Set-Up and Initial Exploration</h2>
<p>To prepare the data, I wrote R code that automates the download of U.S. congressional shapefiles<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a> from 1976 to 2022, organized into two main tasks. For 1976-2012, the code downloads files from the UCLA Political Science website, using a systematic naming convention to save each file in a designated “shapefiles” directory. For 2014-2022, it pulls files from the U.S. Census Bureau<a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a> and saves them in a separate “census_shapefiles” directory. The code checks for existing files locally to prevent redundant downloads, optimizing server load and storage efficiency. Additionally, I manually downloaded U.S. House election vote data<a href="#fn3" class="footnote-ref" id="fnref3" role="doc-noteref"><sup>3</sup></a> and statewide presidential vote<a href="#fn4" class="footnote-ref" id="fnref4" role="doc-noteref"><sup>4</sup></a> counts from 1976 to 2022 from the MIT Election Data Science Lab to incorporate into the project.</p>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load necessary packages</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(<span class="st">"sf"</span>)) <span class="fu">install.packages</span>(<span class="st">"sf"</span>)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(sf)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(<span class="st">"tigris"</span>)) <span class="fu">install.packages</span>(<span class="st">"tigris"</span>)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tigris)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(<span class="st">"gganimate"</span>)) <span class="fu">install.packages</span>(<span class="st">"gganimate"</span>)</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(gganimate)</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(<span class="st">"usmap"</span>)) <span class="fu">install.packages</span>(<span class="st">"usmap"</span>)</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(usmap)</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(httr)</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(gt)</span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(sf)</span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(stringr)</span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a><span class="co"># Define file paths</span></span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a>president_data_path <span class="ot">&lt;-</span> <span class="st">"C:</span><span class="sc">\\</span><span class="st">Users</span><span class="sc">\\</span><span class="st">w3038</span><span class="sc">\\</span><span class="st">Downloads</span><span class="sc">\\</span><span class="st">STA 9750</span><span class="sc">\\</span><span class="st">1976-2020-president.csv"</span></span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a>house_data_path <span class="ot">&lt;-</span> <span class="st">"C:</span><span class="sc">\\</span><span class="st">Users</span><span class="sc">\\</span><span class="st">w3038</span><span class="sc">\\</span><span class="st">Downloads</span><span class="sc">\\</span><span class="st">STA 9750</span><span class="sc">\\</span><span class="st">1976-2022-house.csv"</span></span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a><span class="co"># Load the datasets</span></span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a>president_data <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(president_data_path)</span>
<span id="cb1-25"><a href="#cb1-25" aria-hidden="true" tabindex="-1"></a>house_data <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(house_data_path)</span>
<span id="cb1-26"><a href="#cb1-26" aria-hidden="true" tabindex="-1"></a><span class="co"># Display a preview of the president data in a gt table</span></span>
<span id="cb1-27"><a href="#cb1-27" aria-hidden="true" tabindex="-1"></a>president_data <span class="sc">%&gt;%</span></span>
<span id="cb1-28"><a href="#cb1-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_head</span>(<span class="at">n =</span> <span class="dv">10</span>) <span class="sc">%&gt;%</span>  <span class="co"># Display the first 10 rows</span></span>
<span id="cb1-29"><a href="#cb1-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>() <span class="sc">%&gt;%</span></span>
<span id="cb1-30"><a href="#cb1-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_header</span>(</span>
<span id="cb1-31"><a href="#cb1-31" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"President Data (1976-2020)"</span></span>
<span id="cb1-32"><a href="#cb1-32" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb1-33"><a href="#cb1-33" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cols_label</span>(</span>
<span id="cb1-34"><a href="#cb1-34" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Customize column labels here if needed, for example:</span></span>
<span id="cb1-35"><a href="#cb1-35" aria-hidden="true" tabindex="-1"></a>    <span class="at">year =</span> <span class="st">"Year"</span>,</span>
<span id="cb1-36"><a href="#cb1-36" aria-hidden="true" tabindex="-1"></a>    <span class="at">state =</span> <span class="st">"State"</span>,</span>
<span id="cb1-37"><a href="#cb1-37" aria-hidden="true" tabindex="-1"></a>    <span class="at">candidatevotes =</span> <span class="st">"Candidate Votes"</span></span>
<span id="cb1-38"><a href="#cb1-38" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Add other columns as desired</span></span>
<span id="cb1-39"><a href="#cb1-39" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb1-40"><a href="#cb1-40" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fmt_number</span>(</span>
<span id="cb1-41"><a href="#cb1-41" aria-hidden="true" tabindex="-1"></a>    <span class="at">columns =</span> <span class="fu">where</span>(is.numeric),</span>
<span id="cb1-42"><a href="#cb1-42" aria-hidden="true" tabindex="-1"></a>    <span class="at">decimals =</span> <span class="dv">0</span></span>
<span id="cb1-43"><a href="#cb1-43" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div id="viypvxaipp" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#viypvxaipp table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#viypvxaipp thead, #viypvxaipp tbody, #viypvxaipp tfoot, #viypvxaipp tr, #viypvxaipp td, #viypvxaipp th {
  border-style: none;
}

#viypvxaipp p {
  margin: 0;
  padding: 0;
}

#viypvxaipp .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#viypvxaipp .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#viypvxaipp .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#viypvxaipp .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#viypvxaipp .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#viypvxaipp .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#viypvxaipp .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#viypvxaipp .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#viypvxaipp .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#viypvxaipp .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#viypvxaipp .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#viypvxaipp .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#viypvxaipp .gt_spanner_row {
  border-bottom-style: hidden;
}

#viypvxaipp .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#viypvxaipp .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#viypvxaipp .gt_from_md > :first-child {
  margin-top: 0;
}

#viypvxaipp .gt_from_md > :last-child {
  margin-bottom: 0;
}

#viypvxaipp .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#viypvxaipp .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#viypvxaipp .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#viypvxaipp .gt_row_group_first td {
  border-top-width: 2px;
}

#viypvxaipp .gt_row_group_first th {
  border-top-width: 2px;
}

#viypvxaipp .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#viypvxaipp .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#viypvxaipp .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#viypvxaipp .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#viypvxaipp .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#viypvxaipp .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#viypvxaipp .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#viypvxaipp .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#viypvxaipp .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#viypvxaipp .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#viypvxaipp .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#viypvxaipp .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#viypvxaipp .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#viypvxaipp .gt_left {
  text-align: left;
}

#viypvxaipp .gt_center {
  text-align: center;
}

#viypvxaipp .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#viypvxaipp .gt_font_normal {
  font-weight: normal;
}

#viypvxaipp .gt_font_bold {
  font-weight: bold;
}

#viypvxaipp .gt_font_italic {
  font-style: italic;
}

#viypvxaipp .gt_super {
  font-size: 65%;
}

#viypvxaipp .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#viypvxaipp .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#viypvxaipp .gt_indent_1 {
  text-indent: 5px;
}

#viypvxaipp .gt_indent_2 {
  text-indent: 10px;
}

#viypvxaipp .gt_indent_3 {
  text-indent: 15px;
}

#viypvxaipp .gt_indent_4 {
  text-indent: 20px;
}

#viypvxaipp .gt_indent_5 {
  text-indent: 25px;
}

#viypvxaipp .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#viypvxaipp div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}
</style>

<table class="gt_table caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead>
<tr class="header gt_heading">
<th colspan="15" class="gt_heading gt_title gt_font_normal gt_bottom_border">President Data (1976-2020)</th>
</tr>
<tr class="odd gt_col_headings">
<th id="year" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">Year</th>
<th id="state" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">State</th>
<th id="state_po" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">state_po</th>
<th id="state_fips" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">state_fips</th>
<th id="state_cen" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">state_cen</th>
<th id="state_ic" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">state_ic</th>
<th id="office" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">office</th>
<th id="candidate" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">candidate</th>
<th id="party_detailed" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">party_detailed</th>
<th id="writein" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" scope="col">writein</th>
<th id="candidatevotes" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">Candidate Votes</th>
<th id="totalvotes" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">totalvotes</th>
<th id="version" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">version</th>
<th id="notes" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" scope="col">notes</th>
<th id="party_simplified" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">party_simplified</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_right" headers="year">1,976</td>
<td class="gt_row gt_left" headers="state">ALABAMA</td>
<td class="gt_row gt_left" headers="state_po">AL</td>
<td class="gt_row gt_right" headers="state_fips">1</td>
<td class="gt_row gt_right" headers="state_cen">63</td>
<td class="gt_row gt_right" headers="state_ic">41</td>
<td class="gt_row gt_left" headers="office">US PRESIDENT</td>
<td class="gt_row gt_left" headers="candidate">CARTER, JIMMY</td>
<td class="gt_row gt_left" headers="party_detailed">DEMOCRAT</td>
<td class="gt_row gt_center" headers="writein">FALSE</td>
<td class="gt_row gt_right" headers="candidatevotes">659,170</td>
<td class="gt_row gt_right" headers="totalvotes">1,182,850</td>
<td class="gt_row gt_right" headers="version">20,210,113</td>
<td class="gt_row gt_center" headers="notes">NA</td>
<td class="gt_row gt_left" headers="party_simplified">DEMOCRAT</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="year">1,976</td>
<td class="gt_row gt_left" headers="state">ALABAMA</td>
<td class="gt_row gt_left" headers="state_po">AL</td>
<td class="gt_row gt_right" headers="state_fips">1</td>
<td class="gt_row gt_right" headers="state_cen">63</td>
<td class="gt_row gt_right" headers="state_ic">41</td>
<td class="gt_row gt_left" headers="office">US PRESIDENT</td>
<td class="gt_row gt_left" headers="candidate">FORD, GERALD</td>
<td class="gt_row gt_left" headers="party_detailed">REPUBLICAN</td>
<td class="gt_row gt_center" headers="writein">FALSE</td>
<td class="gt_row gt_right" headers="candidatevotes">504,070</td>
<td class="gt_row gt_right" headers="totalvotes">1,182,850</td>
<td class="gt_row gt_right" headers="version">20,210,113</td>
<td class="gt_row gt_center" headers="notes">NA</td>
<td class="gt_row gt_left" headers="party_simplified">REPUBLICAN</td>
</tr>
<tr class="odd">
<td class="gt_row gt_right" headers="year">1,976</td>
<td class="gt_row gt_left" headers="state">ALABAMA</td>
<td class="gt_row gt_left" headers="state_po">AL</td>
<td class="gt_row gt_right" headers="state_fips">1</td>
<td class="gt_row gt_right" headers="state_cen">63</td>
<td class="gt_row gt_right" headers="state_ic">41</td>
<td class="gt_row gt_left" headers="office">US PRESIDENT</td>
<td class="gt_row gt_left" headers="candidate">MADDOX, LESTER</td>
<td class="gt_row gt_left" headers="party_detailed">AMERICAN INDEPENDENT PARTY</td>
<td class="gt_row gt_center" headers="writein">FALSE</td>
<td class="gt_row gt_right" headers="candidatevotes">9,198</td>
<td class="gt_row gt_right" headers="totalvotes">1,182,850</td>
<td class="gt_row gt_right" headers="version">20,210,113</td>
<td class="gt_row gt_center" headers="notes">NA</td>
<td class="gt_row gt_left" headers="party_simplified">OTHER</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="year">1,976</td>
<td class="gt_row gt_left" headers="state">ALABAMA</td>
<td class="gt_row gt_left" headers="state_po">AL</td>
<td class="gt_row gt_right" headers="state_fips">1</td>
<td class="gt_row gt_right" headers="state_cen">63</td>
<td class="gt_row gt_right" headers="state_ic">41</td>
<td class="gt_row gt_left" headers="office">US PRESIDENT</td>
<td class="gt_row gt_left" headers="candidate">BUBAR, BENJAMIN ""BEN""</td>
<td class="gt_row gt_left" headers="party_detailed">PROHIBITION</td>
<td class="gt_row gt_center" headers="writein">FALSE</td>
<td class="gt_row gt_right" headers="candidatevotes">6,669</td>
<td class="gt_row gt_right" headers="totalvotes">1,182,850</td>
<td class="gt_row gt_right" headers="version">20,210,113</td>
<td class="gt_row gt_center" headers="notes">NA</td>
<td class="gt_row gt_left" headers="party_simplified">OTHER</td>
</tr>
<tr class="odd">
<td class="gt_row gt_right" headers="year">1,976</td>
<td class="gt_row gt_left" headers="state">ALABAMA</td>
<td class="gt_row gt_left" headers="state_po">AL</td>
<td class="gt_row gt_right" headers="state_fips">1</td>
<td class="gt_row gt_right" headers="state_cen">63</td>
<td class="gt_row gt_right" headers="state_ic">41</td>
<td class="gt_row gt_left" headers="office">US PRESIDENT</td>
<td class="gt_row gt_left" headers="candidate">HALL, GUS</td>
<td class="gt_row gt_left" headers="party_detailed">COMMUNIST PARTY USE</td>
<td class="gt_row gt_center" headers="writein">FALSE</td>
<td class="gt_row gt_right" headers="candidatevotes">1,954</td>
<td class="gt_row gt_right" headers="totalvotes">1,182,850</td>
<td class="gt_row gt_right" headers="version">20,210,113</td>
<td class="gt_row gt_center" headers="notes">NA</td>
<td class="gt_row gt_left" headers="party_simplified">OTHER</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="year">1,976</td>
<td class="gt_row gt_left" headers="state">ALABAMA</td>
<td class="gt_row gt_left" headers="state_po">AL</td>
<td class="gt_row gt_right" headers="state_fips">1</td>
<td class="gt_row gt_right" headers="state_cen">63</td>
<td class="gt_row gt_right" headers="state_ic">41</td>
<td class="gt_row gt_left" headers="office">US PRESIDENT</td>
<td class="gt_row gt_left" headers="candidate">MACBRIDE, ROGER</td>
<td class="gt_row gt_left" headers="party_detailed">LIBERTARIAN</td>
<td class="gt_row gt_center" headers="writein">FALSE</td>
<td class="gt_row gt_right" headers="candidatevotes">1,481</td>
<td class="gt_row gt_right" headers="totalvotes">1,182,850</td>
<td class="gt_row gt_right" headers="version">20,210,113</td>
<td class="gt_row gt_center" headers="notes">NA</td>
<td class="gt_row gt_left" headers="party_simplified">LIBERTARIAN</td>
</tr>
<tr class="odd">
<td class="gt_row gt_right" headers="year">1,976</td>
<td class="gt_row gt_left" headers="state">ALABAMA</td>
<td class="gt_row gt_left" headers="state_po">AL</td>
<td class="gt_row gt_right" headers="state_fips">1</td>
<td class="gt_row gt_right" headers="state_cen">63</td>
<td class="gt_row gt_right" headers="state_ic">41</td>
<td class="gt_row gt_left" headers="office">US PRESIDENT</td>
<td class="gt_row gt_left" headers="candidate"></td>
<td class="gt_row gt_left" headers="party_detailed"></td>
<td class="gt_row gt_center" headers="writein">TRUE</td>
<td class="gt_row gt_right" headers="candidatevotes">308</td>
<td class="gt_row gt_right" headers="totalvotes">1,182,850</td>
<td class="gt_row gt_right" headers="version">20,210,113</td>
<td class="gt_row gt_center" headers="notes">NA</td>
<td class="gt_row gt_left" headers="party_simplified">OTHER</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="year">1,976</td>
<td class="gt_row gt_left" headers="state">ALASKA</td>
<td class="gt_row gt_left" headers="state_po">AK</td>
<td class="gt_row gt_right" headers="state_fips">2</td>
<td class="gt_row gt_right" headers="state_cen">94</td>
<td class="gt_row gt_right" headers="state_ic">81</td>
<td class="gt_row gt_left" headers="office">US PRESIDENT</td>
<td class="gt_row gt_left" headers="candidate">FORD, GERALD</td>
<td class="gt_row gt_left" headers="party_detailed">REPUBLICAN</td>
<td class="gt_row gt_center" headers="writein">FALSE</td>
<td class="gt_row gt_right" headers="candidatevotes">71,555</td>
<td class="gt_row gt_right" headers="totalvotes">123,574</td>
<td class="gt_row gt_right" headers="version">20,210,113</td>
<td class="gt_row gt_center" headers="notes">NA</td>
<td class="gt_row gt_left" headers="party_simplified">REPUBLICAN</td>
</tr>
<tr class="odd">
<td class="gt_row gt_right" headers="year">1,976</td>
<td class="gt_row gt_left" headers="state">ALASKA</td>
<td class="gt_row gt_left" headers="state_po">AK</td>
<td class="gt_row gt_right" headers="state_fips">2</td>
<td class="gt_row gt_right" headers="state_cen">94</td>
<td class="gt_row gt_right" headers="state_ic">81</td>
<td class="gt_row gt_left" headers="office">US PRESIDENT</td>
<td class="gt_row gt_left" headers="candidate">CARTER, JIMMY</td>
<td class="gt_row gt_left" headers="party_detailed">DEMOCRAT</td>
<td class="gt_row gt_center" headers="writein">FALSE</td>
<td class="gt_row gt_right" headers="candidatevotes">44,058</td>
<td class="gt_row gt_right" headers="totalvotes">123,574</td>
<td class="gt_row gt_right" headers="version">20,210,113</td>
<td class="gt_row gt_center" headers="notes">NA</td>
<td class="gt_row gt_left" headers="party_simplified">DEMOCRAT</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="year">1,976</td>
<td class="gt_row gt_left" headers="state">ALASKA</td>
<td class="gt_row gt_left" headers="state_po">AK</td>
<td class="gt_row gt_right" headers="state_fips">2</td>
<td class="gt_row gt_right" headers="state_cen">94</td>
<td class="gt_row gt_right" headers="state_ic">81</td>
<td class="gt_row gt_left" headers="office">US PRESIDENT</td>
<td class="gt_row gt_left" headers="candidate">MACBRIDE, ROGER</td>
<td class="gt_row gt_left" headers="party_detailed">LIBERTARIAN</td>
<td class="gt_row gt_center" headers="writein">FALSE</td>
<td class="gt_row gt_right" headers="candidatevotes">6,785</td>
<td class="gt_row gt_right" headers="totalvotes">123,574</td>
<td class="gt_row gt_right" headers="version">20,210,113</td>
<td class="gt_row gt_center" headers="notes">NA</td>
<td class="gt_row gt_left" headers="party_simplified">LIBERTARIAN</td>
</tr>
</tbody>
</table>

</div>
</div>
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Display a preview of the house data in a gt table</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>house_data <span class="sc">%&gt;%</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_head</span>(<span class="at">n =</span> <span class="dv">10</span>) <span class="sc">%&gt;%</span>  <span class="co"># Display the first 10 rows</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>() <span class="sc">%&gt;%</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_header</span>(</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"House Data (1976-2022)"</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cols_label</span>(</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Customize column labels here if needed, for example:</span></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">year =</span> <span class="st">"Year"</span>,</span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">state =</span> <span class="st">"State"</span>,</span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">candidatevotes =</span> <span class="st">"Candidate Votes"</span></span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Add other columns as desired</span></span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fmt_number</span>(</span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">columns =</span> <span class="fu">where</span>(is.numeric),</span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">decimals =</span> <span class="dv">0</span></span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div id="vyuwkbgpyd" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#vyuwkbgpyd table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#vyuwkbgpyd thead, #vyuwkbgpyd tbody, #vyuwkbgpyd tfoot, #vyuwkbgpyd tr, #vyuwkbgpyd td, #vyuwkbgpyd th {
  border-style: none;
}

#vyuwkbgpyd p {
  margin: 0;
  padding: 0;
}

#vyuwkbgpyd .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#vyuwkbgpyd .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#vyuwkbgpyd .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#vyuwkbgpyd .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#vyuwkbgpyd .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#vyuwkbgpyd .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#vyuwkbgpyd .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#vyuwkbgpyd .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#vyuwkbgpyd .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#vyuwkbgpyd .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#vyuwkbgpyd .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#vyuwkbgpyd .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#vyuwkbgpyd .gt_spanner_row {
  border-bottom-style: hidden;
}

#vyuwkbgpyd .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#vyuwkbgpyd .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#vyuwkbgpyd .gt_from_md > :first-child {
  margin-top: 0;
}

#vyuwkbgpyd .gt_from_md > :last-child {
  margin-bottom: 0;
}

#vyuwkbgpyd .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#vyuwkbgpyd .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#vyuwkbgpyd .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#vyuwkbgpyd .gt_row_group_first td {
  border-top-width: 2px;
}

#vyuwkbgpyd .gt_row_group_first th {
  border-top-width: 2px;
}

#vyuwkbgpyd .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#vyuwkbgpyd .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#vyuwkbgpyd .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#vyuwkbgpyd .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#vyuwkbgpyd .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#vyuwkbgpyd .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#vyuwkbgpyd .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#vyuwkbgpyd .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#vyuwkbgpyd .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#vyuwkbgpyd .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#vyuwkbgpyd .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#vyuwkbgpyd .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#vyuwkbgpyd .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#vyuwkbgpyd .gt_left {
  text-align: left;
}

#vyuwkbgpyd .gt_center {
  text-align: center;
}

#vyuwkbgpyd .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#vyuwkbgpyd .gt_font_normal {
  font-weight: normal;
}

#vyuwkbgpyd .gt_font_bold {
  font-weight: bold;
}

#vyuwkbgpyd .gt_font_italic {
  font-style: italic;
}

#vyuwkbgpyd .gt_super {
  font-size: 65%;
}

#vyuwkbgpyd .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#vyuwkbgpyd .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#vyuwkbgpyd .gt_indent_1 {
  text-indent: 5px;
}

#vyuwkbgpyd .gt_indent_2 {
  text-indent: 10px;
}

#vyuwkbgpyd .gt_indent_3 {
  text-indent: 15px;
}

#vyuwkbgpyd .gt_indent_4 {
  text-indent: 20px;
}

#vyuwkbgpyd .gt_indent_5 {
  text-indent: 25px;
}

#vyuwkbgpyd .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#vyuwkbgpyd div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}
</style>

<table class="gt_table caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead>
<tr class="header gt_heading">
<th colspan="20" class="gt_heading gt_title gt_font_normal gt_bottom_border">House Data (1976-2022)</th>
</tr>
<tr class="odd gt_col_headings">
<th id="year" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">Year</th>
<th id="state" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">State</th>
<th id="state_po" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">state_po</th>
<th id="state_fips" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">state_fips</th>
<th id="state_cen" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">state_cen</th>
<th id="state_ic" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">state_ic</th>
<th id="office" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">office</th>
<th id="district" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">district</th>
<th id="stage" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">stage</th>
<th id="runoff" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" scope="col">runoff</th>
<th id="special" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" scope="col">special</th>
<th id="candidate" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">candidate</th>
<th id="party" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">party</th>
<th id="writein" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" scope="col">writein</th>
<th id="mode" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">mode</th>
<th id="candidatevotes" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">Candidate Votes</th>
<th id="totalvotes" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">totalvotes</th>
<th id="unofficial" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" scope="col">unofficial</th>
<th id="version" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">version</th>
<th id="fusion_ticket" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" scope="col">fusion_ticket</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_right" headers="year">1,976</td>
<td class="gt_row gt_left" headers="state">ALABAMA</td>
<td class="gt_row gt_left" headers="state_po">AL</td>
<td class="gt_row gt_right" headers="state_fips">1</td>
<td class="gt_row gt_right" headers="state_cen">63</td>
<td class="gt_row gt_right" headers="state_ic">41</td>
<td class="gt_row gt_left" headers="office">US HOUSE</td>
<td class="gt_row gt_right" headers="district">1</td>
<td class="gt_row gt_left" headers="stage">GEN</td>
<td class="gt_row gt_center" headers="runoff">FALSE</td>
<td class="gt_row gt_center" headers="special">FALSE</td>
<td class="gt_row gt_left" headers="candidate">BILL DAVENPORT</td>
<td class="gt_row gt_left" headers="party">DEMOCRAT</td>
<td class="gt_row gt_center" headers="writein">FALSE</td>
<td class="gt_row gt_left" headers="mode">TOTAL</td>
<td class="gt_row gt_right" headers="candidatevotes">58,906</td>
<td class="gt_row gt_right" headers="totalvotes">157,170</td>
<td class="gt_row gt_center" headers="unofficial">FALSE</td>
<td class="gt_row gt_right" headers="version">20,230,706</td>
<td class="gt_row gt_center" headers="fusion_ticket">FALSE</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="year">1,976</td>
<td class="gt_row gt_left" headers="state">ALABAMA</td>
<td class="gt_row gt_left" headers="state_po">AL</td>
<td class="gt_row gt_right" headers="state_fips">1</td>
<td class="gt_row gt_right" headers="state_cen">63</td>
<td class="gt_row gt_right" headers="state_ic">41</td>
<td class="gt_row gt_left" headers="office">US HOUSE</td>
<td class="gt_row gt_right" headers="district">1</td>
<td class="gt_row gt_left" headers="stage">GEN</td>
<td class="gt_row gt_center" headers="runoff">FALSE</td>
<td class="gt_row gt_center" headers="special">FALSE</td>
<td class="gt_row gt_left" headers="candidate">JACK EDWARDS</td>
<td class="gt_row gt_left" headers="party">REPUBLICAN</td>
<td class="gt_row gt_center" headers="writein">FALSE</td>
<td class="gt_row gt_left" headers="mode">TOTAL</td>
<td class="gt_row gt_right" headers="candidatevotes">98,257</td>
<td class="gt_row gt_right" headers="totalvotes">157,170</td>
<td class="gt_row gt_center" headers="unofficial">FALSE</td>
<td class="gt_row gt_right" headers="version">20,230,706</td>
<td class="gt_row gt_center" headers="fusion_ticket">FALSE</td>
</tr>
<tr class="odd">
<td class="gt_row gt_right" headers="year">1,976</td>
<td class="gt_row gt_left" headers="state">ALABAMA</td>
<td class="gt_row gt_left" headers="state_po">AL</td>
<td class="gt_row gt_right" headers="state_fips">1</td>
<td class="gt_row gt_right" headers="state_cen">63</td>
<td class="gt_row gt_right" headers="state_ic">41</td>
<td class="gt_row gt_left" headers="office">US HOUSE</td>
<td class="gt_row gt_right" headers="district">1</td>
<td class="gt_row gt_left" headers="stage">GEN</td>
<td class="gt_row gt_center" headers="runoff">FALSE</td>
<td class="gt_row gt_center" headers="special">FALSE</td>
<td class="gt_row gt_left" headers="candidate">WRITEIN</td>
<td class="gt_row gt_left" headers="party"></td>
<td class="gt_row gt_center" headers="writein">TRUE</td>
<td class="gt_row gt_left" headers="mode">TOTAL</td>
<td class="gt_row gt_right" headers="candidatevotes">7</td>
<td class="gt_row gt_right" headers="totalvotes">157,170</td>
<td class="gt_row gt_center" headers="unofficial">FALSE</td>
<td class="gt_row gt_right" headers="version">20,230,706</td>
<td class="gt_row gt_center" headers="fusion_ticket">FALSE</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="year">1,976</td>
<td class="gt_row gt_left" headers="state">ALABAMA</td>
<td class="gt_row gt_left" headers="state_po">AL</td>
<td class="gt_row gt_right" headers="state_fips">1</td>
<td class="gt_row gt_right" headers="state_cen">63</td>
<td class="gt_row gt_right" headers="state_ic">41</td>
<td class="gt_row gt_left" headers="office">US HOUSE</td>
<td class="gt_row gt_right" headers="district">2</td>
<td class="gt_row gt_left" headers="stage">GEN</td>
<td class="gt_row gt_center" headers="runoff">FALSE</td>
<td class="gt_row gt_center" headers="special">FALSE</td>
<td class="gt_row gt_left" headers="candidate">J CAROLE KEAHEY</td>
<td class="gt_row gt_left" headers="party">DEMOCRAT</td>
<td class="gt_row gt_center" headers="writein">FALSE</td>
<td class="gt_row gt_left" headers="mode">TOTAL</td>
<td class="gt_row gt_right" headers="candidatevotes">66,288</td>
<td class="gt_row gt_right" headers="totalvotes">156,362</td>
<td class="gt_row gt_center" headers="unofficial">FALSE</td>
<td class="gt_row gt_right" headers="version">20,230,706</td>
<td class="gt_row gt_center" headers="fusion_ticket">FALSE</td>
</tr>
<tr class="odd">
<td class="gt_row gt_right" headers="year">1,976</td>
<td class="gt_row gt_left" headers="state">ALABAMA</td>
<td class="gt_row gt_left" headers="state_po">AL</td>
<td class="gt_row gt_right" headers="state_fips">1</td>
<td class="gt_row gt_right" headers="state_cen">63</td>
<td class="gt_row gt_right" headers="state_ic">41</td>
<td class="gt_row gt_left" headers="office">US HOUSE</td>
<td class="gt_row gt_right" headers="district">2</td>
<td class="gt_row gt_left" headers="stage">GEN</td>
<td class="gt_row gt_center" headers="runoff">FALSE</td>
<td class="gt_row gt_center" headers="special">FALSE</td>
<td class="gt_row gt_left" headers="candidate">WILLIAM L "BILL" DICKINSON</td>
<td class="gt_row gt_left" headers="party">REPUBLICAN</td>
<td class="gt_row gt_center" headers="writein">FALSE</td>
<td class="gt_row gt_left" headers="mode">TOTAL</td>
<td class="gt_row gt_right" headers="candidatevotes">90,069</td>
<td class="gt_row gt_right" headers="totalvotes">156,362</td>
<td class="gt_row gt_center" headers="unofficial">FALSE</td>
<td class="gt_row gt_right" headers="version">20,230,706</td>
<td class="gt_row gt_center" headers="fusion_ticket">FALSE</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="year">1,976</td>
<td class="gt_row gt_left" headers="state">ALABAMA</td>
<td class="gt_row gt_left" headers="state_po">AL</td>
<td class="gt_row gt_right" headers="state_fips">1</td>
<td class="gt_row gt_right" headers="state_cen">63</td>
<td class="gt_row gt_right" headers="state_ic">41</td>
<td class="gt_row gt_left" headers="office">US HOUSE</td>
<td class="gt_row gt_right" headers="district">2</td>
<td class="gt_row gt_left" headers="stage">GEN</td>
<td class="gt_row gt_center" headers="runoff">FALSE</td>
<td class="gt_row gt_center" headers="special">FALSE</td>
<td class="gt_row gt_left" headers="candidate">WRITEIN</td>
<td class="gt_row gt_left" headers="party"></td>
<td class="gt_row gt_center" headers="writein">TRUE</td>
<td class="gt_row gt_left" headers="mode">TOTAL</td>
<td class="gt_row gt_right" headers="candidatevotes">5</td>
<td class="gt_row gt_right" headers="totalvotes">156,362</td>
<td class="gt_row gt_center" headers="unofficial">FALSE</td>
<td class="gt_row gt_right" headers="version">20,230,706</td>
<td class="gt_row gt_center" headers="fusion_ticket">FALSE</td>
</tr>
<tr class="odd">
<td class="gt_row gt_right" headers="year">1,976</td>
<td class="gt_row gt_left" headers="state">ALABAMA</td>
<td class="gt_row gt_left" headers="state_po">AL</td>
<td class="gt_row gt_right" headers="state_fips">1</td>
<td class="gt_row gt_right" headers="state_cen">63</td>
<td class="gt_row gt_right" headers="state_ic">41</td>
<td class="gt_row gt_left" headers="office">US HOUSE</td>
<td class="gt_row gt_right" headers="district">3</td>
<td class="gt_row gt_left" headers="stage">GEN</td>
<td class="gt_row gt_center" headers="runoff">FALSE</td>
<td class="gt_row gt_center" headers="special">FALSE</td>
<td class="gt_row gt_left" headers="candidate">BILL NICHOLS</td>
<td class="gt_row gt_left" headers="party">DEMOCRAT</td>
<td class="gt_row gt_center" headers="writein">FALSE</td>
<td class="gt_row gt_left" headers="mode">TOTAL</td>
<td class="gt_row gt_right" headers="candidatevotes">106,935</td>
<td class="gt_row gt_right" headers="totalvotes">108,048</td>
<td class="gt_row gt_center" headers="unofficial">FALSE</td>
<td class="gt_row gt_right" headers="version">20,230,706</td>
<td class="gt_row gt_center" headers="fusion_ticket">FALSE</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="year">1,976</td>
<td class="gt_row gt_left" headers="state">ALABAMA</td>
<td class="gt_row gt_left" headers="state_po">AL</td>
<td class="gt_row gt_right" headers="state_fips">1</td>
<td class="gt_row gt_right" headers="state_cen">63</td>
<td class="gt_row gt_right" headers="state_ic">41</td>
<td class="gt_row gt_left" headers="office">US HOUSE</td>
<td class="gt_row gt_right" headers="district">3</td>
<td class="gt_row gt_left" headers="stage">GEN</td>
<td class="gt_row gt_center" headers="runoff">FALSE</td>
<td class="gt_row gt_center" headers="special">FALSE</td>
<td class="gt_row gt_left" headers="candidate">OGBURN GARDNER</td>
<td class="gt_row gt_left" headers="party">PROHIBITION</td>
<td class="gt_row gt_center" headers="writein">FALSE</td>
<td class="gt_row gt_left" headers="mode">TOTAL</td>
<td class="gt_row gt_right" headers="candidatevotes">1,111</td>
<td class="gt_row gt_right" headers="totalvotes">108,048</td>
<td class="gt_row gt_center" headers="unofficial">FALSE</td>
<td class="gt_row gt_right" headers="version">20,230,706</td>
<td class="gt_row gt_center" headers="fusion_ticket">FALSE</td>
</tr>
<tr class="odd">
<td class="gt_row gt_right" headers="year">1,976</td>
<td class="gt_row gt_left" headers="state">ALABAMA</td>
<td class="gt_row gt_left" headers="state_po">AL</td>
<td class="gt_row gt_right" headers="state_fips">1</td>
<td class="gt_row gt_right" headers="state_cen">63</td>
<td class="gt_row gt_right" headers="state_ic">41</td>
<td class="gt_row gt_left" headers="office">US HOUSE</td>
<td class="gt_row gt_right" headers="district">3</td>
<td class="gt_row gt_left" headers="stage">GEN</td>
<td class="gt_row gt_center" headers="runoff">FALSE</td>
<td class="gt_row gt_center" headers="special">FALSE</td>
<td class="gt_row gt_left" headers="candidate">WRITEIN</td>
<td class="gt_row gt_left" headers="party"></td>
<td class="gt_row gt_center" headers="writein">TRUE</td>
<td class="gt_row gt_left" headers="mode">TOTAL</td>
<td class="gt_row gt_right" headers="candidatevotes">2</td>
<td class="gt_row gt_right" headers="totalvotes">108,048</td>
<td class="gt_row gt_center" headers="unofficial">FALSE</td>
<td class="gt_row gt_right" headers="version">20,230,706</td>
<td class="gt_row gt_center" headers="fusion_ticket">FALSE</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="year">1,976</td>
<td class="gt_row gt_left" headers="state">ALABAMA</td>
<td class="gt_row gt_left" headers="state_po">AL</td>
<td class="gt_row gt_right" headers="state_fips">1</td>
<td class="gt_row gt_right" headers="state_cen">63</td>
<td class="gt_row gt_right" headers="state_ic">41</td>
<td class="gt_row gt_left" headers="office">US HOUSE</td>
<td class="gt_row gt_right" headers="district">4</td>
<td class="gt_row gt_left" headers="stage">GEN</td>
<td class="gt_row gt_center" headers="runoff">FALSE</td>
<td class="gt_row gt_center" headers="special">FALSE</td>
<td class="gt_row gt_left" headers="candidate">LEONARD WILSON</td>
<td class="gt_row gt_left" headers="party">REPUBLICAN</td>
<td class="gt_row gt_center" headers="writein">FALSE</td>
<td class="gt_row gt_left" headers="mode">TOTAL</td>
<td class="gt_row gt_right" headers="candidatevotes">34,531</td>
<td class="gt_row gt_right" headers="totalvotes">176,022</td>
<td class="gt_row gt_center" headers="unofficial">FALSE</td>
<td class="gt_row gt_right" headers="version">20,230,706</td>
<td class="gt_row gt_center" headers="fusion_ticket">FALSE</td>
</tr>
</tbody>
</table>

</div>
</div>
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co">#UCLA Shapefile</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Create directory for shapefiles with recursive creation</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="fu">dir.create</span>(<span class="st">"data/shapefiles"</span>, <span class="at">showWarnings =</span> <span class="cn">FALSE</span>, <span class="at">recursive =</span> <span class="cn">TRUE</span>)</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Function to download shapefiles systematically</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>download_shapefiles <span class="ot">&lt;-</span> <span class="cf">function</span>(start, end, base_url) {</span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (session <span class="cf">in</span> start<span class="sc">:</span>end) {</span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>    file_name <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">"districts"</span>, <span class="fu">sprintf</span>(<span class="st">"%03d"</span>, session), <span class="st">".zip"</span>)</span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>    url <span class="ot">&lt;-</span> <span class="fu">paste0</span>(base_url, file_name)</span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>    destfile <span class="ot">&lt;-</span> <span class="fu">file.path</span>(<span class="st">"data/shapefiles"</span>, file_name)</span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (<span class="sc">!</span><span class="fu">file.exists</span>(destfile)) {</span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a>      <span class="fu">GET</span>(url, <span class="fu">write_disk</span>(destfile, <span class="at">overwrite =</span> <span class="cn">TRUE</span>))</span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a>      <span class="fu">message</span>(<span class="fu">paste</span>(<span class="st">"Downloaded:"</span>, file_name))</span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">else</span> {</span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a>      <span class="fu">message</span>(<span class="fu">paste</span>(<span class="st">"File already exists:"</span>, file_name))</span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb3-20"><a href="#cb3-20" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb3-21"><a href="#cb3-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-22"><a href="#cb3-22" aria-hidden="true" tabindex="-1"></a><span class="co"># Define the base URL and download the files</span></span>
<span id="cb3-23"><a href="#cb3-23" aria-hidden="true" tabindex="-1"></a>base_url <span class="ot">&lt;-</span> <span class="st">"https://cdmaps.polisci.ucla.edu/shp/"</span></span>
<span id="cb3-24"><a href="#cb3-24" aria-hidden="true" tabindex="-1"></a><span class="fu">download_shapefiles</span>(<span class="dv">93</span>, <span class="dv">112</span>, base_url)</span>
<span id="cb3-25"><a href="#cb3-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-26"><a href="#cb3-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-27"><a href="#cb3-27" aria-hidden="true" tabindex="-1"></a><span class="co">#Census</span></span>
<span id="cb3-28"><a href="#cb3-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-29"><a href="#cb3-29" aria-hidden="true" tabindex="-1"></a><span class="co"># Create directory for shapefiles if it doesn't exist</span></span>
<span id="cb3-30"><a href="#cb3-30" aria-hidden="true" tabindex="-1"></a><span class="fu">dir.create</span>(<span class="st">"data/census_shapefiles"</span>, <span class="at">showWarnings =</span> <span class="cn">FALSE</span>, <span class="at">recursive =</span> <span class="cn">TRUE</span>)</span>
<span id="cb3-31"><a href="#cb3-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-32"><a href="#cb3-32" aria-hidden="true" tabindex="-1"></a><span class="co"># List of download URLs and file names for the shapefiles</span></span>
<span id="cb3-33"><a href="#cb3-33" aria-hidden="true" tabindex="-1"></a>shapefile_urls <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb3-34"><a href="#cb3-34" aria-hidden="true" tabindex="-1"></a>  <span class="st">"https://www2.census.gov/geo/tiger/TIGER2014/CD/tl_2014_us_cd114.zip"</span>,</span>
<span id="cb3-35"><a href="#cb3-35" aria-hidden="true" tabindex="-1"></a>  <span class="st">"https://www2.census.gov/geo/tiger/TIGER2015/CD/tl_2015_us_cd114.zip"</span>,</span>
<span id="cb3-36"><a href="#cb3-36" aria-hidden="true" tabindex="-1"></a>  <span class="st">"https://www2.census.gov/geo/tiger/TIGER2016/CD/tl_2016_us_cd115.zip"</span>,</span>
<span id="cb3-37"><a href="#cb3-37" aria-hidden="true" tabindex="-1"></a>  <span class="st">"https://www2.census.gov/geo/tiger/TIGER2017/CD/tl_2017_us_cd115.zip"</span>,</span>
<span id="cb3-38"><a href="#cb3-38" aria-hidden="true" tabindex="-1"></a>  <span class="st">"https://www2.census.gov/geo/tiger/TIGER2018/CD/tl_2018_us_cd116.zip"</span>,</span>
<span id="cb3-39"><a href="#cb3-39" aria-hidden="true" tabindex="-1"></a>  <span class="st">"https://www2.census.gov/geo/tiger/TIGER2019/CD/tl_2019_us_cd116.zip"</span>,</span>
<span id="cb3-40"><a href="#cb3-40" aria-hidden="true" tabindex="-1"></a>  <span class="st">"https://www2.census.gov/geo/tiger/TIGER2020/CD/tl_2020_us_cd116.zip"</span>,</span>
<span id="cb3-41"><a href="#cb3-41" aria-hidden="true" tabindex="-1"></a>  <span class="st">"https://www2.census.gov/geo/tiger/TIGER2021/CD/tl_2021_us_cd116.zip"</span>,</span>
<span id="cb3-42"><a href="#cb3-42" aria-hidden="true" tabindex="-1"></a>  <span class="st">"https://www2.census.gov/geo/tiger/TIGER2022/CD/tl_2022_us_cd116.zip"</span></span>
<span id="cb3-43"><a href="#cb3-43" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb3-44"><a href="#cb3-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-45"><a href="#cb3-45" aria-hidden="true" tabindex="-1"></a><span class="co"># Function to download shapefiles systematically</span></span>
<span id="cb3-46"><a href="#cb3-46" aria-hidden="true" tabindex="-1"></a>download_shapefiles_census <span class="ot">&lt;-</span> <span class="cf">function</span>(urls, dest_dir) {</span>
<span id="cb3-47"><a href="#cb3-47" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (url <span class="cf">in</span> urls) {</span>
<span id="cb3-48"><a href="#cb3-48" aria-hidden="true" tabindex="-1"></a>    file_name <span class="ot">&lt;-</span> <span class="fu">basename</span>(url)</span>
<span id="cb3-49"><a href="#cb3-49" aria-hidden="true" tabindex="-1"></a>    destfile <span class="ot">&lt;-</span> <span class="fu">file.path</span>(dest_dir, file_name)</span>
<span id="cb3-50"><a href="#cb3-50" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb3-51"><a href="#cb3-51" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Download file only if it doesn't already exist</span></span>
<span id="cb3-52"><a href="#cb3-52" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (<span class="sc">!</span><span class="fu">file.exists</span>(destfile)) {</span>
<span id="cb3-53"><a href="#cb3-53" aria-hidden="true" tabindex="-1"></a>      <span class="fu">GET</span>(url, <span class="fu">write_disk</span>(destfile, <span class="at">overwrite =</span> <span class="cn">TRUE</span>))</span>
<span id="cb3-54"><a href="#cb3-54" aria-hidden="true" tabindex="-1"></a>      <span class="fu">message</span>(<span class="fu">paste</span>(<span class="st">"Downloaded:"</span>, file_name))</span>
<span id="cb3-55"><a href="#cb3-55" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">else</span> {</span>
<span id="cb3-56"><a href="#cb3-56" aria-hidden="true" tabindex="-1"></a>      <span class="fu">message</span>(<span class="fu">paste</span>(<span class="st">"File already exists:"</span>, file_name))</span>
<span id="cb3-57"><a href="#cb3-57" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb3-58"><a href="#cb3-58" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb3-59"><a href="#cb3-59" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb3-60"><a href="#cb3-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-61"><a href="#cb3-61" aria-hidden="true" tabindex="-1"></a><span class="co"># Call the download function</span></span>
<span id="cb3-62"><a href="#cb3-62" aria-hidden="true" tabindex="-1"></a><span class="fu">download_shapefiles_census</span>(shapefile_urls, <span class="st">"data/census_shapefiles"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="initial-exploration-of-vote-count-data" class="level2">
<h2 class="anchored" data-anchor-id="initial-exploration-of-vote-count-data">Initial Exploration of Vote Count Data</h2>
<p>To analyze which states gained or lost the most seats in the U.S. House of Representatives between 1976 and 2022, I first filtered the House data to include only those years. Then, I grouped the data by year and state to calculate the number of seats per state. After determining the seat changes, I identified the top 5 states with the most significant gains and lost as follows:</p>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co">#3.1 Which states have gained and lost the most seats in the US House of Representatives between 1976 and 2022?</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Filter data for relevant years (1976 and 2022)</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>house_seats <span class="ot">&lt;-</span> house_data <span class="sc">%&gt;%</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">1976</span>, <span class="dv">2022</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(year, state, district) <span class="sc">%&gt;%</span></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year, state) <span class="sc">%&gt;%</span></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">seat_count =</span> <span class="fu">n</span>(), <span class="at">.groups =</span> <span class="st">"drop"</span>)</span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate seat changes</span></span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>seat_changes <span class="ot">&lt;-</span> house_seats <span class="sc">%&gt;%</span></span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> year, <span class="at">values_from =</span> seat_count, <span class="at">names_prefix =</span> <span class="st">"year_"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">seat_change =</span> year_2022 <span class="sc">-</span> year_1976) <span class="sc">%&gt;%</span></span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(seat_change))</span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Separate states with the highest seat changes</span></span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true" tabindex="-1"></a>top_gained <span class="ot">&lt;-</span> seat_changes <span class="sc">%&gt;%</span> <span class="fu">top_n</span>(<span class="dv">5</span>, seat_change)</span>
<span id="cb4-18"><a href="#cb4-18" aria-hidden="true" tabindex="-1"></a>top_lost <span class="ot">&lt;-</span> seat_changes <span class="sc">%&gt;%</span> <span class="fu">top_n</span>(<span class="sc">-</span><span class="dv">5</span>, seat_change)</span>
<span id="cb4-19"><a href="#cb4-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-20"><a href="#cb4-20" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot for top gained seats</span></span>
<span id="cb4-21"><a href="#cb4-21" aria-hidden="true" tabindex="-1"></a>gained_plot <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(top_gained, <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">reorder</span>(state, seat_change), <span class="at">y =</span> seat_change, <span class="at">fill =</span> seat_change)) <span class="sc">+</span></span>
<span id="cb4-22"><a href="#cb4-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>) <span class="sc">+</span></span>
<span id="cb4-23"><a href="#cb4-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb4-24"><a href="#cb4-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Top 5 States with Most Gained Seats (1976-2022)"</span>,</span>
<span id="cb4-25"><a href="#cb4-25" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"State"</span>,</span>
<span id="cb4-26"><a href="#cb4-26" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Number of Seats Gained"</span>) <span class="sc">+</span></span>
<span id="cb4-27"><a href="#cb4-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_gradient</span>(<span class="at">low =</span> <span class="st">"lightblue"</span>, <span class="at">high =</span> <span class="st">"darkblue"</span>) <span class="sc">+</span></span>
<span id="cb4-28"><a href="#cb4-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span>
<span id="cb4-29"><a href="#cb4-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-30"><a href="#cb4-30" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot for top lost seats</span></span>
<span id="cb4-31"><a href="#cb4-31" aria-hidden="true" tabindex="-1"></a>lost_plot <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(top_lost, <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">reorder</span>(state, seat_change), <span class="at">y =</span> seat_change, <span class="at">fill =</span> <span class="sc">-</span>seat_change)) <span class="sc">+</span></span>
<span id="cb4-32"><a href="#cb4-32" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>) <span class="sc">+</span></span>
<span id="cb4-33"><a href="#cb4-33" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb4-34"><a href="#cb4-34" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Top 5 States with Most Lost Seats (1976-2022)"</span>,</span>
<span id="cb4-35"><a href="#cb4-35" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"State"</span>,</span>
<span id="cb4-36"><a href="#cb4-36" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Number of Seats Lost"</span>) <span class="sc">+</span></span>
<span id="cb4-37"><a href="#cb4-37" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_gradient</span>(<span class="at">low =</span> <span class="st">"lightcoral"</span>, <span class="at">high =</span> <span class="st">"darkred"</span>) <span class="sc">+</span></span>
<span id="cb4-38"><a href="#cb4-38" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span>
<span id="cb4-39"><a href="#cb4-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-40"><a href="#cb4-40" aria-hidden="true" tabindex="-1"></a><span class="co"># Display plots</span></span>
<span id="cb4-41"><a href="#cb4-41" aria-hidden="true" tabindex="-1"></a><span class="fu">list</span>(gained_plot, lost_plot)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[[1]]</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="mp03_files/figure-html/unnamed-chunk-2-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
[[2]]</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="mp03_files/figure-html/unnamed-chunk-2-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>In New York State, the “fusion” voting system allows a candidate to appear on multiple party lines, with their votes across all lines being totaled. This system can sometimes affect the outcome of elections. The goal of this analysis is to determine if the outcome of any U.S. House elections in New York would have changed if the fusion system had not been used, meaning candidates would only receive votes from their major party lines (Democrat or Republican).</p>
<p>This code analyzes U.S. House elections in New York State to identify instances where the fusion voting system might have changed the election outcome. It filters the data for New York House races, focusing on candidates from the Democrat and Republican parties. The code calculates total votes across all lines (fusion) and major party votes only (non-fusion) for each candidate. It then determines the winner in both scenarios and compares them to highlight elections where the fusion system resulted in a different winner. The results are displayed in a formatted table using the gt package.</p>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(gt)</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="co">#3.2</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Filter for New York State and U.S. House elections</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>ny_house_data <span class="ot">&lt;-</span> house_data <span class="sc">%&gt;%</span></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(state <span class="sc">==</span> <span class="st">"NEW YORK"</span>, office <span class="sc">==</span> <span class="st">"US HOUSE"</span>)</span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Filter for candidates from major parties only (Democrat or Republican)</span></span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a><span class="co"># and keep records for candidates with votes across different lines</span></span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a>fusion_analysis <span class="ot">&lt;-</span> ny_house_data <span class="sc">%&gt;%</span></span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">is_major_party =</span> party <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"DEMOCRAT"</span>, <span class="st">"REPUBLICAN"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year, district, candidate) <span class="sc">%&gt;%</span></span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">total_votes_all_lines =</span> <span class="fu">sum</span>(candidatevotes),</span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">major_party_votes =</span> <span class="fu">sum</span>(candidatevotes[is_major_party]),</span>
<span id="cb7-17"><a href="#cb7-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">.groups =</span> <span class="st">"drop"</span></span>
<span id="cb7-18"><a href="#cb7-18" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb7-19"><a href="#cb7-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-20"><a href="#cb7-20" aria-hidden="true" tabindex="-1"></a><span class="co"># Determine the election winner by both fusion and non-fusion scenarios</span></span>
<span id="cb7-21"><a href="#cb7-21" aria-hidden="true" tabindex="-1"></a><span class="co"># Winner with fusion system (total across all lines)</span></span>
<span id="cb7-22"><a href="#cb7-22" aria-hidden="true" tabindex="-1"></a>winners_fusion <span class="ot">&lt;-</span> fusion_analysis <span class="sc">%&gt;%</span></span>
<span id="cb7-23"><a href="#cb7-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year, district) <span class="sc">%&gt;%</span></span>
<span id="cb7-24"><a href="#cb7-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(total_votes_all_lines <span class="sc">==</span> <span class="fu">max</span>(total_votes_all_lines)) <span class="sc">%&gt;%</span></span>
<span id="cb7-25"><a href="#cb7-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(year, district, candidate, total_votes_all_lines) <span class="sc">%&gt;%</span></span>
<span id="cb7-26"><a href="#cb7-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">fusion_winner =</span> candidate, <span class="at">fusion_votes =</span> total_votes_all_lines)</span>
<span id="cb7-27"><a href="#cb7-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-28"><a href="#cb7-28" aria-hidden="true" tabindex="-1"></a><span class="co"># Winner without fusion system (major party line votes only)</span></span>
<span id="cb7-29"><a href="#cb7-29" aria-hidden="true" tabindex="-1"></a>winners_nonfusion <span class="ot">&lt;-</span> fusion_analysis <span class="sc">%&gt;%</span></span>
<span id="cb7-30"><a href="#cb7-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year, district) <span class="sc">%&gt;%</span></span>
<span id="cb7-31"><a href="#cb7-31" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(major_party_votes <span class="sc">==</span> <span class="fu">max</span>(major_party_votes)) <span class="sc">%&gt;%</span></span>
<span id="cb7-32"><a href="#cb7-32" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(year, district, candidate, major_party_votes) <span class="sc">%&gt;%</span></span>
<span id="cb7-33"><a href="#cb7-33" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">nonfusion_winner =</span> candidate, <span class="at">nonfusion_votes =</span> major_party_votes)</span>
<span id="cb7-34"><a href="#cb7-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-35"><a href="#cb7-35" aria-hidden="true" tabindex="-1"></a><span class="co"># Compare outcomes</span></span>
<span id="cb7-36"><a href="#cb7-36" aria-hidden="true" tabindex="-1"></a>election_outcomes <span class="ot">&lt;-</span> winners_fusion <span class="sc">%&gt;%</span></span>
<span id="cb7-37"><a href="#cb7-37" aria-hidden="true" tabindex="-1"></a>  <span class="fu">inner_join</span>(winners_nonfusion, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"year"</span>, <span class="st">"district"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb7-38"><a href="#cb7-38" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(fusion_winner <span class="sc">!=</span> nonfusion_winner)</span>
<span id="cb7-39"><a href="#cb7-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-40"><a href="#cb7-40" aria-hidden="true" tabindex="-1"></a><span class="co"># Create the gt table with updated styles</span></span>
<span id="cb7-41"><a href="#cb7-41" aria-hidden="true" tabindex="-1"></a>election_outcomes_table <span class="ot">&lt;-</span> election_outcomes <span class="sc">%&gt;%</span></span>
<span id="cb7-42"><a href="#cb7-42" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>() <span class="sc">%&gt;%</span></span>
<span id="cb7-43"><a href="#cb7-43" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_header</span>(</span>
<span id="cb7-44"><a href="#cb7-44" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Elections Affected by Fusion Voting System"</span>,</span>
<span id="cb7-45"><a href="#cb7-45" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"Comparison of Winners with and without Fusion Voting"</span></span>
<span id="cb7-46"><a href="#cb7-46" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb7-47"><a href="#cb7-47" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cols_label</span>(</span>
<span id="cb7-48"><a href="#cb7-48" aria-hidden="true" tabindex="-1"></a>    <span class="at">year =</span> <span class="st">"Year"</span>,</span>
<span id="cb7-49"><a href="#cb7-49" aria-hidden="true" tabindex="-1"></a>    <span class="at">district =</span> <span class="st">"District"</span>,</span>
<span id="cb7-50"><a href="#cb7-50" aria-hidden="true" tabindex="-1"></a>    <span class="at">fusion_winner =</span> <span class="st">"Winner with Fusion Voting"</span>,</span>
<span id="cb7-51"><a href="#cb7-51" aria-hidden="true" tabindex="-1"></a>    <span class="at">fusion_votes =</span> <span class="st">"Votes (Fusion)"</span>,</span>
<span id="cb7-52"><a href="#cb7-52" aria-hidden="true" tabindex="-1"></a>    <span class="at">nonfusion_winner =</span> <span class="st">"Winner without Fusion Voting"</span>,</span>
<span id="cb7-53"><a href="#cb7-53" aria-hidden="true" tabindex="-1"></a>    <span class="at">nonfusion_votes =</span> <span class="st">"Votes (Non-Fusion)"</span></span>
<span id="cb7-54"><a href="#cb7-54" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb7-55"><a href="#cb7-55" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fmt_number</span>(</span>
<span id="cb7-56"><a href="#cb7-56" aria-hidden="true" tabindex="-1"></a>    <span class="at">columns =</span> <span class="fu">c</span>(fusion_votes, nonfusion_votes),</span>
<span id="cb7-57"><a href="#cb7-57" aria-hidden="true" tabindex="-1"></a>    <span class="at">decimals =</span> <span class="dv">0</span></span>
<span id="cb7-58"><a href="#cb7-58" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb7-59"><a href="#cb7-59" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_options</span>(</span>
<span id="cb7-60"><a href="#cb7-60" aria-hidden="true" tabindex="-1"></a>    <span class="at">table.font.size =</span> <span class="fu">px</span>(<span class="dv">14</span>),</span>
<span id="cb7-61"><a href="#cb7-61" aria-hidden="true" tabindex="-1"></a>    <span class="at">heading.align =</span> <span class="st">"center"</span></span>
<span id="cb7-62"><a href="#cb7-62" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb7-63"><a href="#cb7-63" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-64"><a href="#cb7-64" aria-hidden="true" tabindex="-1"></a><span class="co"># Display the table in Quarto environment</span></span>
<span id="cb7-65"><a href="#cb7-65" aria-hidden="true" tabindex="-1"></a>election_outcomes_table</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div id="gnlhnhpcto" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#gnlhnhpcto table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#gnlhnhpcto thead, #gnlhnhpcto tbody, #gnlhnhpcto tfoot, #gnlhnhpcto tr, #gnlhnhpcto td, #gnlhnhpcto th {
  border-style: none;
}

#gnlhnhpcto p {
  margin: 0;
  padding: 0;
}

#gnlhnhpcto .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 14px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#gnlhnhpcto .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#gnlhnhpcto .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#gnlhnhpcto .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#gnlhnhpcto .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#gnlhnhpcto .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#gnlhnhpcto .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#gnlhnhpcto .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#gnlhnhpcto .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#gnlhnhpcto .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#gnlhnhpcto .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#gnlhnhpcto .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#gnlhnhpcto .gt_spanner_row {
  border-bottom-style: hidden;
}

#gnlhnhpcto .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#gnlhnhpcto .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#gnlhnhpcto .gt_from_md > :first-child {
  margin-top: 0;
}

#gnlhnhpcto .gt_from_md > :last-child {
  margin-bottom: 0;
}

#gnlhnhpcto .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#gnlhnhpcto .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#gnlhnhpcto .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#gnlhnhpcto .gt_row_group_first td {
  border-top-width: 2px;
}

#gnlhnhpcto .gt_row_group_first th {
  border-top-width: 2px;
}

#gnlhnhpcto .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#gnlhnhpcto .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#gnlhnhpcto .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#gnlhnhpcto .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#gnlhnhpcto .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#gnlhnhpcto .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#gnlhnhpcto .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#gnlhnhpcto .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#gnlhnhpcto .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#gnlhnhpcto .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#gnlhnhpcto .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#gnlhnhpcto .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#gnlhnhpcto .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#gnlhnhpcto .gt_left {
  text-align: left;
}

#gnlhnhpcto .gt_center {
  text-align: center;
}

#gnlhnhpcto .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#gnlhnhpcto .gt_font_normal {
  font-weight: normal;
}

#gnlhnhpcto .gt_font_bold {
  font-weight: bold;
}

#gnlhnhpcto .gt_font_italic {
  font-style: italic;
}

#gnlhnhpcto .gt_super {
  font-size: 65%;
}

#gnlhnhpcto .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#gnlhnhpcto .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#gnlhnhpcto .gt_indent_1 {
  text-indent: 5px;
}

#gnlhnhpcto .gt_indent_2 {
  text-indent: 10px;
}

#gnlhnhpcto .gt_indent_3 {
  text-indent: 15px;
}

#gnlhnhpcto .gt_indent_4 {
  text-indent: 20px;
}

#gnlhnhpcto .gt_indent_5 {
  text-indent: 25px;
}

#gnlhnhpcto .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#gnlhnhpcto div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}
</style>

<table class="gt_table caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead>
<tr class="header gt_heading">
<th colspan="4" class="gt_heading gt_title gt_font_normal">Elections Affected by Fusion Voting System</th>
</tr>
<tr class="odd gt_heading">
<th colspan="4" class="gt_heading gt_subtitle gt_font_normal gt_bottom_border">Comparison of Winners with and without Fusion Voting</th>
</tr>
<tr class="header gt_col_headings">
<th id="fusion_winner" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">Winner with Fusion Voting</th>
<th id="fusion_votes" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">Votes (Fusion)</th>
<th id="nonfusion_winner" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">Winner without Fusion Voting</th>
<th id="nonfusion_votes" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">Votes (Non-Fusion)</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="odd gt_group_heading_row">
<td colspan="4" id="1976 - 29" class="gt_group_heading" data-quarto-table-cell-role="th" scope="colgroup">1976 - 29</td>
</tr>
<tr class="even gt_row_group_first">
<td class="gt_row gt_left" headers="1976 - 29  fusion_winner">EDWARD W PATTISON</td>
<td class="gt_row gt_right" headers="1976 - 29  fusion_votes">100,663</td>
<td class="gt_row gt_left" headers="1976 - 29  nonfusion_winner">JOSEPH A MARTINO</td>
<td class="gt_row gt_right" headers="1976 - 29  nonfusion_votes">96,476</td>
</tr>
<tr class="odd gt_group_heading_row">
<td colspan="4" id="1980 - 3" class="gt_group_heading" data-quarto-table-cell-role="th" scope="colgroup">1980 - 3</td>
</tr>
<tr class="even gt_row_group_first">
<td class="gt_row gt_left" headers="1980 - 3  fusion_winner">GREGORY W CARMAN</td>
<td class="gt_row gt_right" headers="1980 - 3  fusion_votes">87,952</td>
<td class="gt_row gt_left" headers="1980 - 3  nonfusion_winner">JEROME A AMBRO JR</td>
<td class="gt_row gt_right" headers="1980 - 3  nonfusion_votes">75,389</td>
</tr>
<tr class="odd gt_group_heading_row">
<td colspan="4" id="1980 - 6" class="gt_group_heading" data-quarto-table-cell-role="th" scope="colgroup">1980 - 6</td>
</tr>
<tr class="even gt_row_group_first">
<td class="gt_row gt_left" headers="1980 - 6  fusion_winner">JOHN LEBOUTILLIER</td>
<td class="gt_row gt_right" headers="1980 - 6  fusion_votes">89,762</td>
<td class="gt_row gt_left" headers="1980 - 6  nonfusion_winner">LESTER L WOLFF</td>
<td class="gt_row gt_right" headers="1980 - 6  nonfusion_votes">74,319</td>
</tr>
<tr class="odd gt_group_heading_row">
<td colspan="4" id="1984 - 20" class="gt_group_heading" data-quarto-table-cell-role="th" scope="colgroup">1984 - 20</td>
</tr>
<tr class="even gt_row_group_first">
<td class="gt_row gt_left" headers="1984 - 20  fusion_winner">JOSEPH J DIOGUARDI</td>
<td class="gt_row gt_right" headers="1984 - 20  fusion_votes">106,958</td>
<td class="gt_row gt_left" headers="1984 - 20  nonfusion_winner">OREN J TEICHER</td>
<td class="gt_row gt_right" headers="1984 - 20  nonfusion_votes">102,842</td>
</tr>
<tr class="odd gt_group_heading_row">
<td colspan="4" id="1986 - 27" class="gt_group_heading" data-quarto-table-cell-role="th" scope="colgroup">1986 - 27</td>
</tr>
<tr class="even gt_row_group_first">
<td class="gt_row gt_left" headers="1986 - 27  fusion_winner">GEORGE C WORTLEY</td>
<td class="gt_row gt_right" headers="1986 - 27  fusion_votes">83,430</td>
<td class="gt_row gt_left" headers="1986 - 27  nonfusion_winner">ROSEMARY S POOLER</td>
<td class="gt_row gt_right" headers="1986 - 27  nonfusion_votes">81,133</td>
</tr>
<tr class="odd gt_group_heading_row">
<td colspan="4" id="1992 - 3" class="gt_group_heading" data-quarto-table-cell-role="th" scope="colgroup">1992 - 3</td>
</tr>
<tr class="even gt_row_group_first">
<td class="gt_row gt_left" headers="1992 - 3  fusion_winner">PETER T KING</td>
<td class="gt_row gt_right" headers="1992 - 3  fusion_votes">124,727</td>
<td class="gt_row gt_left" headers="1992 - 3  nonfusion_winner">STEVE A ORLINS</td>
<td class="gt_row gt_right" headers="1992 - 3  nonfusion_votes">116,915</td>
</tr>
<tr class="odd gt_group_heading_row">
<td colspan="4" id="1994 - 1" class="gt_group_heading" data-quarto-table-cell-role="th" scope="colgroup">1994 - 1</td>
</tr>
<tr class="even gt_row_group_first">
<td class="gt_row gt_left" headers="1994 - 1  fusion_winner">MICHAEL P FORBES</td>
<td class="gt_row gt_right" headers="1994 - 1  fusion_votes">90,491</td>
<td class="gt_row gt_left" headers="1994 - 1  nonfusion_winner">GEORGE J HOCHBRUECKNER</td>
<td class="gt_row gt_right" headers="1994 - 1  nonfusion_votes">78,692</td>
</tr>
<tr class="odd gt_group_heading_row">
<td colspan="4" id="1996 - 1" class="gt_group_heading" data-quarto-table-cell-role="th" scope="colgroup">1996 - 1</td>
</tr>
<tr class="even gt_row_group_first">
<td class="gt_row gt_left" headers="1996 - 1  fusion_winner">MICHAEL P FORBES</td>
<td class="gt_row gt_right" headers="1996 - 1  fusion_votes">116,620</td>
<td class="gt_row gt_left" headers="1996 - 1  nonfusion_winner">NORA L BREDES</td>
<td class="gt_row gt_right" headers="1996 - 1  nonfusion_votes">93,816</td>
</tr>
<tr class="odd gt_group_heading_row">
<td colspan="4" id="1996 - 30" class="gt_group_heading" data-quarto-table-cell-role="th" scope="colgroup">1996 - 30</td>
</tr>
<tr class="even gt_row_group_first">
<td class="gt_row gt_left" headers="1996 - 30  fusion_winner">JACK QUINN</td>
<td class="gt_row gt_right" headers="1996 - 30  fusion_votes">121,369</td>
<td class="gt_row gt_left" headers="1996 - 30  nonfusion_winner">FRANCIS J PORDUM</td>
<td class="gt_row gt_right" headers="1996 - 30  nonfusion_votes">97,686</td>
</tr>
<tr class="odd gt_group_heading_row">
<td colspan="4" id="2006 - 25" class="gt_group_heading" data-quarto-table-cell-role="th" scope="colgroup">2006 - 25</td>
</tr>
<tr class="even gt_row_group_first">
<td class="gt_row gt_left" headers="2006 - 25  fusion_winner">JAMES T WALSH</td>
<td class="gt_row gt_right" headers="2006 - 25  fusion_votes">110,525</td>
<td class="gt_row gt_left" headers="2006 - 25  nonfusion_winner">DAN MAFFEI</td>
<td class="gt_row gt_right" headers="2006 - 25  nonfusion_votes">100,605</td>
</tr>
<tr class="odd gt_group_heading_row">
<td colspan="4" id="2006 - 29" class="gt_group_heading" data-quarto-table-cell-role="th" scope="colgroup">2006 - 29</td>
</tr>
<tr class="even gt_row_group_first">
<td class="gt_row gt_left" headers="2006 - 29  fusion_winner">JOHN R "RANDY" KUHL JR</td>
<td class="gt_row gt_right" headers="2006 - 29  fusion_votes">106,077</td>
<td class="gt_row gt_left" headers="2006 - 29  nonfusion_winner">ERIC J MASSA</td>
<td class="gt_row gt_right" headers="2006 - 29  nonfusion_votes">94,609</td>
</tr>
<tr class="odd gt_group_heading_row">
<td colspan="4" id="2010 - 13" class="gt_group_heading" data-quarto-table-cell-role="th" scope="colgroup">2010 - 13</td>
</tr>
<tr class="even gt_row_group_first">
<td class="gt_row gt_left" headers="2010 - 13  fusion_winner">MICHAEL G GRIMM</td>
<td class="gt_row gt_right" headers="2010 - 13  fusion_votes">65,024</td>
<td class="gt_row gt_left" headers="2010 - 13  nonfusion_winner">MICHAEL E MCMAHON</td>
<td class="gt_row gt_right" headers="2010 - 13  nonfusion_votes">60,773</td>
</tr>
<tr class="odd gt_group_heading_row">
<td colspan="4" id="2010 - 19" class="gt_group_heading" data-quarto-table-cell-role="th" scope="colgroup">2010 - 19</td>
</tr>
<tr class="even gt_row_group_first">
<td class="gt_row gt_left" headers="2010 - 19  fusion_winner">NAN HAYMORTH</td>
<td class="gt_row gt_right" headers="2010 - 19  fusion_votes">109,956</td>
<td class="gt_row gt_left" headers="2010 - 19  nonfusion_winner">JOHN J HALL</td>
<td class="gt_row gt_right" headers="2010 - 19  nonfusion_votes">98,766</td>
</tr>
<tr class="odd gt_group_heading_row">
<td colspan="4" id="2010 - 24" class="gt_group_heading" data-quarto-table-cell-role="th" scope="colgroup">2010 - 24</td>
</tr>
<tr class="even gt_row_group_first">
<td class="gt_row gt_left" headers="2010 - 24  fusion_winner">RICHARD L HANNA</td>
<td class="gt_row gt_right" headers="2010 - 24  fusion_votes">101,599</td>
<td class="gt_row gt_left" headers="2010 - 24  nonfusion_winner">MICHAEL A ARCURI</td>
<td class="gt_row gt_right" headers="2010 - 24  nonfusion_votes">89,809</td>
</tr>
<tr class="odd gt_group_heading_row">
<td colspan="4" id="2010 - 25" class="gt_group_heading" data-quarto-table-cell-role="th" scope="colgroup">2010 - 25</td>
</tr>
<tr class="even gt_row_group_first">
<td class="gt_row gt_left" headers="2010 - 25  fusion_winner">ANN MARIE BUERKLE</td>
<td class="gt_row gt_right" headers="2010 - 25  fusion_votes">104,602</td>
<td class="gt_row gt_left" headers="2010 - 25  nonfusion_winner">DANIEL B MAFFEI</td>
<td class="gt_row gt_right" headers="2010 - 25  nonfusion_votes">103,954</td>
</tr>
<tr class="odd gt_group_heading_row">
<td colspan="4" id="2012 - 27" class="gt_group_heading" data-quarto-table-cell-role="th" scope="colgroup">2012 - 27</td>
</tr>
<tr class="even gt_row_group_first">
<td class="gt_row gt_left" headers="2012 - 27  fusion_winner">CHRIS COLLINS</td>
<td class="gt_row gt_right" headers="2012 - 27  fusion_votes">161,220</td>
<td class="gt_row gt_left" headers="2012 - 27  nonfusion_winner">KATHLEEN C HOCHUL</td>
<td class="gt_row gt_right" headers="2012 - 27  nonfusion_votes">140,008</td>
</tr>
<tr class="odd gt_group_heading_row">
<td colspan="4" id="2018 - 1" class="gt_group_heading" data-quarto-table-cell-role="th" scope="colgroup">2018 - 1</td>
</tr>
<tr class="even gt_row_group_first">
<td class="gt_row gt_left" headers="2018 - 1  fusion_winner">LEE M ZELDIN</td>
<td class="gt_row gt_right" headers="2018 - 1  fusion_votes">139,027</td>
<td class="gt_row gt_left" headers="2018 - 1  nonfusion_winner">PERRY GERSHON</td>
<td class="gt_row gt_right" headers="2018 - 1  nonfusion_votes">124,213</td>
</tr>
<tr class="odd gt_group_heading_row">
<td colspan="4" id="2018 - 24" class="gt_group_heading" data-quarto-table-cell-role="th" scope="colgroup">2018 - 24</td>
</tr>
<tr class="even gt_row_group_first">
<td class="gt_row gt_left" headers="2018 - 24  fusion_winner">JOHN M KATKO</td>
<td class="gt_row gt_right" headers="2018 - 24  fusion_votes">136,920</td>
<td class="gt_row gt_left" headers="2018 - 24  nonfusion_winner">DANA BALTER</td>
<td class="gt_row gt_right" headers="2018 - 24  nonfusion_votes">115,902</td>
</tr>
<tr class="odd gt_group_heading_row">
<td colspan="4" id="2018 - 27" class="gt_group_heading" data-quarto-table-cell-role="th" scope="colgroup">2018 - 27</td>
</tr>
<tr class="even gt_row_group_first">
<td class="gt_row gt_left" headers="2018 - 27  fusion_winner">CHRIS COLLINS</td>
<td class="gt_row gt_right" headers="2018 - 27  fusion_votes">140,146</td>
<td class="gt_row gt_left" headers="2018 - 27  nonfusion_winner">NATHAN D MCMURRAY</td>
<td class="gt_row gt_right" headers="2018 - 27  nonfusion_votes">128,167</td>
</tr>
<tr class="odd gt_group_heading_row">
<td colspan="4" id="2022 - 4" class="gt_group_heading" data-quarto-table-cell-role="th" scope="colgroup">2022 - 4</td>
</tr>
<tr class="even gt_row_group_first">
<td class="gt_row gt_left" headers="2022 - 4  fusion_winner">ANTHONY P D’ESPOSITO</td>
<td class="gt_row gt_right" headers="2022 - 4  fusion_votes">140,622</td>
<td class="gt_row gt_left" headers="2022 - 4  nonfusion_winner">LAURA A GILLEN</td>
<td class="gt_row gt_right" headers="2022 - 4  nonfusion_votes">130,871</td>
</tr>
<tr class="odd gt_group_heading_row">
<td colspan="4" id="2022 - 17" class="gt_group_heading" data-quarto-table-cell-role="th" scope="colgroup">2022 - 17</td>
</tr>
<tr class="even gt_row_group_first">
<td class="gt_row gt_left" headers="2022 - 17  fusion_winner">MICHAEL V LAWLER</td>
<td class="gt_row gt_right" headers="2022 - 17  fusion_votes">143,550</td>
<td class="gt_row gt_left" headers="2022 - 17  nonfusion_winner">SEAN PATRICK MALONEY</td>
<td class="gt_row gt_right" headers="2022 - 17  nonfusion_votes">133,457</td>
</tr>
<tr class="odd gt_group_heading_row">
<td colspan="4" id="2022 - 22" class="gt_group_heading" data-quarto-table-cell-role="th" scope="colgroup">2022 - 22</td>
</tr>
<tr class="even gt_row_group_first">
<td class="gt_row gt_left" headers="2022 - 22  fusion_winner">BRANDON M WILLIAMS</td>
<td class="gt_row gt_right" headers="2022 - 22  fusion_votes">135,544</td>
<td class="gt_row gt_left" headers="2022 - 22  nonfusion_winner">FRANCIS CONOLE</td>
<td class="gt_row gt_right" headers="2022 - 22  nonfusion_votes">132,913</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>In exploring U.S. voting trends from 1976 to 2012, the code examines whether presidential candidates typically receive more votes than their party’s congressional candidates within the same state. It filters and aggregates vote data for both presidential and congressional races by year, then calculates the percentage difference between the total votes for presidential and congressional candidates. The results are presented in a formatted table using the gt package, and a line plot visualizes the vote percentage difference over time. The analysis reveals a general trend of decreasing presidential vote share relative to congressional vote share over the years, highlighting variations in the relationship between presidential and congressional vote shares across different election years and states.</p>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co">#3.3</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Filter and aggregate presidential votes</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>presidential_votes <span class="ot">&lt;-</span> president_data <span class="sc">%&gt;%</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(office <span class="sc">==</span> <span class="st">"US PRESIDENT"</span>, year <span class="sc">&gt;=</span> <span class="dv">1976</span>, year <span class="sc">&lt;=</span> <span class="dv">2012</span>) <span class="sc">%&gt;%</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year) <span class="sc">%&gt;%</span></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">total_president_votes =</span> <span class="fu">sum</span>(candidatevotes), <span class="at">.groups =</span> <span class="st">"drop"</span>)</span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Filter and aggregate congressional votes</span></span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>congressional_votes <span class="ot">&lt;-</span> house_data <span class="sc">%&gt;%</span></span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(office <span class="sc">==</span> <span class="st">"US HOUSE"</span>, year <span class="sc">&gt;=</span> <span class="dv">1976</span>, year <span class="sc">&lt;=</span> <span class="dv">2012</span>) <span class="sc">%&gt;%</span></span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year) <span class="sc">%&gt;%</span></span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">total_congress_votes =</span> <span class="fu">sum</span>(candidatevotes), <span class="at">.groups =</span> <span class="st">"drop"</span>)</span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Combine the datasets</span></span>
<span id="cb8-15"><a href="#cb8-15" aria-hidden="true" tabindex="-1"></a>vote_comparison <span class="ot">&lt;-</span> presidential_votes <span class="sc">%&gt;%</span></span>
<span id="cb8-16"><a href="#cb8-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(congressional_votes, <span class="at">by =</span> <span class="st">"year"</span>)</span>
<span id="cb8-17"><a href="#cb8-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-18"><a href="#cb8-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate vote percentage difference</span></span>
<span id="cb8-19"><a href="#cb8-19" aria-hidden="true" tabindex="-1"></a>vote_comparison <span class="ot">&lt;-</span> vote_comparison <span class="sc">%&gt;%</span></span>
<span id="cb8-20"><a href="#cb8-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">vote_percentage_difference =</span> </span>
<span id="cb8-21"><a href="#cb8-21" aria-hidden="true" tabindex="-1"></a>           (total_president_votes <span class="sc">-</span> total_congress_votes) <span class="sc">/</span> total_congress_votes)</span>
<span id="cb8-22"><a href="#cb8-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-23"><a href="#cb8-23" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a gt table</span></span>
<span id="cb8-24"><a href="#cb8-24" aria-hidden="true" tabindex="-1"></a>vote_table <span class="ot">&lt;-</span> vote_comparison <span class="sc">%&gt;%</span></span>
<span id="cb8-25"><a href="#cb8-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>() <span class="sc">%&gt;%</span></span>
<span id="cb8-26"><a href="#cb8-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_header</span>(</span>
<span id="cb8-27"><a href="#cb8-27" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Total Votes for Presidential and Congressional Candidates (1976 - 2012)"</span></span>
<span id="cb8-28"><a href="#cb8-28" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb8-29"><a href="#cb8-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cols_label</span>(</span>
<span id="cb8-30"><a href="#cb8-30" aria-hidden="true" tabindex="-1"></a>    <span class="at">year =</span> <span class="st">"Year"</span>,</span>
<span id="cb8-31"><a href="#cb8-31" aria-hidden="true" tabindex="-1"></a>    <span class="at">total_president_votes =</span> <span class="st">"Total Presidential Votes"</span>,</span>
<span id="cb8-32"><a href="#cb8-32" aria-hidden="true" tabindex="-1"></a>    <span class="at">total_congress_votes =</span> <span class="st">"Total Congressional Votes"</span>,</span>
<span id="cb8-33"><a href="#cb8-33" aria-hidden="true" tabindex="-1"></a>    <span class="at">vote_percentage_difference =</span> <span class="st">"Vote Percentage Difference (%)"</span></span>
<span id="cb8-34"><a href="#cb8-34" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb8-35"><a href="#cb8-35" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fmt_number</span>(</span>
<span id="cb8-36"><a href="#cb8-36" aria-hidden="true" tabindex="-1"></a>    <span class="at">columns =</span> <span class="fu">c</span>(total_president_votes, total_congress_votes), </span>
<span id="cb8-37"><a href="#cb8-37" aria-hidden="true" tabindex="-1"></a>    <span class="at">decimals =</span> <span class="dv">0</span></span>
<span id="cb8-38"><a href="#cb8-38" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb8-39"><a href="#cb8-39" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fmt_percent</span>(</span>
<span id="cb8-40"><a href="#cb8-40" aria-hidden="true" tabindex="-1"></a>    <span class="at">columns =</span> vote_percentage_difference,</span>
<span id="cb8-41"><a href="#cb8-41" aria-hidden="true" tabindex="-1"></a>    <span class="at">decimals =</span> <span class="dv">1</span></span>
<span id="cb8-42"><a href="#cb8-42" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb8-43"><a href="#cb8-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-44"><a href="#cb8-44" aria-hidden="true" tabindex="-1"></a><span class="co"># Plotting the vote percentage difference over the years</span></span>
<span id="cb8-45"><a href="#cb8-45" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(vote_comparison, <span class="fu">aes</span>(<span class="at">x =</span> year, <span class="at">y =</span> vote_percentage_difference)) <span class="sc">+</span></span>
<span id="cb8-46"><a href="#cb8-46" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">color =</span> <span class="st">"blue"</span>, <span class="at">size =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb8-47"><a href="#cb8-47" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">color =</span> <span class="st">"blue"</span>, <span class="at">size =</span> <span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb8-48"><a href="#cb8-48" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Percentage Difference Between Presidential and Congressional Votes (1976 - 2012)"</span>,</span>
<span id="cb8-49"><a href="#cb8-49" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Year"</span>,</span>
<span id="cb8-50"><a href="#cb8-50" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Vote Percentage Difference (%)"</span>) <span class="sc">+</span></span>
<span id="cb8-51"><a href="#cb8-51" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="mp03_files/figure-html/unnamed-chunk-4-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Display the gt table</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>vote_table</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div id="qvxithijvw" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#qvxithijvw table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#qvxithijvw thead, #qvxithijvw tbody, #qvxithijvw tfoot, #qvxithijvw tr, #qvxithijvw td, #qvxithijvw th {
  border-style: none;
}

#qvxithijvw p {
  margin: 0;
  padding: 0;
}

#qvxithijvw .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#qvxithijvw .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#qvxithijvw .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#qvxithijvw .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#qvxithijvw .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#qvxithijvw .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#qvxithijvw .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#qvxithijvw .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#qvxithijvw .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#qvxithijvw .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#qvxithijvw .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#qvxithijvw .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#qvxithijvw .gt_spanner_row {
  border-bottom-style: hidden;
}

#qvxithijvw .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#qvxithijvw .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#qvxithijvw .gt_from_md > :first-child {
  margin-top: 0;
}

#qvxithijvw .gt_from_md > :last-child {
  margin-bottom: 0;
}

#qvxithijvw .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#qvxithijvw .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#qvxithijvw .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#qvxithijvw .gt_row_group_first td {
  border-top-width: 2px;
}

#qvxithijvw .gt_row_group_first th {
  border-top-width: 2px;
}

#qvxithijvw .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#qvxithijvw .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#qvxithijvw .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#qvxithijvw .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#qvxithijvw .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#qvxithijvw .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#qvxithijvw .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#qvxithijvw .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#qvxithijvw .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#qvxithijvw .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#qvxithijvw .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#qvxithijvw .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#qvxithijvw .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#qvxithijvw .gt_left {
  text-align: left;
}

#qvxithijvw .gt_center {
  text-align: center;
}

#qvxithijvw .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#qvxithijvw .gt_font_normal {
  font-weight: normal;
}

#qvxithijvw .gt_font_bold {
  font-weight: bold;
}

#qvxithijvw .gt_font_italic {
  font-style: italic;
}

#qvxithijvw .gt_super {
  font-size: 65%;
}

#qvxithijvw .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#qvxithijvw .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#qvxithijvw .gt_indent_1 {
  text-indent: 5px;
}

#qvxithijvw .gt_indent_2 {
  text-indent: 10px;
}

#qvxithijvw .gt_indent_3 {
  text-indent: 15px;
}

#qvxithijvw .gt_indent_4 {
  text-indent: 20px;
}

#qvxithijvw .gt_indent_5 {
  text-indent: 25px;
}

#qvxithijvw .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#qvxithijvw div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}
</style>

<table class="gt_table caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead>
<tr class="header gt_heading">
<th colspan="4" class="gt_heading gt_title gt_font_normal gt_bottom_border">Total Votes for Presidential and Congressional Candidates (1976 - 2012)</th>
</tr>
<tr class="odd gt_col_headings">
<th id="year" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">Year</th>
<th id="total_president_votes" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">Total Presidential Votes</th>
<th id="total_congress_votes" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">Total Congressional Votes</th>
<th id="vote_percentage_difference" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">Vote Percentage Difference (%)</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_right" headers="year">1976</td>
<td class="gt_row gt_right" headers="total_president_votes">81,601,344</td>
<td class="gt_row gt_right" headers="total_congress_votes">74,259,171</td>
<td class="gt_row gt_right" headers="vote_percentage_difference">9.9%</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="year">1980</td>
<td class="gt_row gt_right" headers="total_president_votes">86,496,851</td>
<td class="gt_row gt_right" headers="total_congress_votes">77,873,913</td>
<td class="gt_row gt_right" headers="vote_percentage_difference">11.1%</td>
</tr>
<tr class="odd">
<td class="gt_row gt_right" headers="year">1984</td>
<td class="gt_row gt_right" headers="total_president_votes">92,654,861</td>
<td class="gt_row gt_right" headers="total_congress_votes">82,421,874</td>
<td class="gt_row gt_right" headers="vote_percentage_difference">12.4%</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="year">1988</td>
<td class="gt_row gt_right" headers="total_president_votes">91,586,825</td>
<td class="gt_row gt_right" headers="total_congress_votes">81,682,171</td>
<td class="gt_row gt_right" headers="vote_percentage_difference">12.1%</td>
</tr>
<tr class="odd">
<td class="gt_row gt_right" headers="year">1992</td>
<td class="gt_row gt_right" headers="total_president_votes">104,599,780</td>
<td class="gt_row gt_right" headers="total_congress_votes">97,281,410</td>
<td class="gt_row gt_right" headers="vote_percentage_difference">7.5%</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="year">1996</td>
<td class="gt_row gt_right" headers="total_president_votes">96,389,818</td>
<td class="gt_row gt_right" headers="total_congress_votes">90,745,365</td>
<td class="gt_row gt_right" headers="vote_percentage_difference">6.2%</td>
</tr>
<tr class="odd">
<td class="gt_row gt_right" headers="year">2000</td>
<td class="gt_row gt_right" headers="total_president_votes">105,593,982</td>
<td class="gt_row gt_right" headers="total_congress_votes">98,799,965</td>
<td class="gt_row gt_right" headers="vote_percentage_difference">6.9%</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="year">2004</td>
<td class="gt_row gt_right" headers="total_president_votes">122,349,450</td>
<td class="gt_row gt_right" headers="total_congress_votes">113,191,293</td>
<td class="gt_row gt_right" headers="vote_percentage_difference">8.1%</td>
</tr>
<tr class="odd">
<td class="gt_row gt_right" headers="year">2008</td>
<td class="gt_row gt_right" headers="total_president_votes">131,419,253</td>
<td class="gt_row gt_right" headers="total_congress_votes">122,586,298</td>
<td class="gt_row gt_right" headers="vote_percentage_difference">7.2%</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="year">2012</td>
<td class="gt_row gt_right" headers="total_president_votes">129,139,997</td>
<td class="gt_row gt_right" headers="total_congress_votes">122,345,021</td>
<td class="gt_row gt_right" headers="vote_percentage_difference">5.6%</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>I also analyze voting patterns for presidential and congressional candidates by party from 1976 to 2012. The code aggregates the vote totals by year and party for both presidential and congressional races, then merges the datasets to facilitate comparison. The data is reshaped into a long format for easier visualization, and a stacked area chart is created to display the number of votes for each party in both presidential and congressional elections over time. The chart highlights a consistent trend of presidential candidates receiving more votes than congressional candidates, helping to identify shifts in party performance across years and races.</p>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co">#3.3</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Aggregate votes by party for presidential and congressional candidates</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>party_votes <span class="ot">&lt;-</span> president_data <span class="sc">%&gt;%</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(office <span class="sc">==</span> <span class="st">"US PRESIDENT"</span>, year <span class="sc">&gt;=</span> <span class="dv">1976</span>, year <span class="sc">&lt;=</span> <span class="dv">2012</span>) <span class="sc">%&gt;%</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year, party_simplified) <span class="sc">%&gt;%</span></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">president_votes =</span> <span class="fu">sum</span>(candidatevotes), <span class="at">.groups =</span> <span class="st">"drop"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">party =</span> party_simplified)</span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a>congressional_party_votes <span class="ot">&lt;-</span> house_data <span class="sc">%&gt;%</span></span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(office <span class="sc">==</span> <span class="st">"US HOUSE"</span>, year <span class="sc">&gt;=</span> <span class="dv">1976</span>, year <span class="sc">&lt;=</span> <span class="dv">2012</span>) <span class="sc">%&gt;%</span></span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year, party) <span class="sc">%&gt;%</span></span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">congress_votes =</span> <span class="fu">sum</span>(candidatevotes), <span class="at">.groups =</span> <span class="st">"drop"</span>)</span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-14"><a href="#cb10-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Combine the datasets</span></span>
<span id="cb10-15"><a href="#cb10-15" aria-hidden="true" tabindex="-1"></a>party_vote_comparison <span class="ot">&lt;-</span> party_votes <span class="sc">%&gt;%</span></span>
<span id="cb10-16"><a href="#cb10-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(congressional_party_votes, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"year"</span>, <span class="st">"party"</span>))</span>
<span id="cb10-17"><a href="#cb10-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-18"><a href="#cb10-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Reshape data to long format</span></span>
<span id="cb10-19"><a href="#cb10-19" aria-hidden="true" tabindex="-1"></a>party_vote_long <span class="ot">&lt;-</span> party_vote_comparison <span class="sc">%&gt;%</span></span>
<span id="cb10-20"><a href="#cb10-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="fu">c</span>(president_votes, congress_votes), </span>
<span id="cb10-21"><a href="#cb10-21" aria-hidden="true" tabindex="-1"></a>               <span class="at">names_to =</span> <span class="st">"vote_type"</span>, </span>
<span id="cb10-22"><a href="#cb10-22" aria-hidden="true" tabindex="-1"></a>               <span class="at">values_to =</span> <span class="st">"votes"</span>)</span>
<span id="cb10-23"><a href="#cb10-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-24"><a href="#cb10-24" aria-hidden="true" tabindex="-1"></a><span class="co"># Plotting stacked area graph by party</span></span>
<span id="cb10-25"><a href="#cb10-25" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(party_vote_long, <span class="fu">aes</span>(<span class="at">x =</span> year, <span class="at">y =</span> votes, <span class="at">fill =</span> party)) <span class="sc">+</span></span>
<span id="cb10-26"><a href="#cb10-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_area</span>(<span class="at">position =</span> <span class="st">"stack"</span>) <span class="sc">+</span></span>
<span id="cb10-27"><a href="#cb10-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span> vote_type) <span class="sc">+</span></span>
<span id="cb10-28"><a href="#cb10-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Votes for Presidential vs. Congressional Candidates by Party (1976 - 2012)"</span>,</span>
<span id="cb10-29"><a href="#cb10-29" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Year"</span>,</span>
<span id="cb10-30"><a href="#cb10-30" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Number of Votes"</span>,</span>
<span id="cb10-31"><a href="#cb10-31" aria-hidden="true" tabindex="-1"></a>       <span class="at">fill =</span> <span class="st">"Party"</span>) <span class="sc">+</span></span>
<span id="cb10-32"><a href="#cb10-32" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb10-33"><a href="#cb10-33" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_brewer</span>(<span class="at">palette =</span> <span class="st">"Set1"</span>) <span class="sc">+</span></span>
<span id="cb10-34"><a href="#cb10-34" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"top"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="mp03_files/figure-html/unnamed-chunk-5-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Additionally, I analyze the total votes by state in presidential and congressional elections from 1976 to 2012. The code aggregates vote totals by year and state for both races, then merges the datasets for comparison. The data is reshaped into a long format for better visualization, and a grouped bar chart is created to display the total votes for presidential and congressional candidates by state. The chart highlights that states with larger populations, such as California and New York, have higher vote totals, with presidential candidates consistently receiving more votes than congressional candidates in these states.</p>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co">#3.3</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Aggregate votes by state for presidential and congressional candidates</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>state_vote_comparison <span class="ot">&lt;-</span> president_data <span class="sc">%&gt;%</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(office <span class="sc">==</span> <span class="st">"US PRESIDENT"</span>, year <span class="sc">&gt;=</span> <span class="dv">1976</span>, year <span class="sc">&lt;=</span> <span class="dv">2012</span>) <span class="sc">%&gt;%</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(state, year) <span class="sc">%&gt;%</span></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">presidential_votes =</span> <span class="fu">sum</span>(candidatevotes), <span class="at">.groups =</span> <span class="st">"drop"</span>)</span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>congressional_state_votes <span class="ot">&lt;-</span> house_data <span class="sc">%&gt;%</span></span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(office <span class="sc">==</span> <span class="st">"US HOUSE"</span>, year <span class="sc">&gt;=</span> <span class="dv">1976</span>, year <span class="sc">&lt;=</span> <span class="dv">2012</span>) <span class="sc">%&gt;%</span></span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(state, year) <span class="sc">%&gt;%</span></span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">congressional_votes =</span> <span class="fu">sum</span>(candidatevotes), <span class="at">.groups =</span> <span class="st">"drop"</span>)</span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Combine the datasets</span></span>
<span id="cb11-14"><a href="#cb11-14" aria-hidden="true" tabindex="-1"></a>state_votes_combined <span class="ot">&lt;-</span> state_vote_comparison <span class="sc">%&gt;%</span></span>
<span id="cb11-15"><a href="#cb11-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(congressional_state_votes, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"state"</span>, <span class="st">"year"</span>))</span>
<span id="cb11-16"><a href="#cb11-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-17"><a href="#cb11-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Reshape data to long format for ggplot</span></span>
<span id="cb11-18"><a href="#cb11-18" aria-hidden="true" tabindex="-1"></a>state_votes_long <span class="ot">&lt;-</span> state_votes_combined <span class="sc">%&gt;%</span></span>
<span id="cb11-19"><a href="#cb11-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="fu">c</span>(presidential_votes, congressional_votes), </span>
<span id="cb11-20"><a href="#cb11-20" aria-hidden="true" tabindex="-1"></a>               <span class="at">names_to =</span> <span class="st">"vote_type"</span>, </span>
<span id="cb11-21"><a href="#cb11-21" aria-hidden="true" tabindex="-1"></a>               <span class="at">values_to =</span> <span class="st">"votes"</span>)</span>
<span id="cb11-22"><a href="#cb11-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-23"><a href="#cb11-23" aria-hidden="true" tabindex="-1"></a><span class="co"># Plotting grouped bar chart for votes by state</span></span>
<span id="cb11-24"><a href="#cb11-24" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(state_votes_long, <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">reorder</span>(state, <span class="sc">-</span>votes), <span class="at">y =</span> votes, <span class="at">fill =</span> vote_type)) <span class="sc">+</span></span>
<span id="cb11-25"><a href="#cb11-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>, <span class="at">position =</span> <span class="st">"dodge"</span>) <span class="sc">+</span></span>
<span id="cb11-26"><a href="#cb11-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Total Votes by State: Presidential vs. Congressional (1976 - 2012)"</span>,</span>
<span id="cb11-27"><a href="#cb11-27" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"State"</span>,</span>
<span id="cb11-28"><a href="#cb11-28" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Total Votes"</span>,</span>
<span id="cb11-29"><a href="#cb11-29" aria-hidden="true" tabindex="-1"></a>       <span class="at">fill =</span> <span class="st">"Vote Type"</span>) <span class="sc">+</span></span>
<span id="cb11-30"><a href="#cb11-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb11-31"><a href="#cb11-31" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>() <span class="sc">+</span> <span class="co"># Flip coordinates for better visibility</span></span>
<span id="cb11-32"><a href="#cb11-32" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"presidential_votes"</span> <span class="ot">=</span> <span class="st">"blue"</span>, <span class="st">"congressional_votes"</span> <span class="ot">=</span> <span class="st">"orange"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="mp03_files/figure-html/unnamed-chunk-6-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="importing-and-plotting-shape-file-data" class="level2">
<h2 class="anchored" data-anchor-id="importing-and-plotting-shape-file-data">Importing and Plotting Shape File Data</h2>
<p>Next, I extract and read shapefiles from zip archives using R’s <code>sf</code> library, which is designed for handling spatial data in visualization and analysis. The code defines two functions: <code>read_ucla_shapefiles</code> and <code>read_census_shapefiles</code>. The first function extracts and reads all <code>.shp</code> files from zip archives in a specified directory, while the second function focuses on specific Census shapefiles based on a list of filenames. Both functions utilize <code>sf::st_read</code> to load the shapefiles and handle any errors, returning a list of successfully read shapefiles for further analysis.</p>
<p>Reading Data I<a href="#fn5" class="footnote-ref" id="fnref5" role="doc-noteref"><sup>5</sup></a></p>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Function to read UCLA shapefiles into R</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>read_ucla_shapefiles <span class="ot">&lt;-</span> <span class="cf">function</span>(directory) {</span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>  shapefiles <span class="ot">&lt;-</span> <span class="fu">list.files</span>(directory, <span class="at">pattern =</span> <span class="st">"</span><span class="sc">\\</span><span class="st">.zip$"</span>, <span class="at">full.names =</span> <span class="cn">TRUE</span>)</span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>  results <span class="ot">&lt;-</span> <span class="fu">list</span>()</span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (zip_file <span class="cf">in</span> shapefiles) {</span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a>    unzip_dir <span class="ot">&lt;-</span> <span class="fu">tempdir</span>()</span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-15"><a href="#cb12-15" aria-hidden="true" tabindex="-1"></a>    <span class="fu">unzip</span>(zip_file, <span class="at">exdir =</span> unzip_dir)</span>
<span id="cb12-16"><a href="#cb12-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-17"><a href="#cb12-17" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb12-18"><a href="#cb12-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-19"><a href="#cb12-19" aria-hidden="true" tabindex="-1"></a>    shp_files <span class="ot">&lt;-</span> <span class="fu">list.files</span>(unzip_dir, <span class="at">pattern =</span> <span class="st">"</span><span class="sc">\\</span><span class="st">.shp$"</span>, <span class="at">full.names =</span> <span class="cn">TRUE</span>, <span class="at">recursive =</span> <span class="cn">TRUE</span>)</span>
<span id="cb12-20"><a href="#cb12-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-21"><a href="#cb12-21" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb12-22"><a href="#cb12-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-23"><a href="#cb12-23" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> (shp_file <span class="cf">in</span> shp_files) {</span>
<span id="cb12-24"><a href="#cb12-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-25"><a href="#cb12-25" aria-hidden="true" tabindex="-1"></a>      <span class="fu">tryCatch</span>({</span>
<span id="cb12-26"><a href="#cb12-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-27"><a href="#cb12-27" aria-hidden="true" tabindex="-1"></a>        sf_object <span class="ot">&lt;-</span> sf<span class="sc">::</span><span class="fu">st_read</span>(shp_file, <span class="at">quiet=</span> <span class="cn">TRUE</span>)</span>
<span id="cb12-28"><a href="#cb12-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-29"><a href="#cb12-29" aria-hidden="true" tabindex="-1"></a>        results[[<span class="fu">basename</span>(shp_file)]] <span class="ot">&lt;-</span> sf_object</span>
<span id="cb12-30"><a href="#cb12-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-31"><a href="#cb12-31" aria-hidden="true" tabindex="-1"></a>      }, <span class="at">error =</span> <span class="cf">function</span>(e) {</span>
<span id="cb12-32"><a href="#cb12-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-33"><a href="#cb12-33" aria-hidden="true" tabindex="-1"></a>        <span class="fu">message</span>(<span class="fu">paste</span>(<span class="st">"Error reading file:"</span>, shp_file, <span class="st">":"</span>, e<span class="sc">$</span>message))</span>
<span id="cb12-34"><a href="#cb12-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-35"><a href="#cb12-35" aria-hidden="true" tabindex="-1"></a>      })</span>
<span id="cb12-36"><a href="#cb12-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-37"><a href="#cb12-37" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb12-38"><a href="#cb12-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-39"><a href="#cb12-39" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb12-40"><a href="#cb12-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-41"><a href="#cb12-41" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb12-42"><a href="#cb12-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-43"><a href="#cb12-43" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(results)</span>
<span id="cb12-44"><a href="#cb12-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-45"><a href="#cb12-45" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb12-46"><a href="#cb12-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-47"><a href="#cb12-47" aria-hidden="true" tabindex="-1"></a> <span class="co"># Define the shapefile directory</span></span>
<span id="cb12-48"><a href="#cb12-48" aria-hidden="true" tabindex="-1"></a>ucla_dir <span class="ot">&lt;-</span> <span class="st">"data/shapefiles"</span></span>
<span id="cb12-49"><a href="#cb12-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-50"><a href="#cb12-50" aria-hidden="true" tabindex="-1"></a><span class="co"># Read the downloaded UCLA shapefiles into R</span></span>
<span id="cb12-51"><a href="#cb12-51" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-52"><a href="#cb12-52" aria-hidden="true" tabindex="-1"></a>ucla_shapefiles <span class="ot">&lt;-</span> <span class="fu">read_ucla_shapefiles</span>(ucla_dir)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Reading data II</p>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Function to read specific Census shapefiles into R</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Function to read specific Census shapefiles into R</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>read_census_shapefiles <span class="ot">&lt;-</span> <span class="cf">function</span>(directory, filenames) {</span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>  shapefiles <span class="ot">&lt;-</span> <span class="fu">list.files</span>(directory, <span class="at">pattern =</span> <span class="st">"</span><span class="sc">\\</span><span class="st">.zip$"</span>, <span class="at">full.names =</span> <span class="cn">TRUE</span>)</span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>  results <span class="ot">&lt;-</span> <span class="fu">list</span>()</span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (zip_file <span class="cf">in</span> shapefiles) {</span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a>    unzip_dir <span class="ot">&lt;-</span> <span class="fu">tempdir</span>()</span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">unzip</span>(zip_file, <span class="at">exdir =</span> unzip_dir)</span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a>    shp_files <span class="ot">&lt;-</span> <span class="fu">list.files</span>(unzip_dir, <span class="at">pattern =</span> <span class="st">"</span><span class="sc">\\</span><span class="st">.shp$"</span>, <span class="at">full.names =</span> <span class="cn">TRUE</span>, <span class="at">recursive =</span> <span class="cn">TRUE</span>)</span>
<span id="cb13-13"><a href="#cb13-13" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb13-14"><a href="#cb13-14" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> (shp_file <span class="cf">in</span> shp_files) {</span>
<span id="cb13-15"><a href="#cb13-15" aria-hidden="true" tabindex="-1"></a>      <span class="co"># Check if the shapefile matches the desired filenames</span></span>
<span id="cb13-16"><a href="#cb13-16" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span> (<span class="fu">basename</span>(shp_file) <span class="sc">%in%</span> filenames) {</span>
<span id="cb13-17"><a href="#cb13-17" aria-hidden="true" tabindex="-1"></a>        <span class="fu">tryCatch</span>({</span>
<span id="cb13-18"><a href="#cb13-18" aria-hidden="true" tabindex="-1"></a>          sf_object <span class="ot">&lt;-</span> sf<span class="sc">::</span><span class="fu">st_read</span>(shp_file, <span class="at">quiet =</span> <span class="cn">TRUE</span>)</span>
<span id="cb13-19"><a href="#cb13-19" aria-hidden="true" tabindex="-1"></a>          results[[<span class="fu">basename</span>(shp_file)]] <span class="ot">&lt;-</span> sf_object</span>
<span id="cb13-20"><a href="#cb13-20" aria-hidden="true" tabindex="-1"></a>        }, <span class="at">error =</span> <span class="cf">function</span>(e) {</span>
<span id="cb13-21"><a href="#cb13-21" aria-hidden="true" tabindex="-1"></a>          <span class="fu">message</span>(<span class="fu">paste</span>(<span class="st">"Error reading file:"</span>, shp_file, <span class="st">":"</span>, e<span class="sc">$</span>message))</span>
<span id="cb13-22"><a href="#cb13-22" aria-hidden="true" tabindex="-1"></a>        })</span>
<span id="cb13-23"><a href="#cb13-23" aria-hidden="true" tabindex="-1"></a>      }</span>
<span id="cb13-24"><a href="#cb13-24" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb13-25"><a href="#cb13-25" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb13-26"><a href="#cb13-26" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb13-27"><a href="#cb13-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(results)</span>
<span id="cb13-28"><a href="#cb13-28" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb13-29"><a href="#cb13-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-30"><a href="#cb13-30" aria-hidden="true" tabindex="-1"></a><span class="co"># List of specific filenames to read</span></span>
<span id="cb13-31"><a href="#cb13-31" aria-hidden="true" tabindex="-1"></a>desired_filenames <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb13-32"><a href="#cb13-32" aria-hidden="true" tabindex="-1"></a>  <span class="st">"tl_2014_us_cd114.shp"</span>,</span>
<span id="cb13-33"><a href="#cb13-33" aria-hidden="true" tabindex="-1"></a>  <span class="st">"tl_2015_us_cd114.shp"</span>,</span>
<span id="cb13-34"><a href="#cb13-34" aria-hidden="true" tabindex="-1"></a>  <span class="st">"tl_2016_us_cd115.shp"</span>,</span>
<span id="cb13-35"><a href="#cb13-35" aria-hidden="true" tabindex="-1"></a>  <span class="st">"tl_2017_us_cd115.shp"</span>,</span>
<span id="cb13-36"><a href="#cb13-36" aria-hidden="true" tabindex="-1"></a>  <span class="st">"tl_2018_us_cd116.shp"</span>,</span>
<span id="cb13-37"><a href="#cb13-37" aria-hidden="true" tabindex="-1"></a>  <span class="st">"tl_2019_us_cd116.shp"</span>,</span>
<span id="cb13-38"><a href="#cb13-38" aria-hidden="true" tabindex="-1"></a>  <span class="st">"tl_2020_us_cd116.shp"</span>,</span>
<span id="cb13-39"><a href="#cb13-39" aria-hidden="true" tabindex="-1"></a>  <span class="st">"tl_2021_us_cd116.shp"</span>,</span>
<span id="cb13-40"><a href="#cb13-40" aria-hidden="true" tabindex="-1"></a>  <span class="st">"tl_2022_us_cd116.shp"</span></span>
<span id="cb13-41"><a href="#cb13-41" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb13-42"><a href="#cb13-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-43"><a href="#cb13-43" aria-hidden="true" tabindex="-1"></a><span class="co"># Define the Census shapefile directory</span></span>
<span id="cb13-44"><a href="#cb13-44" aria-hidden="true" tabindex="-1"></a>census_dir <span class="ot">&lt;-</span> <span class="st">"data/census_shapefiles"</span></span>
<span id="cb13-45"><a href="#cb13-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-46"><a href="#cb13-46" aria-hidden="true" tabindex="-1"></a><span class="co"># Read the downloaded Census shapefiles into R</span></span>
<span id="cb13-47"><a href="#cb13-47" aria-hidden="true" tabindex="-1"></a>census_shapefiles <span class="ot">&lt;-</span> <span class="fu">read_census_shapefiles</span>(census_dir, desired_filenames)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Using the data previously downloaded, here is the choropleth visualization of the 2000 U.S. Presidential Election Electoral College results.</p>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Task5</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Step 1: Prepare Congressional District Data</span></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>CD_106 <span class="ot">&lt;-</span> ucla_shapefiles[[<span class="st">"districts106.shp"</span>]] <span class="sc">%&gt;%</span></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">STATENAME =</span> <span class="fu">tolower</span>(STATENAME)) <span class="sc">%&gt;%</span></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>geometry) <span class="sc">%&gt;%</span></span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as.data.frame</span>() <span class="sc">%&gt;%</span></span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(STATENAME) <span class="sc">%&gt;%</span></span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">EC =</span> <span class="fu">n</span>() <span class="sc">+</span> <span class="dv">2</span>)  <span class="co"># Electoral votes per state (Districts + 2 for Senate)</span></span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Step 2: Get vote results for the year 2000</span></span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a>vote_results_2000 <span class="ot">&lt;-</span> president_data <span class="sc">%&gt;%</span></span>
<span id="cb14-12"><a href="#cb14-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">2000</span>) <span class="sc">%&gt;%</span></span>
<span id="cb14-13"><a href="#cb14-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">state =</span> <span class="fu">tolower</span>(state)) <span class="sc">%&gt;%</span></span>
<span id="cb14-14"><a href="#cb14-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(state) <span class="sc">%&gt;%</span></span>
<span id="cb14-15"><a href="#cb14-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(</span>
<span id="cb14-16"><a href="#cb14-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">winning_party =</span> party_simplified[<span class="fu">which.max</span>(candidatevotes)],</span>
<span id="cb14-17"><a href="#cb14-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">total_votes =</span> <span class="fu">max</span>(totalvotes)</span>
<span id="cb14-18"><a href="#cb14-18" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb14-19"><a href="#cb14-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span>
<span id="cb14-20"><a href="#cb14-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-21"><a href="#cb14-21" aria-hidden="true" tabindex="-1"></a><span class="co"># Step 3: Special case adjustments for Minnesota &amp; Vermont</span></span>
<span id="cb14-22"><a href="#cb14-22" aria-hidden="true" tabindex="-1"></a>vote_results_2000 <span class="ot">&lt;-</span> vote_results_2000 <span class="sc">%&gt;%</span></span>
<span id="cb14-23"><a href="#cb14-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb14-24"><a href="#cb14-24" aria-hidden="true" tabindex="-1"></a>    <span class="at">winning_party =</span> <span class="fu">ifelse</span>(state <span class="sc">==</span> <span class="st">"minnesota"</span> <span class="sc">&amp;</span> winning_party <span class="sc">==</span> <span class="st">"DEMOCRATIC-FARMER-LABOR"</span>, <span class="st">"DEMOCRAT"</span>, winning_party),</span>
<span id="cb14-25"><a href="#cb14-25" aria-hidden="true" tabindex="-1"></a>    <span class="at">winning_party =</span> <span class="fu">ifelse</span>(state <span class="sc">==</span> <span class="st">"vermont"</span>, <span class="st">"DEMOCRAT"</span>, winning_party)</span>
<span id="cb14-26"><a href="#cb14-26" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb14-27"><a href="#cb14-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-28"><a href="#cb14-28" aria-hidden="true" tabindex="-1"></a><span class="co"># Step 4: Combine EC with winning party data</span></span>
<span id="cb14-29"><a href="#cb14-29" aria-hidden="true" tabindex="-1"></a>EC_2000 <span class="ot">&lt;-</span> CD_106 <span class="sc">%&gt;%</span></span>
<span id="cb14-30"><a href="#cb14-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(vote_results_2000, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"STATENAME"</span> <span class="ot">=</span> <span class="st">"state"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb14-31"><a href="#cb14-31" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb14-32"><a href="#cb14-32" aria-hidden="true" tabindex="-1"></a>    <span class="at">winning_party =</span> <span class="fu">if_else</span>(STATENAME <span class="sc">==</span> <span class="st">"district of columbia"</span> <span class="sc">&amp;</span> <span class="fu">is.na</span>(winning_party), <span class="st">"DEMOCRAT"</span>, winning_party)</span>
<span id="cb14-33"><a href="#cb14-33" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb14-34"><a href="#cb14-34" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(STATENAME, winning_party, EC)</span>
<span id="cb14-35"><a href="#cb14-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-36"><a href="#cb14-36" aria-hidden="true" tabindex="-1"></a><span class="co"># Step 5: Rename columns to match `usmap` requirements</span></span>
<span id="cb14-37"><a href="#cb14-37" aria-hidden="true" tabindex="-1"></a>EC_2000 <span class="ot">&lt;-</span> EC_2000 <span class="sc">%&gt;%</span></span>
<span id="cb14-38"><a href="#cb14-38" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">state =</span> STATENAME)</span>
<span id="cb14-39"><a href="#cb14-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-40"><a href="#cb14-40" aria-hidden="true" tabindex="-1"></a><span class="co"># Step 6: Add state abbreviations to the EC_2000 data</span></span>
<span id="cb14-41"><a href="#cb14-41" aria-hidden="true" tabindex="-1"></a>state_abbreviations <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb14-42"><a href="#cb14-42" aria-hidden="true" tabindex="-1"></a>  <span class="at">state =</span> <span class="fu">tolower</span>(<span class="fu">c</span>(<span class="st">"alabama"</span>, <span class="st">"alaska"</span>, <span class="st">"arizona"</span>, <span class="st">"arkansas"</span>, <span class="st">"california"</span>, <span class="st">"colorado"</span>, <span class="st">"connecticut"</span>, <span class="st">"delaware"</span>, <span class="st">"florida"</span>, <span class="st">"georgia"</span>, <span class="st">"hawaii"</span>, <span class="st">"idaho"</span>, <span class="st">"illinois"</span>, <span class="st">"indiana"</span>, <span class="st">"iowa"</span>, <span class="st">"kansas"</span>, <span class="st">"kentucky"</span>, <span class="st">"louisiana"</span>, <span class="st">"maine"</span>, <span class="st">"maryland"</span>, <span class="st">"massachusetts"</span>, <span class="st">"michigan"</span>, <span class="st">"minnesota"</span>, <span class="st">"mississippi"</span>, <span class="st">"missouri"</span>, <span class="st">"montana"</span>, <span class="st">"nebraska"</span>, <span class="st">"nevada"</span>, <span class="st">"new hampshire"</span>, <span class="st">"new jersey"</span>, <span class="st">"new mexico"</span>, <span class="st">"new york"</span>, <span class="st">"north carolina"</span>, <span class="st">"north dakota"</span>, <span class="st">"ohio"</span>, <span class="st">"oklahoma"</span>, <span class="st">"oregon"</span>, <span class="st">"pennsylvania"</span>, <span class="st">"rhode island"</span>, <span class="st">"south carolina"</span>, <span class="st">"south dakota"</span>, <span class="st">"tennessee"</span>, <span class="st">"texas"</span>, <span class="st">"utah"</span>, <span class="st">"vermont"</span>, <span class="st">"virginia"</span>, <span class="st">"washington"</span>, <span class="st">"west virginia"</span>, <span class="st">"wisconsin"</span>, <span class="st">"wyoming"</span>, <span class="st">"district of columbia"</span>)),</span>
<span id="cb14-43"><a href="#cb14-43" aria-hidden="true" tabindex="-1"></a>  <span class="at">abbreviation =</span> <span class="fu">c</span>(<span class="st">"AL"</span>, <span class="st">"AK"</span>, <span class="st">"AZ"</span>, <span class="st">"AR"</span>, <span class="st">"CA"</span>, <span class="st">"CO"</span>, <span class="st">"CT"</span>, <span class="st">"DE"</span>, <span class="st">"FL"</span>, <span class="st">"GA"</span>, <span class="st">"HI"</span>, <span class="st">"ID"</span>, <span class="st">"IL"</span>, <span class="st">"IN"</span>, <span class="st">"IA"</span>, <span class="st">"KS"</span>, <span class="st">"KY"</span>, <span class="st">"LA"</span>, <span class="st">"ME"</span>, <span class="st">"MD"</span>, <span class="st">"MA"</span>, <span class="st">"MI"</span>, <span class="st">"MN"</span>, <span class="st">"MS"</span>, <span class="st">"MO"</span>, <span class="st">"MT"</span>, <span class="st">"NE"</span>, <span class="st">"NV"</span>, <span class="st">"NH"</span>, <span class="st">"NJ"</span>, <span class="st">"NM"</span>, <span class="st">"NY"</span>, <span class="st">"NC"</span>, <span class="st">"ND"</span>, <span class="st">"OH"</span>, <span class="st">"OK"</span>, <span class="st">"OR"</span>, <span class="st">"PA"</span>, <span class="st">"RI"</span>, <span class="st">"SC"</span>, <span class="st">"SD"</span>, <span class="st">"TN"</span>, <span class="st">"TX"</span>, <span class="st">"UT"</span>, <span class="st">"VT"</span>, <span class="st">"VA"</span>, <span class="st">"WA"</span>, <span class="st">"WV"</span>, <span class="st">"WI"</span>, <span class="st">"WY"</span>, <span class="st">"DC"</span>)</span>
<span id="cb14-44"><a href="#cb14-44" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb14-45"><a href="#cb14-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-46"><a href="#cb14-46" aria-hidden="true" tabindex="-1"></a><span class="co"># Step 7: Merge state abbreviations with EC_2000 data</span></span>
<span id="cb14-47"><a href="#cb14-47" aria-hidden="true" tabindex="-1"></a>EC_2000 <span class="ot">&lt;-</span> <span class="fu">left_join</span>(EC_2000, state_abbreviations, <span class="at">by =</span> <span class="st">"state"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb14-48"><a href="#cb14-48" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">Abbreviation =</span> abbreviation)  <span class="co"># Rename 'abbreviation' to 'Abbreviation'</span></span>
<span id="cb14-49"><a href="#cb14-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-50"><a href="#cb14-50" aria-hidden="true" tabindex="-1"></a><span class="co"># Step 8: Get the US map data (this provides state geometries)</span></span>
<span id="cb14-51"><a href="#cb14-51" aria-hidden="true" tabindex="-1"></a>us_states <span class="ot">&lt;-</span> usmap<span class="sc">::</span><span class="fu">us_map</span>(<span class="at">regions =</span> <span class="st">"states"</span>)  <span class="co"># Correct way to get state geometries</span></span>
<span id="cb14-52"><a href="#cb14-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-53"><a href="#cb14-53" aria-hidden="true" tabindex="-1"></a><span class="co"># Step 9: Rename 'abbreviation' to 'abbr' in EC_2000 to match the column name in us_states</span></span>
<span id="cb14-54"><a href="#cb14-54" aria-hidden="true" tabindex="-1"></a>EC_2000 <span class="ot">&lt;-</span> EC_2000 <span class="sc">%&gt;%</span></span>
<span id="cb14-55"><a href="#cb14-55" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">abbr =</span> Abbreviation)</span>
<span id="cb14-56"><a href="#cb14-56" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-57"><a href="#cb14-57" aria-hidden="true" tabindex="-1"></a><span class="co"># Ensure map_data_cleaned is a data frame before joining</span></span>
<span id="cb14-58"><a href="#cb14-58" aria-hidden="true" tabindex="-1"></a>map_data_with_geom <span class="ot">&lt;-</span> EC_2000 <span class="sc">%&gt;%</span></span>
<span id="cb14-59"><a href="#cb14-59" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(us_states, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"abbr"</span> <span class="ot">=</span> <span class="st">"abbr"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb14-60"><a href="#cb14-60" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">everything</span>(), geom)</span>
<span id="cb14-61"><a href="#cb14-61" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-62"><a href="#cb14-62" aria-hidden="true" tabindex="-1"></a><span class="co"># Rename 'geom' to 'geometry' for consistency</span></span>
<span id="cb14-63"><a href="#cb14-63" aria-hidden="true" tabindex="-1"></a>map_data_with_geom <span class="ot">&lt;-</span> map_data_with_geom <span class="sc">%&gt;%</span></span>
<span id="cb14-64"><a href="#cb14-64" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">geometry =</span> geom)</span>
<span id="cb14-65"><a href="#cb14-65" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-66"><a href="#cb14-66" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert to Simple Features (sf) object for plotting</span></span>
<span id="cb14-67"><a href="#cb14-67" aria-hidden="true" tabindex="-1"></a>map_data_with_geom_sf <span class="ot">&lt;-</span> <span class="fu">st_as_sf</span>(map_data_with_geom)</span>
<span id="cb14-68"><a href="#cb14-68" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-69"><a href="#cb14-69" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot using ggplot2</span></span>
<span id="cb14-70"><a href="#cb14-70" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(map_data_with_geom_sf) <span class="sc">+</span></span>
<span id="cb14-71"><a href="#cb14-71" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="fu">aes</span>(<span class="at">fill =</span> winning_party)) <span class="sc">+</span>  <span class="co"># Color states by winning party</span></span>
<span id="cb14-72"><a href="#cb14-72" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"DEMOCRAT"</span> <span class="ot">=</span> <span class="st">"blue"</span>, <span class="st">"REPUBLICAN"</span> <span class="ot">=</span> <span class="st">"red"</span>),</span>
<span id="cb14-73"><a href="#cb14-73" aria-hidden="true" tabindex="-1"></a>                    <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"DEMOCRAT"</span> <span class="ot">=</span> <span class="st">"Gore"</span>, <span class="st">"REPUBLICAN"</span> <span class="ot">=</span> <span class="st">"Bush"</span>),</span>
<span id="cb14-74"><a href="#cb14-74" aria-hidden="true" tabindex="-1"></a>                    <span class="at">name =</span> <span class="st">"Winning Party"</span>) <span class="sc">+</span></span>
<span id="cb14-75"><a href="#cb14-75" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> EC), <span class="at">size =</span> <span class="dv">3</span>, <span class="at">color =</span> <span class="st">"white"</span>) <span class="sc">+</span>  <span class="co"># Add electoral vote labels to states</span></span>
<span id="cb14-76"><a href="#cb14-76" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"2000 Presidential Election Results by State"</span>,</span>
<span id="cb14-77"><a href="#cb14-77" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">"Bush vs. Gore"</span>) <span class="sc">+</span></span>
<span id="cb14-78"><a href="#cb14-78" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()  <span class="co"># Use minimal theme</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="mp03_files/figure-html/unnamed-chunk-9-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>The faceted version showing election results over time is as follows:</p>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Task6</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(usmap)</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tools)</span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(sf)</span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tigris)</span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(gganimate)</span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Modify the function to return data for all years</span></span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a>generate_choropleth_data_for_year <span class="ot">&lt;-</span> <span class="cf">function</span>(year, district_number, president_data, ucla_shapefiles) {</span>
<span id="cb15-12"><a href="#cb15-12" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb15-13"><a href="#cb15-13" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Load the specific district shapefile</span></span>
<span id="cb15-14"><a href="#cb15-14" aria-hidden="true" tabindex="-1"></a>  district_shapefile <span class="ot">&lt;-</span> ucla_shapefiles[[<span class="fu">paste0</span>(<span class="st">"districts"</span>, district_number, <span class="st">".shp"</span>)]]</span>
<span id="cb15-15"><a href="#cb15-15" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb15-16"><a href="#cb15-16" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Create Electoral College votes column based on the district shapefile</span></span>
<span id="cb15-17"><a href="#cb15-17" aria-hidden="true" tabindex="-1"></a>  district_EC <span class="ot">&lt;-</span> district_shapefile <span class="sc">%&gt;%</span></span>
<span id="cb15-18"><a href="#cb15-18" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">STATENAME =</span> <span class="fu">toupper</span>(STATENAME)) <span class="sc">%&gt;%</span></span>
<span id="cb15-19"><a href="#cb15-19" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(<span class="sc">-</span>geometry) <span class="sc">%&gt;%</span></span>
<span id="cb15-20"><a href="#cb15-20" aria-hidden="true" tabindex="-1"></a>    <span class="fu">as.data.frame</span>() <span class="sc">%&gt;%</span></span>
<span id="cb15-21"><a href="#cb15-21" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(STATENAME) <span class="sc">%&gt;%</span></span>
<span id="cb15-22"><a href="#cb15-22" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarize</span>(<span class="at">EC =</span> <span class="fu">n</span>() <span class="sc">+</span> <span class="dv">2</span>)  <span class="co"># 2 for senators per state</span></span>
<span id="cb15-23"><a href="#cb15-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-24"><a href="#cb15-24" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Filter the election data for the given year</span></span>
<span id="cb15-25"><a href="#cb15-25" aria-hidden="true" tabindex="-1"></a>  president_year <span class="ot">&lt;-</span> president_data <span class="sc">%&gt;%</span></span>
<span id="cb15-26"><a href="#cb15-26" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(year <span class="sc">==</span> year) <span class="sc">%&gt;%</span></span>
<span id="cb15-27"><a href="#cb15-27" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(state) <span class="sc">%&gt;%</span></span>
<span id="cb15-28"><a href="#cb15-28" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(</span>
<span id="cb15-29"><a href="#cb15-29" aria-hidden="true" tabindex="-1"></a>      <span class="at">winning_party =</span> party_simplified[<span class="fu">which.max</span>(candidatevotes)]  <span class="co"># Determine the winning party</span></span>
<span id="cb15-30"><a href="#cb15-30" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb15-31"><a href="#cb15-31" aria-hidden="true" tabindex="-1"></a>    <span class="fu">slice_max</span>(candidatevotes, <span class="at">n =</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span>  <span class="co"># Only keep the row with the highest total votes</span></span>
<span id="cb15-32"><a href="#cb15-32" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ungroup</span>()  <span class="co"># Ungroup after summarizing</span></span>
<span id="cb15-33"><a href="#cb15-33" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb15-34"><a href="#cb15-34" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Join the election data with the district data (EC votes and winning party)</span></span>
<span id="cb15-35"><a href="#cb15-35" aria-hidden="true" tabindex="-1"></a>  president_EC <span class="ot">&lt;-</span> district_EC <span class="sc">%&gt;%</span></span>
<span id="cb15-36"><a href="#cb15-36" aria-hidden="true" tabindex="-1"></a>    <span class="fu">left_join</span>(president_year, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"STATENAME"</span> <span class="ot">=</span> <span class="st">"state"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb15-37"><a href="#cb15-37" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(<span class="at">state =</span> STATENAME, EC, winning_party, state_fips)</span>
<span id="cb15-38"><a href="#cb15-38" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb15-39"><a href="#cb15-39" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Load U.S. state shapefiles for mapping</span></span>
<span id="cb15-40"><a href="#cb15-40" aria-hidden="true" tabindex="-1"></a>  us_state_shapefiles <span class="ot">&lt;-</span> usmap<span class="sc">::</span><span class="fu">us_map</span>(<span class="at">regions =</span> <span class="st">"states"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb15-41"><a href="#cb15-41" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">fips =</span> <span class="fu">as.integer</span>(fips))</span>
<span id="cb15-42"><a href="#cb15-42" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb15-43"><a href="#cb15-43" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Merge district data with state shapefiles by FIPS code</span></span>
<span id="cb15-44"><a href="#cb15-44" aria-hidden="true" tabindex="-1"></a>  merged_data <span class="ot">&lt;-</span> president_EC <span class="sc">%&gt;%</span></span>
<span id="cb15-45"><a href="#cb15-45" aria-hidden="true" tabindex="-1"></a>    <span class="fu">left_join</span>(us_state_shapefiles, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"state_fips"</span> <span class="ot">=</span> <span class="st">"fips"</span>))</span>
<span id="cb15-46"><a href="#cb15-46" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb15-47"><a href="#cb15-47" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Add the year column to merge data</span></span>
<span id="cb15-48"><a href="#cb15-48" aria-hidden="true" tabindex="-1"></a>  merged_data<span class="sc">$</span>year <span class="ot">&lt;-</span> year</span>
<span id="cb15-49"><a href="#cb15-49" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb15-50"><a href="#cb15-50" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Return the merged data for all years (instead of a plot)</span></span>
<span id="cb15-51"><a href="#cb15-51" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(merged_data)</span>
<span id="cb15-52"><a href="#cb15-52" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb15-53"><a href="#cb15-53" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-54"><a href="#cb15-54" aria-hidden="true" tabindex="-1"></a><span class="co"># Generate data for all election years</span></span>
<span id="cb15-55"><a href="#cb15-55" aria-hidden="true" tabindex="-1"></a>all_years_data <span class="ot">&lt;-</span> <span class="fu">bind_rows</span>(</span>
<span id="cb15-56"><a href="#cb15-56" aria-hidden="true" tabindex="-1"></a>  <span class="fu">generate_choropleth_data_for_year</span>(<span class="dv">1976</span>, <span class="st">"094"</span>, president_data, ucla_shapefiles),</span>
<span id="cb15-57"><a href="#cb15-57" aria-hidden="true" tabindex="-1"></a>  <span class="fu">generate_choropleth_data_for_year</span>(<span class="dv">1980</span>, <span class="st">"096"</span>, president_data, ucla_shapefiles),</span>
<span id="cb15-58"><a href="#cb15-58" aria-hidden="true" tabindex="-1"></a>  <span class="fu">generate_choropleth_data_for_year</span>(<span class="dv">1984</span>, <span class="st">"098"</span>, president_data, ucla_shapefiles),</span>
<span id="cb15-59"><a href="#cb15-59" aria-hidden="true" tabindex="-1"></a>  <span class="fu">generate_choropleth_data_for_year</span>(<span class="dv">1988</span>, <span class="st">"100"</span>, president_data, ucla_shapefiles),</span>
<span id="cb15-60"><a href="#cb15-60" aria-hidden="true" tabindex="-1"></a>  <span class="fu">generate_choropleth_data_for_year</span>(<span class="dv">1992</span>, <span class="st">"102"</span>, president_data, ucla_shapefiles),</span>
<span id="cb15-61"><a href="#cb15-61" aria-hidden="true" tabindex="-1"></a>  <span class="fu">generate_choropleth_data_for_year</span>(<span class="dv">1996</span>, <span class="st">"104"</span>, president_data, ucla_shapefiles),</span>
<span id="cb15-62"><a href="#cb15-62" aria-hidden="true" tabindex="-1"></a>  <span class="fu">generate_choropleth_data_for_year</span>(<span class="dv">2000</span>, <span class="st">"106"</span>, president_data, ucla_shapefiles),</span>
<span id="cb15-63"><a href="#cb15-63" aria-hidden="true" tabindex="-1"></a>  <span class="fu">generate_choropleth_data_for_year</span>(<span class="dv">2004</span>, <span class="st">"108"</span>, president_data, ucla_shapefiles),</span>
<span id="cb15-64"><a href="#cb15-64" aria-hidden="true" tabindex="-1"></a>  <span class="fu">generate_choropleth_data_for_year</span>(<span class="dv">2008</span>, <span class="st">"110"</span>, president_data, ucla_shapefiles),</span>
<span id="cb15-65"><a href="#cb15-65" aria-hidden="true" tabindex="-1"></a>  <span class="fu">generate_choropleth_data_for_year</span>(<span class="dv">2012</span>, <span class="st">"112"</span>, president_data, ucla_shapefiles)</span>
<span id="cb15-66"><a href="#cb15-66" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb15-67"><a href="#cb15-67" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-68"><a href="#cb15-68" aria-hidden="true" tabindex="-1"></a><span class="co"># facet graph, work on getting in one column</span></span>
<span id="cb15-69"><a href="#cb15-69" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> all_years_data) <span class="sc">+</span></span>
<span id="cb15-70"><a href="#cb15-70" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="fu">aes</span>(<span class="at">fill =</span> winning_party, <span class="at">geometry =</span> geom), <span class="at">color =</span> <span class="st">"white"</span>, <span class="at">size =</span> <span class="fl">2.0</span>) <span class="sc">+</span>  <span class="co"># Color by winning party</span></span>
<span id="cb15-71"><a href="#cb15-71" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"REPUBLICAN"</span> <span class="ot">=</span> <span class="st">"red"</span>, <span class="st">"DEMOCRAT"</span> <span class="ot">=</span> <span class="st">"blue"</span>), </span>
<span id="cb15-72"><a href="#cb15-72" aria-hidden="true" tabindex="-1"></a>                    <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"REPUBLICAN"</span> <span class="ot">=</span> <span class="st">"Republican"</span>, <span class="st">"DEMOCRAT"</span> <span class="ot">=</span> <span class="st">"Democratic"</span>), </span>
<span id="cb15-73"><a href="#cb15-73" aria-hidden="true" tabindex="-1"></a>                    <span class="at">name =</span> <span class="st">"Winning Party"</span>) <span class="sc">+</span>  <span class="co"># Red for Republican, Blue for Democrat</span></span>
<span id="cb15-74"><a href="#cb15-74" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> EC, <span class="at">geometry =</span> geom), <span class="at">color =</span> <span class="st">"black"</span>, <span class="at">size =</span> <span class="dv">3</span>, <span class="at">fontface =</span> <span class="st">"bold"</span>) <span class="sc">+</span>  <span class="co"># Add EC vote labels</span></span>
<span id="cb15-75"><a href="#cb15-75" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb15-76"><a href="#cb15-76" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"2000 Presidential Election: Winning Party by State"</span>) <span class="sc">+</span>  <span class="co"># Removed subtitle</span></span>
<span id="cb15-77"><a href="#cb15-77" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"bottom"</span>, </span>
<span id="cb15-78"><a href="#cb15-78" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>, <span class="at">size =</span> <span class="dv">16</span>)) <span class="sc">+</span></span>
<span id="cb15-79"><a href="#cb15-79" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span> year)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="mp03_files/figure-html/unnamed-chunk-10-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="comparing-the-effects-of-ecv-allocation-rules" class="level2">
<h2 class="anchored" data-anchor-id="comparing-the-effects-of-ecv-allocation-rules">Comparing the Effects of ECV Allocation Rules</h2>
<p>The following code includes different historical voting data and assigns each state’s Electoral College votes (ECVs) according to various strategies:</p>
<section id="task-7---state-wide-winner-take-all" class="level3">
<h3 class="anchored" data-anchor-id="task-7---state-wide-winner-take-all">Task 7 - State-Wide Winner-Take-All</h3>
<p>This strategy and code focuses on filtering U.S. presidential election data between 1976 and 2020, identifying the candidate with the highest vote in each state for each election year. This is done using the dplyr package to group and filter the data based on the maximum vote count per state, followed by summarizing to capture the winner, their party, and the highest votes. The results are displayed in a formatted table using the gt package and a bar chart is created to show the count of each party winning by state across the years.</p>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-fold: true</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-summary: "Show the code"</span></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(DT)</span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Sample 1000 rows or fewer from each table for display</span></span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a>display_sample <span class="ot">&lt;-</span> <span class="cf">function</span>(data, table_name) {</span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a>  sample_data <span class="ot">&lt;-</span> data[<span class="fu">sample</span>(<span class="fu">nrow</span>(data), <span class="fu">min</span>(<span class="dv">1000</span>, <span class="fu">nrow</span>(data))), ]  <span class="co"># Sample 1000 rows or fewer</span></span>
<span id="cb16-11"><a href="#cb16-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">datatable</span>(</span>
<span id="cb16-12"><a href="#cb16-12" aria-hidden="true" tabindex="-1"></a>    sample_data,</span>
<span id="cb16-13"><a href="#cb16-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">options =</span> <span class="fu">list</span>(</span>
<span id="cb16-14"><a href="#cb16-14" aria-hidden="true" tabindex="-1"></a>      <span class="at">pageLength =</span> <span class="dv">10</span>,            <span class="co"># Display 10 rows per page</span></span>
<span id="cb16-15"><a href="#cb16-15" aria-hidden="true" tabindex="-1"></a>      <span class="at">scrollX =</span> <span class="cn">TRUE</span>,             <span class="co"># Enable horizontal scrolling</span></span>
<span id="cb16-16"><a href="#cb16-16" aria-hidden="true" tabindex="-1"></a>      <span class="at">dom =</span> <span class="st">'tip'</span>                 <span class="co"># Only show table, input filter, and pagination</span></span>
<span id="cb16-17"><a href="#cb16-17" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb16-18"><a href="#cb16-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">caption =</span> <span class="fu">paste</span>(<span class="st">"Sample of"</span>, table_name, <span class="st">"(Up to 1000 rows)"</span>)</span>
<span id="cb16-19"><a href="#cb16-19" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb16-20"><a href="#cb16-20" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb16-21"><a href="#cb16-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-22"><a href="#cb16-22" aria-hidden="true" tabindex="-1"></a><span class="co"># Filter data for all presidential election years from 1976 to 2020</span></span>
<span id="cb16-23"><a href="#cb16-23" aria-hidden="true" tabindex="-1"></a>state_winner <span class="ot">&lt;-</span> president_data <span class="sc">%&gt;%</span></span>
<span id="cb16-24"><a href="#cb16-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(office <span class="sc">==</span> <span class="st">"US PRESIDENT"</span>, year <span class="sc">%in%</span> <span class="fu">seq</span>(<span class="dv">1976</span>, <span class="dv">2020</span>, <span class="at">by =</span> <span class="dv">4</span>)) <span class="sc">%&gt;%</span>  <span class="co"># Include all presidential election years</span></span>
<span id="cb16-25"><a href="#cb16-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year, state) <span class="sc">%&gt;%</span></span>
<span id="cb16-26"><a href="#cb16-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(candidatevotes <span class="sc">==</span> <span class="fu">max</span>(candidatevotes, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb16-27"><a href="#cb16-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb16-28"><a href="#cb16-28" aria-hidden="true" tabindex="-1"></a>    <span class="at">winner =</span> <span class="fu">first</span>(candidate),</span>
<span id="cb16-29"><a href="#cb16-29" aria-hidden="true" tabindex="-1"></a>    <span class="at">party =</span> <span class="fu">first</span>(party_simplified),</span>
<span id="cb16-30"><a href="#cb16-30" aria-hidden="true" tabindex="-1"></a>    <span class="at">highest_votes =</span> <span class="fu">max</span>(candidatevotes, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb16-31"><a href="#cb16-31" aria-hidden="true" tabindex="-1"></a>    <span class="at">.groups =</span> <span class="st">"drop"</span></span>
<span id="cb16-32"><a href="#cb16-32" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb16-33"><a href="#cb16-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-34"><a href="#cb16-34" aria-hidden="true" tabindex="-1"></a><span class="co"># Display a sample of the state_winner table</span></span>
<span id="cb16-35"><a href="#cb16-35" aria-hidden="true" tabindex="-1"></a><span class="fu">display_sample</span>(state_winner, <span class="st">"State Winners"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-25f13c1e434f3f9fb5f9" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-25f13c1e434f3f9fb5f9">{"x":{"filter":"none","vertical":false,"caption":"<caption>Sample of State Winners (Up to 1000 rows)<\/caption>","data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59","60","61","62","63","64","65","66","67","68","69","70","71","72","73","74","75","76","77","78","79","80","81","82","83","84","85","86","87","88","89","90","91","92","93","94","95","96","97","98","99","100","101","102","103","104","105","106","107","108","109","110","111","112","113","114","115","116","117","118","119","120","121","122","123","124","125","126","127","128","129","130","131","132","133","134","135","136","137","138","139","140","141","142","143","144","145","146","147","148","149","150","151","152","153","154","155","156","157","158","159","160","161","162","163","164","165","166","167","168","169","170","171","172","173","174","175","176","177","178","179","180","181","182","183","184","185","186","187","188","189","190","191","192","193","194","195","196","197","198","199","200","201","202","203","204","205","206","207","208","209","210","211","212","213","214","215","216","217","218","219","220","221","222","223","224","225","226","227","228","229","230","231","232","233","234","235","236","237","238","239","240","241","242","243","244","245","246","247","248","249","250","251","252","253","254","255","256","257","258","259","260","261","262","263","264","265","266","267","268","269","270","271","272","273","274","275","276","277","278","279","280","281","282","283","284","285","286","287","288","289","290","291","292","293","294","295","296","297","298","299","300","301","302","303","304","305","306","307","308","309","310","311","312","313","314","315","316","317","318","319","320","321","322","323","324","325","326","327","328","329","330","331","332","333","334","335","336","337","338","339","340","341","342","343","344","345","346","347","348","349","350","351","352","353","354","355","356","357","358","359","360","361","362","363","364","365","366","367","368","369","370","371","372","373","374","375","376","377","378","379","380","381","382","383","384","385","386","387","388","389","390","391","392","393","394","395","396","397","398","399","400","401","402","403","404","405","406","407","408","409","410","411","412","413","414","415","416","417","418","419","420","421","422","423","424","425","426","427","428","429","430","431","432","433","434","435","436","437","438","439","440","441","442","443","444","445","446","447","448","449","450","451","452","453","454","455","456","457","458","459","460","461","462","463","464","465","466","467","468","469","470","471","472","473","474","475","476","477","478","479","480","481","482","483","484","485","486","487","488","489","490","491","492","493","494","495","496","497","498","499","500","501","502","503","504","505","506","507","508","509","510","511","512","513","514","515","516","517","518","519","520","521","522","523","524","525","526","527","528","529","530","531","532","533","534","535","536","537","538","539","540","541","542","543","544","545","546","547","548","549","550","551","552","553","554","555","556","557","558","559","560","561","562","563","564","565","566","567","568","569","570","571","572","573","574","575","576","577","578","579","580","581","582","583","584","585","586","587","588","589","590","591","592","593","594","595","596","597","598","599","600","601","602","603","604","605","606","607","608","609","610","611","612"],[1980,1980,2004,1996,1988,2020,1984,1988,1992,1980,2004,2000,2020,2004,1996,2016,1984,1976,1984,2020,2016,1976,1996,2016,2020,2004,1976,1988,2020,1976,2004,1996,2004,1980,1992,2004,1984,1980,1976,1988,2000,1980,1996,2020,1988,1976,1976,2000,1984,1980,2020,2000,1976,2012,1976,1992,2004,1980,2012,2008,2020,1992,1980,2012,2000,1992,2012,1984,2000,2004,1992,2016,1984,2012,2016,2020,1996,2012,1988,1984,2016,1984,1996,2004,2008,1992,1988,2020,1988,2020,2020,2016,1980,2008,1992,1992,2012,1992,2008,1980,1976,2000,1992,2012,1996,1996,1980,2012,2012,2000,1988,2012,2004,1976,2016,1996,2020,1984,1984,1976,2012,1976,1984,2000,1992,1992,2012,1976,2016,2000,2000,1980,2000,2000,2004,1996,1988,1992,1988,1980,1984,2008,2016,2020,1980,2000,1984,2008,1976,1996,2000,2012,1976,1988,2000,1984,2004,1976,2020,1984,2004,2004,2004,2016,1984,1980,1988,1976,1988,1980,2016,2020,2016,2020,2000,1988,2000,1984,1984,1980,2020,1984,1996,2004,2012,2008,1992,2004,1980,2004,1980,2012,1996,2016,2012,2008,2020,1980,1980,1984,2004,2020,2008,1988,2016,2020,2008,1984,2012,1992,2004,1996,2016,1984,1980,1984,2016,2012,1980,2004,2016,1980,2016,1996,1988,2008,1976,1976,2016,2020,1996,1984,2004,2012,1988,2016,2000,2008,2004,1996,2020,2000,1988,2008,2012,1980,1988,2012,2008,2008,2000,2008,2012,1988,1984,2008,2008,1992,2004,2012,1992,1988,2016,2004,2020,1996,1980,2020,2000,2012,2016,2000,2008,1976,1984,2016,2012,2004,2004,1980,1984,1984,2004,1976,1996,1988,2020,1992,1996,1996,2008,1976,2020,2008,1988,2020,1976,2000,2004,1988,2008,1984,1980,1992,2004,2012,1996,1992,1992,2000,2016,1984,2008,1988,2004,1992,1988,1976,1996,2020,2012,1980,1992,2020,2012,1980,1976,2020,2008,2000,2004,1988,1984,1976,2000,1988,1980,1992,1988,1992,1984,1976,1984,1984,1992,2012,2000,2016,2004,1996,2000,2012,1976,2000,1996,1984,1996,2008,2008,1980,2008,2000,1992,2020,2000,1992,1980,1984,1984,1996,1996,2012,2008,1992,1984,1996,2020,1976,2000,2000,1976,2008,1976,2016,1992,2016,1976,1976,2020,2004,1992,2016,2004,1976,1984,2016,2012,2016,2020,1980,2012,2020,2004,1988,1992,1988,2004,1980,1984,2000,1992,2020,2012,1984,1992,1996,1984,2016,1996,2012,2016,2020,1988,2016,2012,2004,1996,2008,2008,1996,1988,2012,2004,1996,1988,2016,1996,2008,1980,2008,1992,2000,1988,2020,2008,2008,1996,1984,2016,2004,1992,2012,2012,1976,2012,1988,2008,2008,2020,2004,1988,1976,1992,1984,2008,1988,1976,2008,2000,2000,1996,1988,1996,1976,1984,2008,2016,2000,1976,2012,2020,1980,2012,1992,2000,1976,1992,2008,2016,2020,2020,2008,1996,2016,2008,2012,1992,1980,1988,2016,1984,2004,2008,1988,1988,1976,2020,2000,1996,2008,1988,1976,2008,1980,2016,2016,2012,1992,2016,2012,1996,2004,2020,2004,2008,2020,1992,1996,2004,1976,1984,1992,1992,1988,2012,1976,1996,2004,1988,1992,2000,1980,2004,2000,2000,2000,2020,2016,1976,1980,1980,2012,1988,1980,2004,1984,2008,1980,1980,2016,2016,2012,2000,1992,2020,2016,2004,2008,1980,1996,1996,1996,1980,1984,1988,1980,2020,1984,1976,1976,1992,2000,2000,2000,2016,2000,1988,2008,2012,2020,1992,1996,1992,1996,1976,2016,2000,1980,2008,1976,1980,1996,1996,2020,1988,2016,1992,2016,2004,1988,2012,1976],["OKLAHOMA","IOWA","KANSAS","KANSAS","SOUTH DAKOTA","WYOMING","VERMONT","ILLINOIS","MISSISSIPPI","NEW MEXICO","HAWAII","KENTUCKY","SOUTH DAKOTA","TEXAS","MISSISSIPPI","MISSISSIPPI","IDAHO","MISSOURI","ARKANSAS","KANSAS","FLORIDA","IOWA","NEBRASKA","ARIZONA","NEW HAMPSHIRE","WEST VIRGINIA","NEW HAMPSHIRE","INDIANA","MINNESOTA","KANSAS","DISTRICT OF COLUMBIA","ARIZONA","DELAWARE","LOUISIANA","IOWA","NEW MEXICO","MARYLAND","WISCONSIN","NEBRASKA","CALIFORNIA","CALIFORNIA","MICHIGAN","NEW MEXICO","MASSACHUSETTS","OHIO","LOUISIANA","INDIANA","OREGON","NEBRASKA","GEORGIA","HAWAII","GEORGIA","PENNSYLVANIA","FLORIDA","WASHINGTON","FLORIDA","NEW YORK","NORTH CAROLINA","NORTH DAKOTA","SOUTH DAKOTA","WASHINGTON","VERMONT","NEBRASKA","MISSISSIPPI","WYOMING","PENNSYLVANIA","OHIO","WYOMING","HAWAII","NEW HAMPSHIRE","INDIANA","NEW JERSEY","UTAH","NEW JERSEY","UTAH","IOWA","ALABAMA","NEW MEXICO","KENTUCKY","ALABAMA","MISSOURI","CALIFORNIA","NEW YORK","MASSACHUSETTS","KANSAS","WYOMING","NEVADA","MARYLAND","NEW MEXICO","WISCONSIN","DELAWARE","ARKANSAS","WYOMING","LOUISIANA","NORTH DAKOTA","WEST VIRGINIA","MISSOURI","NORTH CAROLINA","NEW HAMPSHIRE","MISSISSIPPI","TENNESSEE","COLORADO","LOUISIANA","WYOMING","IDAHO","OREGON","NEW JERSEY","NEVADA","SOUTH DAKOTA","KANSAS","DISTRICT OF COLUMBIA","LOUISIANA","MICHIGAN","MAINE","KANSAS","KENTUCKY","COLORADO","PENNSYLVANIA","NEW MEXICO","MASSACHUSETTS","ALASKA","ILLINOIS","IOWA","SOUTH DAKOTA","MINNESOTA","MISSOURI","VERMONT","COLORADO","DELAWARE","LOUISIANA","TEXAS","CALIFORNIA","TENNESSEE","MISSOURI","OREGON","WISCONSIN","WASHINGTON","ARKANSAS","MAINE","MASSACHUSETTS","WEST VIRGINIA","IDAHO","NEVADA","ILLINOIS","TENNESSEE","ARIZONA","OKLAHOMA","CONNECTICUT","FLORIDA","WEST VIRGINIA","NEW YORK","NEBRASKA","UTAH","UTAH","IOWA","MASSACHUSETTS","NEVADA","MISSISSIPPI","UTAH","DELAWARE","MARYLAND","UTAH","SOUTH CAROLINA","OREGON","ALASKA","WEST VIRGINIA","PENNSYLVANIA","NEW MEXICO","GEORGIA","HAWAII","CONNECTICUT","NORTH DAKOTA","IDAHO","OKLAHOMA","VERMONT","MISSISSIPPI","NEW HAMPSHIRE","NEW YORK","LOUISIANA","NEVADA","NEW MEXICO","COLORADO","VIRGINIA","INDIANA","MICHIGAN","CALIFORNIA","WISCONSIN","NEW JERSEY","OREGON","GEORGIA","TEXAS","KENTUCKY","CONNECTICUT","GEORGIA","MINNESOTA","NORTH DAKOTA","VERMONT","OHIO","ARIZONA","MISSOURI","MISSOURI","IDAHO","MICHIGAN","WISCONSIN","DISTRICT OF COLUMBIA","CONNECTICUT","ARKANSAS","NORTH DAKOTA","NEW YORK","WASHINGTON","CONNECTICUT","HAWAII","MICHIGAN","CONNECTICUT","NORTH DAKOTA","SOUTH CAROLINA","IOWA","ILLINOIS","MAINE","ALABAMA","NEW MEXICO","WASHINGTON","NEW HAMPSHIRE","ALASKA","WEST VIRGINIA","DELAWARE","RHODE ISLAND","CALIFORNIA","ILLINOIS","KENTUCKY","MONTANA","TEXAS","WYOMING","MONTANA","TENNESSEE","ALABAMA","VIRGINIA","OKLAHOMA","VERMONT","FLORIDA","ALABAMA","WISCONSIN","OKLAHOMA","WISCONSIN","GEORGIA","VIRGINIA","LOUISIANA","DELAWARE","HAWAII","RHODE ISLAND","ALABAMA","DISTRICT OF COLUMBIA","OREGON","MINNESOTA","ARIZONA","ALASKA","ALABAMA","MASSACHUSETTS","NORTH DAKOTA","WEST VIRGINIA","OKLAHOMA","OREGON","ALASKA","NEBRASKA","MICHIGAN","MINNESOTA","KANSAS","GEORGIA","ALASKA","IOWA","MARYLAND","DISTRICT OF COLUMBIA","NORTH CAROLINA","ARKANSAS","TENNESSEE","MINNESOTA","TEXAS","OHIO","LOUISIANA","COLORADO","MISSISSIPPI","KENTUCKY","IOWA","MICHIGAN","INDIANA","CONNECTICUT","OREGON","NEW HAMPSHIRE","SOUTH CAROLINA","NORTH CAROLINA","NEVADA","NEW JERSEY","INDIANA","WEST VIRGINIA","NEW YORK","RHODE ISLAND","WEST VIRGINIA","INDIANA","OKLAHOMA","MISSOURI","MONTANA","MINNESOTA","MISSOURI","KANSAS","MINNESOTA","TENNESSEE","SOUTH DAKOTA","UTAH","TEXAS","DELAWARE","NORTH DAKOTA","NEW JERSEY","MARYLAND","ARIZONA","IDAHO","CONNECTICUT","IOWA","IDAHO","DELAWARE","PENNSYLVANIA","COLORADO","SOUTH DAKOTA","ARIZONA","NEVADA","NEW HAMPSHIRE","ILLINOIS","KENTUCKY","CALIFORNIA","NEW JERSEY","SOUTH CAROLINA","VIRGINIA","WYOMING","FLORIDA","VIRGINIA","IDAHO","NORTH DAKOTA","ALABAMA","MAINE","RHODE ISLAND","ILLINOIS","KANSAS","SOUTH CAROLINA","SOUTH DAKOTA","NORTH CAROLINA","TENNESSEE","CALIFORNIA","ARKANSAS","COLORADO","ARKANSAS","IOWA","OKLAHOMA","CONNECTICUT","NORTH CAROLINA","NORTH CAROLINA","PENNSYLVANIA","WASHINGTON","WASHINGTON","NEW MEXICO","WYOMING","NEW HAMPSHIRE","PENNSYLVANIA","MAINE","NEVADA","ARIZONA","NORTH DAKOTA","IDAHO","MARYLAND","HAWAII","DISTRICT OF COLUMBIA","TEXAS","VERMONT","INDIANA","SOUTH CAROLINA","VIRGINIA","MAINE","LOUISIANA","ARKANSAS","NEW YORK","NEBRASKA","PENNSYLVANIA","CONNECTICUT","GEORGIA","WYOMING","INDIANA","HAWAII","WYOMING","NEVADA","NORTH DAKOTA","WEST VIRGINIA","PENNSYLVANIA","ALASKA","VERMONT","KENTUCKY","GEORGIA","INDIANA","LOUISIANA","MAINE","OKLAHOMA","NEBRASKA","DISTRICT OF COLUMBIA","RHODE ISLAND","DISTRICT OF COLUMBIA","CALIFORNIA","MARYLAND","NEBRASKA","HAWAII","WISCONSIN","SOUTH CAROLINA","VIRGINIA","FLORIDA","NEW YORK","NEW YORK","WASHINGTON","NEVADA","NEW MEXICO","NEVADA","NEW HAMPSHIRE","WISCONSIN","MARYLAND","WISCONSIN","HAWAII","TENNESSEE","COLORADO","RHODE ISLAND","PENNSYLVANIA","MAINE","GEORGIA","VIRGINIA","ARIZONA","NEW HAMPSHIRE","TEXAS","IDAHO","ARIZONA","COLORADO","NORTH CAROLINA","NEW YORK","OKLAHOMA","MAINE","NEW YORK","MISSISSIPPI","GEORGIA","NEW MEXICO","MONTANA","NORTH CAROLINA","TEXAS","KENTUCKY","ILLINOIS","WISCONSIN","NEBRASKA","COLORADO","MICHIGAN","HAWAII","MASSACHUSETTS","MONTANA","VIRGINIA","ALABAMA","MASSACHUSETTS","UTAH","LOUISIANA","RHODE ISLAND","DELAWARE","ARIZONA","OREGON","MONTANA","OHIO","FLORIDA","DELAWARE","IOWA","MINNESOTA","MISSISSIPPI","ARKANSAS","VIRGINIA","OHIO","VERMONT","RHODE ISLAND","FLORIDA","WEST VIRGINIA","NEW JERSEY","WISCONSIN","ARKANSAS","MISSOURI","IDAHO","ARIZONA","RHODE ISLAND","CONNECTICUT","MINNESOTA","NEW JERSEY","TENNESSEE","SOUTH DAKOTA","NEW JERSEY","OHIO","MISSOURI","NORTH DAKOTA","OHIO","MINNESOTA","NORTH CAROLINA","KENTUCKY","ARKANSAS","NEW HAMPSHIRE","TENNESSEE","MICHIGAN","TENNESSEE","INDIANA","VERMONT","NEBRASKA","ALASKA","SOUTH CAROLINA","OHIO","MASSACHUSETTS","WASHINGTON","KANSAS","SOUTH DAKOTA","NEW YORK","UTAH","SOUTH CAROLINA","CALIFORNIA","UTAH","DISTRICT OF COLUMBIA","WASHINGTON","OKLAHOMA","DISTRICT OF COLUMBIA","NORTH CAROLINA","MISSISSIPPI","MONTANA","NEBRASKA","VIRGINIA","MARYLAND","NEW JERSEY","MISSISSIPPI","OREGON","ILLINOIS","SOUTH CAROLINA","CALIFORNIA","IDAHO","DISTRICT OF COLUMBIA","HAWAII","TENNESSEE","WASHINGTON","MASSACHUSETTS","DELAWARE","MICHIGAN","VERMONT","ILLINOIS","ILLINOIS","MASSACHUSETTS","UTAH","TEXAS","TEXAS","OKLAHOMA","RHODE ISLAND","FLORIDA","SOUTH CAROLINA","SOUTH CAROLINA","CONNECTICUT","FLORIDA","OREGON","VERMONT","DELAWARE","PENNSYLVANIA","PENNSYLVANIA","MAINE","MARYLAND","NEVADA","OHIO","MAINE","MONTANA","SOUTH DAKOTA","OREGON","MINNESOTA","MAINE","RHODE ISLAND","MISSOURI","KENTUCKY","OHIO","ALASKA","ALASKA","MONTANA","GEORGIA","MARYLAND","ALABAMA","ALABAMA","RHODE ISLAND","MARYLAND","MONTANA","KENTUCKY","WEST VIRGINIA","NEW JERSEY","ILLINOIS","KANSAS","ALASKA","MONTANA","WYOMING","SOUTH DAKOTA","UTAH","TEXAS","VIRGINIA","WASHINGTON","MONTANA","COLORADO","OHIO","INDIANA","MICHIGAN","CALIFORNIA","FLORIDA","MICHIGAN","NORTH CAROLINA","COLORADO","MASSACHUSETTS","ALASKA","ARKANSAS","ALABAMA","DISTRICT OF COLUMBIA"],["REAGAN, RONALD","REAGAN, RONALD","BUSH, GEORGE W.","DOLE, ROBERT","BUSH, GEORGE H.W.","TRUMP, DONALD J.","REAGAN, RONALD","BUSH, GEORGE H.W.","BUSH, GEORGE H.W.","REAGAN, RONALD","KERRY, JOHN","BUSH, GEORGE W.","TRUMP, DONALD J.","BUSH, GEORGE W.","DOLE, ROBERT","TRUMP, DONALD J.","REAGAN, RONALD","CARTER, JIMMY","REAGAN, RONALD","TRUMP, DONALD J.","TRUMP, DONALD J.","FORD, GERALD","DOLE, ROBERT","TRUMP, DONALD J.","BIDEN, JOSEPH R. JR","BUSH, GEORGE W.","FORD, GERALD","BUSH, GEORGE H.W.","BIDEN, JOSEPH R. JR","FORD, GERALD","KERRY, JOHN","CLINTON, BILL","KERRY, JOHN","REAGAN, RONALD","CLINTON, BILL","BUSH, GEORGE W.","REAGAN, RONALD","REAGAN, RONALD","FORD, GERALD","BUSH, GEORGE H.W.","GORE, AL","REAGAN, RONALD","CLINTON, BILL","BIDEN, JOSEPH R. JR","BUSH, GEORGE H.W.","CARTER, JIMMY","FORD, GERALD","GORE, AL","REAGAN, RONALD","CARTER, JIMMY","BIDEN, JOSEPH R. JR","BUSH, GEORGE W.","CARTER, JIMMY","OBAMA, BARACK H.","FORD, GERALD","BUSH, GEORGE H.W.","KERRY, JOHN","REAGAN, RONALD","ROMNEY, MITT","MCCAIN, JOHN","BIDEN, JOSEPH R. JR","CLINTON, BILL","REAGAN, RONALD","ROMNEY, MITT","BUSH, GEORGE W.","CLINTON, BILL","OBAMA, BARACK H.","REAGAN, RONALD","GORE, AL","KERRY, JOHN","BUSH, GEORGE H.W.","CLINTON, HILLARY","REAGAN, RONALD","OBAMA, BARACK H.","TRUMP, DONALD J.","TRUMP, DONALD J.","DOLE, ROBERT","OBAMA, BARACK H.","BUSH, GEORGE H.W.","REAGAN, RONALD","TRUMP, DONALD J.","REAGAN, RONALD","CLINTON, BILL","KERRY, JOHN","MCCAIN, JOHN","BUSH, GEORGE H.W.","BUSH, GEORGE H.W.","BIDEN, JOSEPH R. JR","BUSH, GEORGE H.W.","BIDEN, JOSEPH R. JR","BIDEN, JOSEPH R. JR","TRUMP, DONALD J.","REAGAN, RONALD","MCCAIN, JOHN","BUSH, GEORGE H.W.","CLINTON, BILL","ROMNEY, MITT","BUSH, GEORGE H.W.","OBAMA, BARACK H.","REAGAN, RONALD","CARTER, JIMMY","BUSH, GEORGE W.","CLINTON, BILL","ROMNEY, MITT","DOLE, ROBERT","CLINTON, BILL","REAGAN, RONALD","OBAMA, BARACK H.","ROMNEY, MITT","BUSH, GEORGE W.","DUKAKIS, MICHAEL","ROMNEY, MITT","KERRY, JOHN","FORD, GERALD","TRUMP, DONALD J.","CLINTON, BILL","BIDEN, JOSEPH R. JR","REAGAN, RONALD","REAGAN, RONALD","CARTER, JIMMY","ROMNEY, MITT","FORD, GERALD","REAGAN, RONALD","BUSH, GEORGE W.","CLINTON, BILL","CLINTON, BILL","OBAMA, BARACK H.","FORD, GERALD","CLINTON, HILLARY","BUSH, GEORGE W.","BUSH, GEORGE W.","REAGAN, RONALD","BUSH, GEORGE W.","BUSH, GEORGE W.","KERRY, JOHN","CLINTON, BILL","DUKAKIS, MICHAEL","CLINTON, BILL","BUSH, GEORGE H.W.","REAGAN, RONALD","REAGAN, RONALD","MCCAIN, JOHN","CLINTON, HILLARY","BIDEN, JOSEPH R. JR","REAGAN, RONALD","BUSH, GEORGE W.","REAGAN, RONALD","OBAMA, BARACK H.","CARTER, JIMMY","CLINTON, BILL","GORE, AL","ROMNEY, MITT","FORD, GERALD","BUSH, GEORGE H.W.","GORE, AL","REAGAN, RONALD","BUSH, GEORGE W.","CARTER, JIMMY","TRUMP, DONALD J.","REAGAN, RONALD","KERRY, JOHN","BUSH, GEORGE W.","BUSH, GEORGE W.","CLINTON, HILLARY","REAGAN, RONALD","CARTER, JIMMY","BUSH, GEORGE H.W.","FORD, GERALD","BUSH, GEORGE H.W.","CARTER, JIMMY","CLINTON, HILLARY","TRUMP, DONALD J.","TRUMP, DONALD J.","TRUMP, DONALD J.","GORE, AL","BUSH, GEORGE H.W.","BUSH, GEORGE W.","REAGAN, RONALD","REAGAN, RONALD","REAGAN, RONALD","BIDEN, JOSEPH R. JR","REAGAN, RONALD","DOLE, ROBERT","BUSH, GEORGE W.","OBAMA, BARACK H.","OBAMA, BARACK H.","CLINTON, BILL","KERRY, JOHN","REAGAN, RONALD","BUSH, GEORGE W.","REAGAN, RONALD","ROMNEY, MITT","CLINTON, BILL","TRUMP, DONALD J.","OBAMA, BARACK H.","MCCAIN, JOHN","BIDEN, JOSEPH R. JR","REAGAN, RONALD","REAGAN, RONALD","REAGAN, RONALD","BUSH, GEORGE W.","TRUMP, DONALD J.","OBAMA, BARACK H.","DUKAKIS, MICHAEL","CLINTON, HILLARY","BIDEN, JOSEPH R. JR","MCCAIN, JOHN","REAGAN, RONALD","OBAMA, BARACK H.","CLINTON, BILL","KERRY, JOHN","CLINTON, BILL","TRUMP, DONALD J.","REAGAN, RONALD","REAGAN, RONALD","REAGAN, RONALD","TRUMP, DONALD J.","OBAMA, BARACK H.","REAGAN, RONALD","BUSH, GEORGE W.","CLINTON, HILLARY","REAGAN, RONALD","CLINTON, HILLARY","DOLE, ROBERT","DUKAKIS, MICHAEL","OBAMA, BARACK H.","CARTER, JIMMY","FORD, GERALD","CLINTON, HILLARY","TRUMP, DONALD J.","DOLE, ROBERT","REAGAN, RONALD","BUSH, GEORGE W.","ROMNEY, MITT","BUSH, GEORGE H.W.","TRUMP, DONALD J.","BUSH, GEORGE W.","MCCAIN, JOHN","KERRY, JOHN","CLINTON, BILL","TRUMP, DONALD J.","GORE, AL","BUSH, GEORGE H.W.","OBAMA, BARACK H.","ROMNEY, MITT","REAGAN, RONALD","BUSH, GEORGE H.W.","OBAMA, BARACK H.","OBAMA, BARACK H.","OBAMA, BARACK H.","BUSH, GEORGE W.","OBAMA, BARACK H.","OBAMA, BARACK H.","DUKAKIS, MICHAEL","REAGAN, RONALD","MCCAIN, JOHN","MCCAIN, JOHN","CLINTON, BILL","BUSH, GEORGE W.","ROMNEY, MITT","BUSH, GEORGE H.W.","DUKAKIS, MICHAEL","TRUMP, DONALD J.","BUSH, GEORGE W.","BIDEN, JOSEPH R. JR","CLINTON, BILL","REAGAN, RONALD","BIDEN, JOSEPH R. JR","BUSH, GEORGE W.","OBAMA, BARACK H.","CLINTON, HILLARY","GORE, AL","OBAMA, BARACK H.","CARTER, JIMMY","REAGAN, RONALD","CLINTON, HILLARY","ROMNEY, MITT","BUSH, GEORGE W.","BUSH, GEORGE W.","REAGAN, RONALD","REAGAN, RONALD","REAGAN, RONALD","BUSH, GEORGE W.","FORD, GERALD","DOLE, ROBERT","BUSH, GEORGE H.W.","BIDEN, JOSEPH R. JR","CLINTON, BILL","DOLE, ROBERT","DOLE, ROBERT","OBAMA, BARACK H.","FORD, GERALD","TRUMP, DONALD J.","MCCAIN, JOHN","DUKAKIS, MICHAEL","BIDEN, JOSEPH R. JR","CARTER, JIMMY","BUSH, GEORGE W.","BUSH, GEORGE W.","BUSH, GEORGE H.W.","MCCAIN, JOHN","MONDALE, WALTER","REAGAN, RONALD","BUSH, GEORGE H.W.","KERRY, JOHN","ROMNEY, MITT","DOLE, ROBERT","BUSH, GEORGE H.W.","BUSH, GEORGE H.W.","GORE, AL","TRUMP, DONALD J.","REAGAN, RONALD","OBAMA, BARACK H.","BUSH, GEORGE H.W.","BUSH, GEORGE W.","CLINTON, BILL","DUKAKIS, MICHAEL","FORD, GERALD","CLINTON, BILL","BIDEN, JOSEPH R. JR","OBAMA, BARACK H.","REAGAN, RONALD","BUSH, GEORGE H.W.","BIDEN, JOSEPH R. JR","OBAMA, BARACK H.","REAGAN, RONALD","CARTER, JIMMY","BIDEN, JOSEPH R. JR","OBAMA, BARACK H.","BUSH, GEORGE W.","BUSH, GEORGE W.","BUSH, GEORGE H.W.","REAGAN, RONALD","FORD, GERALD","BUSH, GEORGE W.","BUSH, GEORGE H.W.","REAGAN, RONALD","CLINTON, BILL","DUKAKIS, MICHAEL","CLINTON, BILL","REAGAN, RONALD","CARTER, JIMMY","REAGAN, RONALD","REAGAN, RONALD","CLINTON, BILL","OBAMA, BARACK H.","BUSH, GEORGE W.","CLINTON, HILLARY","BUSH, GEORGE W.","CLINTON, BILL","BUSH, GEORGE W.","OBAMA, BARACK H.","CARTER, JIMMY","BUSH, GEORGE W.","CLINTON, BILL","REAGAN, RONALD","CLINTON, BILL","OBAMA, BARACK H.","MCCAIN, JOHN","REAGAN, RONALD","OBAMA, BARACK H.","GORE, AL","CLINTON, BILL","BIDEN, JOSEPH R. JR","BUSH, GEORGE W.","BUSH, GEORGE H.W.","CARTER, JIMMY","REAGAN, RONALD","MONDALE, WALTER","DOLE, ROBERT","CLINTON, BILL","ROMNEY, MITT","MCCAIN, JOHN","BUSH, GEORGE H.W.","REAGAN, RONALD","CLINTON, BILL","TRUMP, DONALD J.","CARTER, JIMMY","BUSH, GEORGE W.","GORE, AL","FORD, GERALD","MCCAIN, JOHN","FORD, GERALD","TRUMP, DONALD J.","CLINTON, BILL","TRUMP, DONALD J.","FORD, GERALD","FORD, GERALD","TRUMP, DONALD J.","KERRY, JOHN","BUSH, GEORGE H.W.","CLINTON, HILLARY","BUSH, GEORGE W.","CARTER, JIMMY","REAGAN, RONALD","TRUMP, DONALD J.","OBAMA, BARACK H.","TRUMP, DONALD J.","TRUMP, DONALD J.","CARTER, JIMMY","OBAMA, BARACK H.","BIDEN, JOSEPH R. JR","KERRY, JOHN","BUSH, GEORGE H.W.","BUSH, GEORGE H.W.","DUKAKIS, MICHAEL","KERRY, JOHN","REAGAN, RONALD","REAGAN, RONALD","BUSH, GEORGE W.","CLINTON, BILL","BIDEN, JOSEPH R. JR","OBAMA, BARACK H.","REAGAN, RONALD","CLINTON, BILL","CLINTON, BILL","REAGAN, RONALD","TRUMP, DONALD J.","CLINTON, BILL","OBAMA, BARACK H.","CLINTON, HILLARY","TRUMP, DONALD J.","BUSH, GEORGE H.W.","CLINTON, HILLARY","OBAMA, BARACK H.","KERRY, JOHN","DOLE, ROBERT","OBAMA, BARACK H.","MCCAIN, JOHN","CLINTON, BILL","BUSH, GEORGE H.W.","ROMNEY, MITT","BUSH, GEORGE W.","DOLE, ROBERT","BUSH, GEORGE H.W.","CLINTON, HILLARY","DOLE, ROBERT","OBAMA, BARACK H.","CARTER, JIMMY","MCCAIN, JOHN","CLINTON, BILL","GORE, AL","BUSH, GEORGE H.W.","TRUMP, DONALD J.","MCCAIN, JOHN","MCCAIN, JOHN","CLINTON, BILL","REAGAN, RONALD","TRUMP, DONALD J.","BUSH, GEORGE W.","CLINTON, BILL","OBAMA, BARACK H.","OBAMA, BARACK H.","FORD, GERALD","OBAMA, BARACK H.","BUSH, GEORGE H.W.","OBAMA, BARACK H.","MCCAIN, JOHN","TRUMP, DONALD J.","KERRY, JOHN","BUSH, GEORGE H.W.","FORD, GERALD","CLINTON, BILL","REAGAN, RONALD","OBAMA, BARACK H.","BUSH, GEORGE H.W.","CARTER, JIMMY","OBAMA, BARACK H.","GORE, AL","BUSH, GEORGE W.","CLINTON, BILL","BUSH, GEORGE H.W.","CLINTON, BILL","FORD, GERALD","REAGAN, RONALD","OBAMA, BARACK H.","TRUMP, DONALD J.","GORE, AL","CARTER, JIMMY","ROMNEY, MITT","TRUMP, DONALD J.","REAGAN, RONALD","ROMNEY, MITT","CLINTON, BILL","GORE, AL","CARTER, JIMMY","CLINTON, BILL","MCCAIN, JOHN","TRUMP, DONALD J.","BIDEN, JOSEPH R. JR","TRUMP, DONALD J.","MCCAIN, JOHN","DOLE, ROBERT","TRUMP, DONALD J.","OBAMA, BARACK H.","ROMNEY, MITT","CLINTON, BILL","REAGAN, RONALD","BUSH, GEORGE H.W.","TRUMP, DONALD J.","REAGAN, RONALD","BUSH, GEORGE W.","OBAMA, BARACK H.","BUSH, GEORGE H.W.","BUSH, GEORGE H.W.","FORD, GERALD","TRUMP, DONALD J.","BUSH, GEORGE W.","CLINTON, BILL","OBAMA, BARACK H.","BUSH, GEORGE H.W.","FORD, GERALD","OBAMA, BARACK H.","REAGAN, RONALD","TRUMP, DONALD J.","CLINTON, HILLARY","ROMNEY, MITT","CLINTON, BILL","CLINTON, HILLARY","ROMNEY, MITT","CLINTON, BILL","BUSH, GEORGE W.","TRUMP, DONALD J.","BUSH, GEORGE W.","MCCAIN, JOHN","BIDEN, JOSEPH R. JR","CLINTON, BILL","CLINTON, BILL","BUSH, GEORGE W.","FORD, GERALD","REAGAN, RONALD","BUSH, GEORGE H.W.","CLINTON, BILL","BUSH, GEORGE H.W.","OBAMA, BARACK H.","CARTER, JIMMY","CLINTON, BILL","KERRY, JOHN","DUKAKIS, MICHAEL","CLINTON, BILL","GORE, AL","REAGAN, RONALD","KERRY, JOHN","GORE, AL","GORE, AL","BUSH, GEORGE W.","TRUMP, DONALD J.","TRUMP, DONALD J.","FORD, GERALD","CARTER, JIMMY","REAGAN, RONALD","ROMNEY, MITT","BUSH, GEORGE H.W.","REAGAN, RONALD","BUSH, GEORGE W.","REAGAN, RONALD","OBAMA, BARACK H.","REAGAN, RONALD","REAGAN, RONALD","TRUMP, DONALD J.","CLINTON, HILLARY","OBAMA, BARACK H.","BUSH, GEORGE W.","CLINTON, BILL","BIDEN, JOSEPH R. JR","TRUMP, DONALD J.","BUSH, GEORGE W.","OBAMA, BARACK H.","CARTER, JIMMY","CLINTON, BILL","CLINTON, BILL","CLINTON, BILL","REAGAN, RONALD","REAGAN, RONALD","BUSH, GEORGE H.W.","REAGAN, RONALD","TRUMP, DONALD J.","REAGAN, RONALD","CARTER, JIMMY","CARTER, JIMMY","BUSH, GEORGE H.W.","GORE, AL","GORE, AL","BUSH, GEORGE W.","TRUMP, DONALD J.","BUSH, GEORGE W.","BUSH, GEORGE H.W.","OBAMA, BARACK H.","ROMNEY, MITT","TRUMP, DONALD J.","CLINTON, BILL","DOLE, ROBERT","BUSH, GEORGE H.W.","DOLE, ROBERT","CARTER, JIMMY","CLINTON, HILLARY","GORE, AL","REAGAN, RONALD","OBAMA, BARACK H.","CARTER, JIMMY","REAGAN, RONALD","CLINTON, BILL","CLINTON, BILL","TRUMP, DONALD J.","BUSH, GEORGE H.W.","TRUMP, DONALD J.","CLINTON, BILL","CLINTON, HILLARY","BUSH, GEORGE W.","BUSH, GEORGE H.W.","ROMNEY, MITT","CARTER, JIMMY"],["REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","DEMOCRAT","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","DEMOCRAT","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","DEMOCRAT","REPUBLICAN","REPUBLICAN","REPUBLICAN","DEMOCRAT","REPUBLICAN","DEMOCRAT","DEMOCRAT","DEMOCRAT","REPUBLICAN","DEMOCRAT","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","DEMOCRAT","REPUBLICAN","DEMOCRAT","DEMOCRAT","REPUBLICAN","DEMOCRAT","REPUBLICAN","DEMOCRAT","REPUBLICAN","DEMOCRAT","DEMOCRAT","REPUBLICAN","DEMOCRAT","DEMOCRAT","REPUBLICAN","REPUBLICAN","DEMOCRAT","REPUBLICAN","REPUBLICAN","REPUBLICAN","DEMOCRAT","DEMOCRAT","REPUBLICAN","REPUBLICAN","REPUBLICAN","DEMOCRAT","DEMOCRAT","REPUBLICAN","DEMOCRAT","DEMOCRAT","REPUBLICAN","DEMOCRAT","REPUBLICAN","DEMOCRAT","REPUBLICAN","REPUBLICAN","REPUBLICAN","DEMOCRAT","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","DEMOCRAT","DEMOCRAT","REPUBLICAN","REPUBLICAN","REPUBLICAN","DEMOCRAT","REPUBLICAN","DEMOCRAT","DEMOCRAT","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","DEMOCRAT","REPUBLICAN","REPUBLICAN","DEMOCRAT","REPUBLICAN","DEMOCRAT","REPUBLICAN","DEMOCRAT","REPUBLICAN","REPUBLICAN","DEMOCRAT","REPUBLICAN","DEMOCRAT","REPUBLICAN","REPUBLICAN","DEMOCRAT","REPUBLICAN","DEMOCRAT","REPUBLICAN","REPUBLICAN","DEMOCRAT","DEMOCRAT","REPUBLICAN","REPUBLICAN","DEMOCRAT","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","DEMOCRAT","DEMOCRAT","DEMOCRAT","REPUBLICAN","DEMOCRAT","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","DEMOCRAT","DEMOCRAT","DEMOCRAT","DEMOCRAT","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","DEMOCRAT","DEMOCRAT","REPUBLICAN","REPUBLICAN","REPUBLICAN","DEMOCRAT","DEMOCRAT","DEMOCRAT","DEMOCRAT","REPUBLICAN","REPUBLICAN","REPUBLICAN","DEMOCRAT","REPUBLICAN","REPUBLICAN","DEMOCRAT","REPUBLICAN","REPUBLICAN","DEMOCRAT","REPUBLICAN","REPUBLICAN","DEMOCRAT","REPUBLICAN","DEMOCRAT","REPUBLICAN","REPUBLICAN","REPUBLICAN","DEMOCRAT","DEMOCRAT","REPUBLICAN","REPUBLICAN","REPUBLICAN","DEMOCRAT","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","DEMOCRAT","REPUBLICAN","REPUBLICAN","REPUBLICAN","DEMOCRAT","DEMOCRAT","DEMOCRAT","DEMOCRAT","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","DEMOCRAT","REPUBLICAN","DEMOCRAT","REPUBLICAN","DEMOCRAT","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","DEMOCRAT","DEMOCRAT","DEMOCRAT","DEMOCRAT","REPUBLICAN","REPUBLICAN","DEMOCRAT","DEMOCRAT","DEMOCRAT","DEMOCRAT","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","DEMOCRAT","REPUBLICAN","REPUBLICAN","DEMOCRAT","REPUBLICAN","DEMOCRAT","REPUBLICAN","DEMOCRAT","DEMOCRAT","DEMOCRAT","REPUBLICAN","DEMOCRAT","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","DEMOCRAT","DEMOCRAT","REPUBLICAN","DEMOCRAT","REPUBLICAN","DEMOCRAT","REPUBLICAN","REPUBLICAN","REPUBLICAN","DEMOCRAT","DEMOCRAT","DEMOCRAT","REPUBLICAN","DEMOCRAT","DEMOCRAT","DEMOCRAT","REPUBLICAN","REPUBLICAN","REPUBLICAN","DEMOCRAT","REPUBLICAN","REPUBLICAN","REPUBLICAN","DEMOCRAT","REPUBLICAN","REPUBLICAN","DEMOCRAT","DEMOCRAT","REPUBLICAN","DEMOCRAT","REPUBLICAN","DEMOCRAT","DEMOCRAT","DEMOCRAT","DEMOCRAT","DEMOCRAT","REPUBLICAN","DEMOCRAT","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","DEMOCRAT","DEMOCRAT","REPUBLICAN","REPUBLICAN","DEMOCRAT","REPUBLICAN","REPUBLICAN","REPUBLICAN","DEMOCRAT","DEMOCRAT","DEMOCRAT","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","DEMOCRAT","REPUBLICAN","REPUBLICAN","DEMOCRAT","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","DEMOCRAT","REPUBLICAN","REPUBLICAN","DEMOCRAT","REPUBLICAN","REPUBLICAN","DEMOCRAT","DEMOCRAT","REPUBLICAN","DEMOCRAT","DEMOCRAT","DEMOCRAT","REPUBLICAN","REPUBLICAN","DEMOCRAT","DEMOCRAT","REPUBLICAN","DEMOCRAT","DEMOCRAT","DEMOCRAT","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","DEMOCRAT","DEMOCRAT","DEMOCRAT","REPUBLICAN","DEMOCRAT","REPUBLICAN","REPUBLICAN","DEMOCRAT","DEMOCRAT","REPUBLICAN","DEMOCRAT","REPUBLICAN","DEMOCRAT","REPUBLICAN","DEMOCRAT","DEMOCRAT","REPUBLICAN","DEMOCRAT","REPUBLICAN","DEMOCRAT","DEMOCRAT","REPUBLICAN","REPUBLICAN","DEMOCRAT","DEMOCRAT","DEMOCRAT","DEMOCRAT","REPUBLICAN","REPUBLICAN","DEMOCRAT","REPUBLICAN","DEMOCRAT","REPUBLICAN","DEMOCRAT","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","DEMOCRAT","REPUBLICAN","DEMOCRAT","REPUBLICAN","DEMOCRAT","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","DEMOCRAT","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","DEMOCRAT","REPUBLICAN","DEMOCRAT","REPUBLICAN","DEMOCRAT","REPUBLICAN","REPUBLICAN","DEMOCRAT","REPUBLICAN","REPUBLICAN","DEMOCRAT","DEMOCRAT","DEMOCRAT","DEMOCRAT","REPUBLICAN","REPUBLICAN","DEMOCRAT","DEMOCRAT","REPUBLICAN","REPUBLICAN","REPUBLICAN","DEMOCRAT","DEMOCRAT","DEMOCRAT","REPUBLICAN","DEMOCRAT","DEMOCRAT","REPUBLICAN","REPUBLICAN","DEMOCRAT","DEMOCRAT","DEMOCRAT","REPUBLICAN","REPUBLICAN","DEMOCRAT","DEMOCRAT","DEMOCRAT","REPUBLICAN","DEMOCRAT","REPUBLICAN","DEMOCRAT","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","DEMOCRAT","REPUBLICAN","DEMOCRAT","DEMOCRAT","REPUBLICAN","DEMOCRAT","DEMOCRAT","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","DEMOCRAT","REPUBLICAN","REPUBLICAN","REPUBLICAN","DEMOCRAT","DEMOCRAT","DEMOCRAT","REPUBLICAN","DEMOCRAT","REPUBLICAN","DEMOCRAT","REPUBLICAN","REPUBLICAN","DEMOCRAT","REPUBLICAN","REPUBLICAN","DEMOCRAT","REPUBLICAN","DEMOCRAT","REPUBLICAN","DEMOCRAT","DEMOCRAT","DEMOCRAT","REPUBLICAN","DEMOCRAT","REPUBLICAN","DEMOCRAT","REPUBLICAN","REPUBLICAN","DEMOCRAT","REPUBLICAN","DEMOCRAT","DEMOCRAT","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","DEMOCRAT","DEMOCRAT","DEMOCRAT","DEMOCRAT","REPUBLICAN","REPUBLICAN","DEMOCRAT","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","DEMOCRAT","REPUBLICAN","DEMOCRAT","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","DEMOCRAT","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","DEMOCRAT","DEMOCRAT","REPUBLICAN","REPUBLICAN","DEMOCRAT","REPUBLICAN","REPUBLICAN","DEMOCRAT","REPUBLICAN","DEMOCRAT","DEMOCRAT","REPUBLICAN","DEMOCRAT","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","DEMOCRAT","DEMOCRAT","DEMOCRAT","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","DEMOCRAT","REPUBLICAN","DEMOCRAT","DEMOCRAT","DEMOCRAT","DEMOCRAT","DEMOCRAT","DEMOCRAT","DEMOCRAT","REPUBLICAN","DEMOCRAT","DEMOCRAT","DEMOCRAT","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","DEMOCRAT","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","DEMOCRAT","REPUBLICAN","REPUBLICAN","REPUBLICAN","DEMOCRAT","DEMOCRAT","REPUBLICAN","DEMOCRAT","DEMOCRAT","REPUBLICAN","REPUBLICAN","DEMOCRAT","DEMOCRAT","DEMOCRAT","DEMOCRAT","DEMOCRAT","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","DEMOCRAT","DEMOCRAT","REPUBLICAN","DEMOCRAT","DEMOCRAT","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","DEMOCRAT","REPUBLICAN","REPUBLICAN","DEMOCRAT","REPUBLICAN","REPUBLICAN","REPUBLICAN","DEMOCRAT","DEMOCRAT","DEMOCRAT","REPUBLICAN","DEMOCRAT","DEMOCRAT","REPUBLICAN","DEMOCRAT","DEMOCRAT","REPUBLICAN","REPUBLICAN","REPUBLICAN","DEMOCRAT","DEMOCRAT","REPUBLICAN","REPUBLICAN","REPUBLICAN","DEMOCRAT"],[695570,676026,736456,583245,165415,193559,135865,2310939,487793,250779,231708,872520,261043,4526917,439838,700714,297523,998387,534774,771406,4617886,632864,363467,1252401,424921,423778,185935,1297763,1717077,502752,202970,653288,200152,792853,586353,376930,879918,1088845,359219,5054917,5861203,1915225,273495,2382202,2416549,661365,1183958,720342,460054,890955,366130,1419720,2328677,4237756,777732,2173310,4180755,915018,188320,203054,2369612,133592,419214,710746,147947,2239164,2827621,133241,205286,340511,989375,2148278,469105,2122786,515211,897672,769044,415335,734281,872849,1594511,5467009,3649630,1803800,699655,79347,206040,1985023,270341,1630866,296268,684872,110700,1148275,136244,331001,1482440,1134661,384826,441089,825879,883748,815971,170962,256595,649641,1546557,531373,210610,622332,159407,1152262,2479183,236320,671018,636614,1804352,2584323,307101,1429475,164676,2364269,703088,190700,1020997,1053873,199239,584278,235603,927871,3799639,4522994,1061949,1189924,943163,1071971,933516,505823,307131,1057631,405483,403012,539260,3471915,787761,781652,861530,997772,1636000,327812,3942215,475064,337908,428442,638517,1310936,418690,381329,865140,152190,1334493,663742,937974,1002106,138377,367462,2300087,211419,1081331,135879,897572,235595,409055,1020280,149022,557890,273559,3376519,1037299,155017,501614,821817,1138350,1479438,2564569,8274473,1041066,1911430,571044,1914254,2510705,1087190,735740,2089104,1546167,168601,242820,2206545,529688,1274188,1455713,554119,2872579,1126794,282830,1080831,638017,200336,4324228,993037,857488,205012,2279543,890877,193695,615539,800983,3019512,238522,1176394,385234,865244,348526,122746,341016,255459,227636,3882244,3090729,1326646,179652,3433428,167629,267928,947233,1318255,1437490,960165,184067,2546870,1441170,1242987,678367,1677211,2078688,989609,883702,242584,325871,296571,941173,245800,970488,1109471,681416,193841,1266546,1318639,196651,417655,592929,616206,163387,512814,2804040,1120380,566812,2473633,167398,822544,1677928,171923,2142651,498604,990212,1367705,4569843,2859764,1102169,652264,582377,821702,751957,1893742,1006693,750241,1340383,209040,573339,1225938,533736,1509688,1729519,397466,3255487,307486,435864,1245836,959792,1084953,242763,1036364,1074181,449951,1445014,1462330,150543,322632,2496071,180068,216794,1933630,1629467,702541,409235,682318,670557,204151,140355,3458229,1323101,198343,572086,703486,369561,2358049,615717,11110250,2215422,786892,1716959,106867,2730350,836554,336937,166559,654192,263420,225123,2453350,677296,450807,200267,1346481,933521,7854285,472940,1338870,572898,620258,744337,905083,927365,1631163,2215819,1051670,1123323,472422,164958,221705,3276363,319951,189148,1672143,174852,202645,726161,185050,180408,2736167,137894,1420543,1034896,1150517,336500,927837,760647,3244165,433862,2485967,719261,2048759,92717,1557286,179310,174419,101273,153684,545382,2938095,102000,178573,1069439,979409,1377230,1178638,401306,949136,556846,130231,279677,317323,6745485,876167,343678,192364,1489504,439277,1337078,2912790,3346894,5230985,1755396,188770,261617,203974,267050,1405284,966207,1620985,266891,1852475,728177,252525,2990274,396842,1080843,1959532,1230111,246166,3036829,420911,1104294,691848,1237258,4379789,582315,421923,2728372,724597,1008966,286783,190412,2758773,4479328,1048462,2341744,1198584,495961,1101255,1871182,306658,1921290,173703,1971820,815576,1904097,596030,1255776,259760,139639,418642,621314,232450,2940044,2618885,122461,828940,1168266,572844,475171,1309162,2148222,100387,212080,4282074,489371,1788850,1040232,647744,1718736,290699,1233654,213299,816015,1070440,1436206,1479178,227721,2608335,3154834,1445814,125050,2841005,1573354,2270395,665104,403164,281537,1522925,2251571,1384375,1374039,124331,397956,71555,1385103,2350363,1571509,1750848,554049,151505,4645332,439687,1155389,8753788,740600,192619,1742718,891325,158220,1961166,756764,266063,452979,2413568,988571,1652361,672660,492120,2707103,577507,5121325,253881,267070,147375,909146,1510201,1401415,126054,2170418,94628,2891550,2589026,1616487,515096,5890347,4685047,545708,198342,2046951,1071645,606443,677210,3964522,685700,219262,111252,2261872,2970733,357735,1677844,301575,1984942,435072,279240,232584,1037291,954173,312788,233050,1025935,635274,2678559,119251,86112,343602,1068722,759612,659170,804283,249508,1144008,240178,1202971,336475,1743192,3419348,692634,189951,154507,105388,136718,361911,2082319,1981473,1247652,206814,1288576,2009959,1255656,1989653,5119835,5668731,1965486,2362631,629681,1995196,190889,466578,1255925,137818]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>year<\/th>\n      <th>state<\/th>\n      <th>winner<\/th>\n      <th>party<\/th>\n      <th>highest_votes<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":10,"scrollX":true,"dom":"tip","columnDefs":[{"className":"dt-right","targets":[1,5]},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"year","targets":1},{"name":"state","targets":2},{"name":"winner","targets":3},{"name":"party","targets":4},{"name":"highest_votes","targets":5}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate party counts per year for the bar chart</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>party_count_per_year <span class="ot">&lt;-</span> state_winner <span class="sc">%&gt;%</span></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(year, party) <span class="sc">%&gt;%</span></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(year, <span class="fu">desc</span>(n))  <span class="co"># Arrange the data for better display in the bar chart</span></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a bar chart to show the count of each party per year</span></span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(party_count_per_year, <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">factor</span>(year), <span class="at">y =</span> n, <span class="at">fill =</span> party)) <span class="sc">+</span></span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>, <span class="at">position =</span> <span class="st">"dodge"</span>) <span class="sc">+</span></span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb17-10"><a href="#cb17-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Party Count per Year in US Presidential Elections (1976 - 2020)"</span>,</span>
<span id="cb17-11"><a href="#cb17-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Year"</span>,</span>
<span id="cb17-12"><a href="#cb17-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Number of States"</span>,</span>
<span id="cb17-13"><a href="#cb17-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">fill =</span> <span class="st">"Party"</span></span>
<span id="cb17-14"><a href="#cb17-14" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb17-15"><a href="#cb17-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"DEMOCRAT"</span> <span class="ot">=</span> <span class="st">"blue"</span>, <span class="st">"REPUBLICAN"</span> <span class="ot">=</span> <span class="st">"red"</span>, <span class="st">"OTHER"</span> <span class="ot">=</span> <span class="st">"grey"</span>)) <span class="sc">+</span></span>
<span id="cb17-16"><a href="#cb17-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb17-17"><a href="#cb17-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"top"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="mp03_files/figure-html/unnamed-chunk-11-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="task-7---district-wide-winner-take-all-state-wide-at-large-votes" class="level3">
<h3 class="anchored" data-anchor-id="task-7---district-wide-winner-take-all-state-wide-at-large-votes">Task 7 - District-Wide Winner-Take-All + State-Wide “At Large” Votes</h3>
<p>This code starts similarly by filtering data from the same period, but it focuses on calculating the total candidate votes for each party in each state, rather than identifying a single candidate’s vote. The party with the highest total votes is considered the winner for that state in each election year. The results are again shown in a gt table and visualized with a bar chart that counts the number of states won by each party for every election year, providing insights into the distribution of electoral outcomes across the U.S.</p>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load necessary libraries</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(DT)</span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Filter for presidential data in all election years from 1976 to 2020</span></span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a>filtered_data <span class="ot">&lt;-</span> president_data <span class="sc">%&gt;%</span></span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(office <span class="sc">==</span> <span class="st">"US PRESIDENT"</span>, year <span class="sc">%in%</span> <span class="fu">seq</span>(<span class="dv">1976</span>, <span class="dv">2020</span>, <span class="at">by =</span> <span class="dv">4</span>))</span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Step 1: Determine the highest candidate votes for each party by state and year</span></span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"></a>highest_votes_per_party <span class="ot">&lt;-</span> filtered_data <span class="sc">%&gt;%</span></span>
<span id="cb18-12"><a href="#cb18-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year, state, party_simplified) <span class="sc">%&gt;%</span></span>
<span id="cb18-13"><a href="#cb18-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">total_votes =</span> <span class="fu">sum</span>(candidatevotes, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="at">.groups =</span> <span class="st">"drop"</span>)</span>
<span id="cb18-14"><a href="#cb18-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-15"><a href="#cb18-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Step 2: Identify the winning party for each state and year based on the highest votes</span></span>
<span id="cb18-16"><a href="#cb18-16" aria-hidden="true" tabindex="-1"></a>state_winners_atlarge <span class="ot">&lt;-</span> highest_votes_per_party <span class="sc">%&gt;%</span></span>
<span id="cb18-17"><a href="#cb18-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year, state) <span class="sc">%&gt;%</span></span>
<span id="cb18-18"><a href="#cb18-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(total_votes <span class="sc">==</span> <span class="fu">max</span>(total_votes)) <span class="sc">%&gt;%</span></span>
<span id="cb18-19"><a href="#cb18-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="dv">1</span>) <span class="sc">%&gt;%</span>  <span class="co"># Select first in case of ties</span></span>
<span id="cb18-20"><a href="#cb18-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span>
<span id="cb18-21"><a href="#cb18-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-22"><a href="#cb18-22" aria-hidden="true" tabindex="-1"></a><span class="co"># Display the winning party data sample using display_sample function</span></span>
<span id="cb18-23"><a href="#cb18-23" aria-hidden="true" tabindex="-1"></a><span class="fu">display_sample</span>(state_winners_atlarge, <span class="st">"Winning Party by State in US Presidential Elections (1976 - 2020)"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-01d31e529bb424b09fc8" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-01d31e529bb424b09fc8">{"x":{"filter":"none","vertical":false,"caption":"<caption>Sample of Winning Party by State in US Presidential Elections (1976 - 2020) (Up to 1000 rows)<\/caption>","data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59","60","61","62","63","64","65","66","67","68","69","70","71","72","73","74","75","76","77","78","79","80","81","82","83","84","85","86","87","88","89","90","91","92","93","94","95","96","97","98","99","100","101","102","103","104","105","106","107","108","109","110","111","112","113","114","115","116","117","118","119","120","121","122","123","124","125","126","127","128","129","130","131","132","133","134","135","136","137","138","139","140","141","142","143","144","145","146","147","148","149","150","151","152","153","154","155","156","157","158","159","160","161","162","163","164","165","166","167","168","169","170","171","172","173","174","175","176","177","178","179","180","181","182","183","184","185","186","187","188","189","190","191","192","193","194","195","196","197","198","199","200","201","202","203","204","205","206","207","208","209","210","211","212","213","214","215","216","217","218","219","220","221","222","223","224","225","226","227","228","229","230","231","232","233","234","235","236","237","238","239","240","241","242","243","244","245","246","247","248","249","250","251","252","253","254","255","256","257","258","259","260","261","262","263","264","265","266","267","268","269","270","271","272","273","274","275","276","277","278","279","280","281","282","283","284","285","286","287","288","289","290","291","292","293","294","295","296","297","298","299","300","301","302","303","304","305","306","307","308","309","310","311","312","313","314","315","316","317","318","319","320","321","322","323","324","325","326","327","328","329","330","331","332","333","334","335","336","337","338","339","340","341","342","343","344","345","346","347","348","349","350","351","352","353","354","355","356","357","358","359","360","361","362","363","364","365","366","367","368","369","370","371","372","373","374","375","376","377","378","379","380","381","382","383","384","385","386","387","388","389","390","391","392","393","394","395","396","397","398","399","400","401","402","403","404","405","406","407","408","409","410","411","412","413","414","415","416","417","418","419","420","421","422","423","424","425","426","427","428","429","430","431","432","433","434","435","436","437","438","439","440","441","442","443","444","445","446","447","448","449","450","451","452","453","454","455","456","457","458","459","460","461","462","463","464","465","466","467","468","469","470","471","472","473","474","475","476","477","478","479","480","481","482","483","484","485","486","487","488","489","490","491","492","493","494","495","496","497","498","499","500","501","502","503","504","505","506","507","508","509","510","511","512","513","514","515","516","517","518","519","520","521","522","523","524","525","526","527","528","529","530","531","532","533","534","535","536","537","538","539","540","541","542","543","544","545","546","547","548","549","550","551","552","553","554","555","556","557","558","559","560","561","562","563","564","565","566","567","568","569","570","571","572","573","574","575","576","577","578","579","580","581","582","583","584","585","586","587","588","589","590","591","592","593","594","595","596","597","598","599","600","601","602","603","604","605","606","607","608","609","610","611","612"],[2016,1992,2020,2020,2020,1980,1992,1976,2012,2016,1980,2016,2008,2008,2016,2012,1984,1996,1976,1984,2004,1984,2000,1980,2000,1992,2000,2020,1988,2000,2004,2016,2000,2008,1992,2000,2004,1992,2004,2000,1996,2008,2020,2004,2004,2016,1992,2004,1992,1976,1992,2012,1980,1988,1984,2016,2004,2020,1984,2000,1992,1996,1980,2020,1992,2016,2012,1988,1976,1992,1996,2000,1976,2016,2012,1992,2020,1980,1980,1984,1976,1980,1996,1988,1980,2000,1984,2008,1992,2008,2004,1992,1988,2016,1976,1988,2004,1988,1984,2008,1988,1992,1976,1980,2000,1992,1996,2004,2004,1992,1988,1984,1992,2016,1988,1992,1992,1988,1976,1984,2000,1980,1984,1996,2004,2016,1988,2016,1988,2016,2000,1996,2000,2008,2016,2008,2020,1988,1984,1996,2020,1988,1980,2008,2016,1988,1976,2016,1996,2004,1984,2000,1984,1984,1980,2020,1984,2016,1988,2020,2020,2008,1988,2012,1976,1988,1984,1988,2020,2012,2016,1996,1976,2008,1980,1992,1996,2004,1976,1988,2008,2016,1996,2016,2020,1996,2008,2004,2008,1976,2020,1976,1976,2020,2020,1984,1992,2004,1992,1980,2012,2004,2008,1996,1996,2012,2016,2008,2016,2004,1976,2008,2000,2004,1980,1988,2008,1992,2004,2004,1988,2004,2016,2016,2008,2012,1996,2012,1976,2000,2000,2000,1988,1976,1980,2016,2008,1988,1976,2004,1984,1976,1988,1976,2008,1984,2004,2008,2000,1976,1992,1980,1996,1976,1984,1988,2004,1980,1980,2012,1988,2012,2004,2016,1992,2008,2020,2020,2008,1996,2016,2000,2016,2000,2000,2008,1988,2012,2000,1984,1984,1988,1984,2020,1976,2012,1976,1980,1976,1980,1992,1976,2016,1988,2000,2000,1984,1988,1988,2008,1992,2004,1976,1996,2000,1992,1984,1980,2016,2020,2012,2020,1980,2012,2000,1984,2004,2016,1984,2012,2000,2004,2000,1984,1976,1996,1984,1980,1976,1992,1992,2012,1980,1980,1992,1988,2012,1976,2012,2004,1980,2000,2012,1992,1976,2004,1984,1984,2000,1996,1996,2012,1976,2016,2000,2004,2008,2004,1996,2020,1992,2016,1988,1992,1984,1988,2012,1988,2016,1984,1988,2000,1996,2000,1976,1980,1992,2000,2008,1984,2000,2004,1996,1996,2012,2020,2004,2012,1984,1980,2004,1996,2020,1996,2012,2008,2008,2016,1996,2016,1980,1996,1992,2020,1980,2016,2012,2020,2012,2012,1996,2008,1980,1992,1988,2016,2012,2016,1988,1984,1976,2020,2020,1980,2008,1996,2008,2008,1996,2008,1992,2008,1988,1984,1980,1984,2008,1996,2000,1980,2020,2004,1988,2016,2004,1996,2004,2008,1992,2020,2012,2012,2020,2020,2008,1976,1996,1996,2020,2012,1992,1988,2004,1988,2020,1980,1992,1980,1988,1996,2012,2004,2004,2008,2012,1996,2008,1996,1976,1980,2008,2020,2000,2004,2016,2012,2012,1976,1992,2000,2000,2000,2004,1980,2016,2004,1992,1992,1996,1988,2020,1980,2008,2008,1996,2020,1980,2000,2020,2000,2012,1976,1980,1984,1980,2000,1988,1992,1996,2012,2000,1976,2020,2012,2004,1976,2008,1976,2020,2004,1992,1984,1988,2000,1988,2000,1996,1984,2020,2020,2004,2012,2020,1980,1996,1980,2016,1988,2016,2000,1976,2016,1984,2016,1976,1992,1976,1976,2012,2000,2020,1992,1980,2012,1976,2020,2008,1984,1984,1996,1980,1996,2012,1996,2008,1980,1976,2020,2020,2012,1984,1988,1992,1996,1984,2020,2012,2004,1992,1984,1980,1976,2020,1976,2016,2012,2012,2000,2012,1980,2016,2016,2016,2004,2008,1996,2008,2012,1984,1984,1984,2008],["RHODE ISLAND","OREGON","HAWAII","LOUISIANA","NEW JERSEY","IDAHO","VERMONT","ALASKA","DISTRICT OF COLUMBIA","NEW YORK","NEW MEXICO","PENNSYLVANIA","DELAWARE","WEST VIRGINIA","FLORIDA","NEW YORK","COLORADO","MAINE","CALIFORNIA","MISSISSIPPI","IOWA","ILLINOIS","MAINE","PENNSYLVANIA","TEXAS","MONTANA","MARYLAND","MAINE","KENTUCKY","NEW MEXICO","OREGON","NORTH DAKOTA","NEW YORK","VIRGINIA","NEBRASKA","LOUISIANA","PENNSYLVANIA","MASSACHUSETTS","ALASKA","KANSAS","IOWA","SOUTH DAKOTA","ALABAMA","MAINE","WYOMING","ALABAMA","CONNECTICUT","WEST VIRGINIA","CALIFORNIA","OHIO","INDIANA","FLORIDA","SOUTH DAKOTA","NEBRASKA","MAINE","KENTUCKY","WASHINGTON","CALIFORNIA","LOUISIANA","ARKANSAS","MISSISSIPPI","VIRGINIA","KANSAS","IDAHO","KANSAS","NEW HAMPSHIRE","MARYLAND","UTAH","RHODE ISLAND","ALABAMA","MISSOURI","OKLAHOMA","VERMONT","MAINE","IOWA","TENNESSEE","INDIANA","ARIZONA","TEXAS","OHIO","LOUISIANA","ARKANSAS","MINNESOTA","MICHIGAN","VERMONT","GEORGIA","TENNESSEE","SOUTH CAROLINA","OHIO","OREGON","SOUTH DAKOTA","MARYLAND","RHODE ISLAND","GEORGIA","CONNECTICUT","MISSOURI","SOUTH CAROLINA","NORTH DAKOTA","MISSOURI","NEW JERSEY","MASSACHUSETTS","GEORGIA","TEXAS","DISTRICT OF COLUMBIA","TENNESSEE","MAINE","TEXAS","NEBRASKA","VERMONT","PENNSYLVANIA","PENNSYLVANIA","OREGON","COLORADO","MARYLAND","ALABAMA","WYOMING","WEST VIRGINIA","INDIANA","SOUTH CAROLINA","IDAHO","DISTRICT OF COLUMBIA","MISSOURI","NEBRASKA","COLORADO","FLORIDA","IDAHO","SOUTH CAROLINA","MASSACHUSETTS","TENNESSEE","DISTRICT OF COLUMBIA","NEW HAMPSHIRE","RHODE ISLAND","MISSOURI","MAINE","KANSAS","COLORADO","VIRGINIA","MINNESOTA","GEORGIA","ALABAMA","IOWA","WEST VIRGINIA","WYOMING","INDIANA","ALASKA","NEW JERSEY","WYOMING","ARIZONA","LOUISIANA","CONNECTICUT","FLORIDA","IDAHO","OKLAHOMA","CALIFORNIA","MISSISSIPPI","MISSOURI","ALASKA","MONTANA","ALASKA","SOUTH DAKOTA","PENNSYLVANIA","OHIO","COLORADO","CONNECTICUT","ARKANSAS","OHIO","INDIANA","VERMONT","NEW HAMPSHIRE","MASSACHUSETTS","NEW MEXICO","KANSAS","ALABAMA","DISTRICT OF COLUMBIA","KENTUCKY","NEVADA","VERMONT","TEXAS","NEW YORK","ARKANSAS","MASSACHUSETTS","HAWAII","NEBRASKA","OREGON","SOUTH CAROLINA","WASHINGTON","ARKANSAS","VIRGINIA","MISSOURI","IDAHO","VERMONT","VIRGINIA","MICHIGAN","NEW YORK","KANSAS","MICHIGAN","ALASKA","OHIO","FLORIDA","HAWAII","NEBRASKA","MONTANA","TEXAS","MONTANA","WYOMING","NEW HAMPSHIRE","DELAWARE","NEBRASKA","SOUTH CAROLINA","TENNESSEE","COLORADO","RHODE ISLAND","WEST VIRGINIA","NEW MEXICO","MONTANA","WISCONSIN","IOWA","ARIZONA","NEW JERSEY","ILLINOIS","NEW MEXICO","MINNESOTA","COLORADO","CALIFORNIA","TENNESSEE","NORTH DAKOTA","ALASKA","VERMONT","UTAH","NORTH DAKOTA","MASSACHUSETTS","FLORIDA","NEW YORK","SOUTH DAKOTA","NEBRASKA","CONNECTICUT","UTAH","MONTANA","MAINE","IDAHO","ARIZONA","WEST VIRGINIA","WYOMING","MASSACHUSETTS","IDAHO","NEVADA","MARYLAND","KANSAS","WISCONSIN","MISSOURI","ILLINOIS","IOWA","SOUTH CAROLINA","OREGON","CONNECTICUT","OKLAHOMA","INDIANA","NEW JERSEY","MICHIGAN","WYOMING","KANSAS","MISSOURI","RHODE ISLAND","NEVADA","NEW JERSEY","NEW YORK","NORTH DAKOTA","MARYLAND","ARIZONA","NEW YORK","IOWA","NORTH CAROLINA","OKLAHOMA","ALABAMA","OHIO","PENNSYLVANIA","MISSISSIPPI","MAINE","MISSISSIPPI","UTAH","NEW HAMPSHIRE","IDAHO","RHODE ISLAND","MICHIGAN","FLORIDA","OREGON","DISTRICT OF COLUMBIA","VIRGINIA","NEW HAMPSHIRE","OKLAHOMA","NEW HAMPSHIRE","NEBRASKA","NORTH CAROLINA","FLORIDA","DELAWARE","ARIZONA","HAWAII","IOWA","ILLINOIS","FLORIDA","SOUTH CAROLINA","UTAH","KANSAS","FLORIDA","NEBRASKA","IDAHO","SOUTH CAROLINA","SOUTH CAROLINA","WYOMING","WYOMING","MISSISSIPPI","UTAH","LOUISIANA","PENNSYLVANIA","NEVADA","NEW JERSEY","ALABAMA","NEW JERSEY","DISTRICT OF COLUMBIA","HAWAII","HAWAII","DISTRICT OF COLUMBIA","RHODE ISLAND","MARYLAND","NORTH CAROLINA","IDAHO","KANSAS","GEORGIA","INDIANA","IOWA","MICHIGAN","WISCONSIN","OREGON","OHIO","HAWAII","TEXAS","ALABAMA","IOWA","ILLINOIS","WISCONSIN","WASHINGTON","VERMONT","ARIZONA","KENTUCKY","GEORGIA","MISSOURI","DELAWARE","WEST VIRGINIA","CONNECTICUT","KENTUCKY","ILLINOIS","OHIO","MARYLAND","WISCONSIN","WYOMING","OKLAHOMA","MICHIGAN","COLORADO","GEORGIA","NEBRASKA","SOUTH DAKOTA","SOUTH DAKOTA","MARYLAND","UTAH","ALABAMA","DISTRICT OF COLUMBIA","LOUISIANA","DELAWARE","VIRGINIA","MASSACHUSETTS","VIRGINIA","CALIFORNIA","MICHIGAN","SOUTH DAKOTA","WISCONSIN","MAINE","MINNESOTA","INDIANA","HAWAII","KENTUCKY","PENNSYLVANIA","MISSISSIPPI","NEW MEXICO","MASSACHUSETTS","NEVADA","MASSACHUSETTS","NEVADA","MONTANA","PENNSYLVANIA","ALASKA","LOUISIANA","SOUTH DAKOTA","WEST VIRGINIA","CALIFORNIA","NORTH CAROLINA","OKLAHOMA","ILLINOIS","LOUISIANA","NEW JERSEY","WEST VIRGINIA","ILLINOIS","DELAWARE","NEW YORK","CONNECTICUT","NORTH DAKOTA","OHIO","GEORGIA","WASHINGTON","WASHINGTON","RHODE ISLAND","PENNSYLVANIA","LOUISIANA","COLORADO","DISTRICT OF COLUMBIA","MAINE","ARKANSAS","WEST VIRGINIA","TEXAS","HAWAII","MONTANA","MINNESOTA","OKLAHOMA","ARIZONA","CONNECTICUT","NORTH DAKOTA","MARYLAND","MINNESOTA","MARYLAND","ARKANSAS","MONTANA","VIRGINIA","NEW HAMPSHIRE","WASHINGTON","WYOMING","NEW HAMPSHIRE","VIRGINIA","KENTUCKY","OREGON","MONTANA","TENNESSEE","ARKANSAS","NORTH DAKOTA","OREGON","WASHINGTON","ARIZONA","HAWAII","ARKANSAS","WISCONSIN","LOUISIANA","GEORGIA","IDAHO","MICHIGAN","NORTH CAROLINA","NEVADA","NEVADA","DELAWARE","OHIO","UTAH","RHODE ISLAND","VIRGINIA","MISSOURI","NEW HAMPSHIRE","KENTUCKY","GEORGIA","TEXAS","ALABAMA","RHODE ISLAND","FLORIDA","SOUTH DAKOTA","INDIANA","MINNESOTA","KANSAS","NORTH CAROLINA","WASHINGTON","SOUTH DAKOTA","ARIZONA","CONNECTICUT","MISSISSIPPI","NEW MEXICO","MARYLAND","MISSISSIPPI","MINNESOTA","SOUTH CAROLINA","NEW YORK","ILLINOIS","OKLAHOMA","NEW JERSEY","NEW JERSEY","WISCONSIN","OREGON","COLORADO","MICHIGAN","MICHIGAN","NEVADA","UTAH","HAWAII","WASHINGTON","ARKANSAS","NORTH CAROLINA","ARIZONA","KENTUCKY","CALIFORNIA","GEORGIA","ALASKA","NEVADA","NEW MEXICO","RHODE ISLAND","VIRGINIA","COLORADO","NEW JERSEY","CALIFORNIA","ARIZONA","DELAWARE","SOUTH DAKOTA","UTAH","ILLINOIS","LOUISIANA","NEW MEXICO","TENNESSEE","KENTUCKY","KENTUCKY","MONTANA","DELAWARE","INDIANA","DELAWARE","KENTUCKY","ALABAMA","OKLAHOMA","MONTANA","GEORGIA","NORTH CAROLINA","ARKANSAS","CONNECTICUT","MINNESOTA","NEVADA","IOWA","WEST VIRGINIA","IOWA","OREGON","OHIO","MASSACHUSETTS","COLORADO","MISSISSIPPI","INDIANA","OKLAHOMA","MASSACHUSETTS","VERMONT","NORTH CAROLINA","TENNESSEE","UTAH","MISSISSIPPI","MICHIGAN","NORTH CAROLINA","MISSISSIPPI","TENNESSEE","DELAWARE","HAWAII","PENNSYLVANIA","SOUTH CAROLINA","WASHINGTON","ILLINOIS","TEXAS","MINNESOTA","ARKANSAS","NORTH DAKOTA","WISCONSIN","NORTH CAROLINA","WISCONSIN","NORTH DAKOTA","NORTH DAKOTA","WISCONSIN","DISTRICT OF COLUMBIA","ALASKA","WISCONSIN","WYOMING","WEST VIRGINIA","NEVADA","DISTRICT OF COLUMBIA","FLORIDA","TEXAS","NEW YORK","CALIFORNIA","NORTH DAKOTA","NEW HAMPSHIRE","MINNESOTA","TENNESSEE","KANSAS","NEW HAMPSHIRE","OKLAHOMA","WASHINGTON","NEW YORK","ILLINOIS","ALASKA","WASHINGTON","INDIANA","DELAWARE","UTAH","ALASKA","TENNESSEE","NORTH CAROLINA","NEBRASKA","MISSOURI","MINNESOTA","CALIFORNIA","NEW MEXICO","CONNECTICUT","CALIFORNIA","NEW MEXICO","TEXAS","VERMONT","NEW MEXICO","VERMONT"],["DEMOCRAT","DEMOCRAT","DEMOCRAT","REPUBLICAN","DEMOCRAT","REPUBLICAN","DEMOCRAT","REPUBLICAN","DEMOCRAT","DEMOCRAT","REPUBLICAN","REPUBLICAN","DEMOCRAT","REPUBLICAN","REPUBLICAN","DEMOCRAT","REPUBLICAN","DEMOCRAT","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","DEMOCRAT","REPUBLICAN","REPUBLICAN","DEMOCRAT","DEMOCRAT","DEMOCRAT","REPUBLICAN","DEMOCRAT","DEMOCRAT","REPUBLICAN","DEMOCRAT","DEMOCRAT","REPUBLICAN","REPUBLICAN","DEMOCRAT","DEMOCRAT","REPUBLICAN","REPUBLICAN","DEMOCRAT","REPUBLICAN","REPUBLICAN","DEMOCRAT","REPUBLICAN","REPUBLICAN","DEMOCRAT","REPUBLICAN","DEMOCRAT","DEMOCRAT","REPUBLICAN","DEMOCRAT","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","DEMOCRAT","DEMOCRAT","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","DEMOCRAT","DEMOCRAT","REPUBLICAN","DEMOCRAT","REPUBLICAN","DEMOCRAT","REPUBLICAN","REPUBLICAN","DEMOCRAT","DEMOCRAT","DEMOCRAT","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","DEMOCRAT","REPUBLICAN","DEMOCRAT","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","DEMOCRAT","DEMOCRAT","REPUBLICAN","DEMOCRAT","DEMOCRAT","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","DEMOCRAT","DEMOCRAT","DEMOCRAT","DEMOCRAT","DEMOCRAT","REPUBLICAN","DEMOCRAT","REPUBLICAN","REPUBLICAN","DEMOCRAT","DEMOCRAT","REPUBLICAN","REPUBLICAN","DEMOCRAT","DEMOCRAT","REPUBLICAN","REPUBLICAN","DEMOCRAT","REPUBLICAN","DEMOCRAT","REPUBLICAN","DEMOCRAT","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","DEMOCRAT","REPUBLICAN","DEMOCRAT","REPUBLICAN","DEMOCRAT","REPUBLICAN","DEMOCRAT","REPUBLICAN","DEMOCRAT","DEMOCRAT","DEMOCRAT","REPUBLICAN","REPUBLICAN","REPUBLICAN","DEMOCRAT","REPUBLICAN","DEMOCRAT","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","DEMOCRAT","DEMOCRAT","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","DEMOCRAT","DEMOCRAT","REPUBLICAN","DEMOCRAT","DEMOCRAT","REPUBLICAN","REPUBLICAN","REPUBLICAN","DEMOCRAT","DEMOCRAT","DEMOCRAT","REPUBLICAN","DEMOCRAT","DEMOCRAT","REPUBLICAN","DEMOCRAT","DEMOCRAT","REPUBLICAN","DEMOCRAT","REPUBLICAN","DEMOCRAT","DEMOCRAT","REPUBLICAN","DEMOCRAT","REPUBLICAN","DEMOCRAT","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","DEMOCRAT","REPUBLICAN","REPUBLICAN","DEMOCRAT","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","DEMOCRAT","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","DEMOCRAT","DEMOCRAT","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","DEMOCRAT","REPUBLICAN","REPUBLICAN","REPUBLICAN","DEMOCRAT","DEMOCRAT","REPUBLICAN","DEMOCRAT","DEMOCRAT","REPUBLICAN","DEMOCRAT","DEMOCRAT","DEMOCRAT","REPUBLICAN","REPUBLICAN","REPUBLICAN","DEMOCRAT","REPUBLICAN","REPUBLICAN","DEMOCRAT","REPUBLICAN","DEMOCRAT","REPUBLICAN","REPUBLICAN","DEMOCRAT","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","DEMOCRAT","REPUBLICAN","DEMOCRAT","REPUBLICAN","REPUBLICAN","DEMOCRAT","REPUBLICAN","DEMOCRAT","DEMOCRAT","DEMOCRAT","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","DEMOCRAT","DEMOCRAT","DEMOCRAT","DEMOCRAT","REPUBLICAN","DEMOCRAT","REPUBLICAN","DEMOCRAT","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","DEMOCRAT","REPUBLICAN","DEMOCRAT","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","DEMOCRAT","DEMOCRAT","DEMOCRAT","DEMOCRAT","REPUBLICAN","REPUBLICAN","REPUBLICAN","DEMOCRAT","REPUBLICAN","REPUBLICAN","REPUBLICAN","DEMOCRAT","REPUBLICAN","REPUBLICAN","DEMOCRAT","REPUBLICAN","DEMOCRAT","REPUBLICAN","REPUBLICAN","REPUBLICAN","DEMOCRAT","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","DEMOCRAT","REPUBLICAN","REPUBLICAN","REPUBLICAN","DEMOCRAT","DEMOCRAT","DEMOCRAT","DEMOCRAT","DEMOCRAT","DEMOCRAT","REPUBLICAN","DEMOCRAT","REPUBLICAN","REPUBLICAN","DEMOCRAT","REPUBLICAN","DEMOCRAT","DEMOCRAT","DEMOCRAT","REPUBLICAN","REPUBLICAN","DEMOCRAT","REPUBLICAN","REPUBLICAN","REPUBLICAN","DEMOCRAT","DEMOCRAT","REPUBLICAN","DEMOCRAT","REPUBLICAN","DEMOCRAT","DEMOCRAT","REPUBLICAN","REPUBLICAN","REPUBLICAN","DEMOCRAT","DEMOCRAT","DEMOCRAT","DEMOCRAT","DEMOCRAT","REPUBLICAN","REPUBLICAN","REPUBLICAN","DEMOCRAT","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","DEMOCRAT","REPUBLICAN","REPUBLICAN","DEMOCRAT","REPUBLICAN","REPUBLICAN","DEMOCRAT","DEMOCRAT","REPUBLICAN","DEMOCRAT","REPUBLICAN","DEMOCRAT","REPUBLICAN","DEMOCRAT","REPUBLICAN","DEMOCRAT","REPUBLICAN","DEMOCRAT","DEMOCRAT","DEMOCRAT","DEMOCRAT","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","DEMOCRAT","REPUBLICAN","REPUBLICAN","DEMOCRAT","REPUBLICAN","DEMOCRAT","REPUBLICAN","REPUBLICAN","DEMOCRAT","DEMOCRAT","DEMOCRAT","REPUBLICAN","REPUBLICAN","REPUBLICAN","DEMOCRAT","DEMOCRAT","DEMOCRAT","DEMOCRAT","REPUBLICAN","REPUBLICAN","DEMOCRAT","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","DEMOCRAT","REPUBLICAN","DEMOCRAT","REPUBLICAN","DEMOCRAT","REPUBLICAN","REPUBLICAN","DEMOCRAT","DEMOCRAT","DEMOCRAT","DEMOCRAT","REPUBLICAN","REPUBLICAN","DEMOCRAT","DEMOCRAT","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","DEMOCRAT","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","DEMOCRAT","DEMOCRAT","REPUBLICAN","DEMOCRAT","REPUBLICAN","DEMOCRAT","DEMOCRAT","DEMOCRAT","REPUBLICAN","DEMOCRAT","REPUBLICAN","DEMOCRAT","DEMOCRAT","DEMOCRAT","DEMOCRAT","REPUBLICAN","DEMOCRAT","DEMOCRAT","DEMOCRAT","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","DEMOCRAT","REPUBLICAN","REPUBLICAN","REPUBLICAN","DEMOCRAT","REPUBLICAN","REPUBLICAN","DEMOCRAT","REPUBLICAN","DEMOCRAT","DEMOCRAT","REPUBLICAN","REPUBLICAN","DEMOCRAT","REPUBLICAN","DEMOCRAT","REPUBLICAN","DEMOCRAT","DEMOCRAT","REPUBLICAN","DEMOCRAT","REPUBLICAN","DEMOCRAT","DEMOCRAT","REPUBLICAN","DEMOCRAT","DEMOCRAT","REPUBLICAN","REPUBLICAN","DEMOCRAT","DEMOCRAT","DEMOCRAT","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","DEMOCRAT","DEMOCRAT","DEMOCRAT","REPUBLICAN","DEMOCRAT","DEMOCRAT","DEMOCRAT","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","DEMOCRAT","REPUBLICAN","DEMOCRAT","DEMOCRAT","REPUBLICAN","REPUBLICAN","REPUBLICAN","DEMOCRAT","REPUBLICAN","DEMOCRAT","DEMOCRAT","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","DEMOCRAT","REPUBLICAN","DEMOCRAT","DEMOCRAT","REPUBLICAN","DEMOCRAT","REPUBLICAN","DEMOCRAT","DEMOCRAT","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","DEMOCRAT","REPUBLICAN","REPUBLICAN","REPUBLICAN","DEMOCRAT","REPUBLICAN","REPUBLICAN","REPUBLICAN","DEMOCRAT","DEMOCRAT","DEMOCRAT","DEMOCRAT","REPUBLICAN","DEMOCRAT","DEMOCRAT","REPUBLICAN","DEMOCRAT","REPUBLICAN","REPUBLICAN","DEMOCRAT","DEMOCRAT","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","DEMOCRAT","REPUBLICAN","DEMOCRAT","REPUBLICAN","DEMOCRAT","REPUBLICAN","DEMOCRAT","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","DEMOCRAT","DEMOCRAT","REPUBLICAN","REPUBLICAN","DEMOCRAT","REPUBLICAN","REPUBLICAN","DEMOCRAT","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","DEMOCRAT","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","DEMOCRAT","DEMOCRAT","DEMOCRAT","DEMOCRAT","DEMOCRAT","DEMOCRAT","REPUBLICAN","REPUBLICAN","REPUBLICAN","DEMOCRAT"],[252525,621314,366130,1255776,2608335,290699,133592,71555,267070,4379789,250779,2970733,255459,397466,4617886,4324228,821817,312788,3882244,582377,751957,2707103,319951,2261872,3799639,154507,1144008,435072,734281,286783,943163,216794,3942215,1959532,343678,927871,2938095,1318639,190889,622332,620258,203054,1441170,396842,167629,1318255,682318,423778,5121325,2009959,989375,4237756,198343,397956,336500,1202971,1510201,11110250,1037299,472940,487793,1138350,566812,554119,449951,348526,1677844,428442,227636,804283,1025935,744337,100387,357735,822544,933521,1729519,529688,2510705,2678559,661365,403164,1120380,1965486,94628,1419720,990212,1034896,1984942,1037291,232584,988571,225123,2089104,719261,1084953,937974,166559,1274188,2215422,1401415,1008966,2082319,130231,1061949,263420,2736167,512814,184067,2239164,2300087,685700,629681,1678006,815576,79347,331001,1297763,450807,297523,171923,1074181,460054,691848,3964522,409055,606443,1995196,947233,282830,273559,233050,1189924,421923,671018,1288576,2413568,1109471,1068722,769044,897672,341016,110700,1374039,163387,1743192,92717,1252401,927837,857488,2730350,336937,861530,5467009,441089,1718736,138377,279240,119251,261043,3458229,2940044,728177,905083,498604,2416549,1377230,124331,424921,1921290,385234,583245,659170,245800,635274,189148,137894,4526917,3244165,466578,1904097,266891,363467,1002106,1385103,1123323,638017,1716959,1445814,204151,242820,836554,1893742,5230985,771406,2251571,102000,2859764,2173310,135879,475064,266063,4479328,179652,105388,369561,235603,452979,1155389,1384375,584278,296571,336475,376930,206814,1126794,828940,572086,1911430,2891550,270341,1445014,1338870,8753788,1479178,188320,122746,199239,337908,174852,1616487,2912790,3255487,151505,419214,897572,596030,190412,236320,409235,681416,435864,106867,1429475,403012,188770,1334500,699655,1242987,998387,2453350,676026,573339,492120,890877,678367,1479438,1546557,1915225,170962,554049,1482440,259760,539260,1436206,4645332,235595,1985023,1230111,3649630,800983,1631163,949136,941173,2350363,3276363,557890,401306,572844,469105,267050,253881,212080,2804040,1636000,970488,137818,989609,185935,695570,209040,359219,2362631,2618885,180068,781652,185050,670557,2310939,4282074,577507,663742,502752,2546870,433862,202645,615539,439277,174419,193559,710746,865140,792853,2990274,301575,1933630,1176394,2148278,180408,306658,205286,202970,249508,879918,927365,256595,677296,890955,1183958,586353,1871182,1620985,571044,2206545,179310,3036829,1255925,632864,3019512,1489504,865244,149022,1233654,665104,979409,1455713,152190,405483,816015,636614,2341744,2827621,759612,1405284,147947,959792,2872579,1101255,1080843,556846,136718,227721,876167,322632,872849,159407,1152262,139639,1981473,1310936,1309162,5861203,1989653,190700,1040232,238522,1020997,1245836,325871,821702,2485967,672660,273495,1571509,531373,2382202,418690,267928,2584323,86112,1102169,150543,545382,5119835,2270395,960165,3419348,1178638,1652361,489371,2358049,140355,3346894,1080831,193695,2841005,2078688,2369612,1755396,279677,2215819,1148275,652264,192619,307131,684872,417655,4685047,192364,232450,1070440,1020280,1672143,677210,168601,966207,1573354,1629467,475171,242763,1150517,384826,933516,133241,221705,1337078,1048462,649641,240178,787761,760647,196651,616206,1742718,1104294,205012,572898,1677211,815971,2473633,420911,2564569,2758773,703486,533736,122461,2148222,361911,307486,1971820,1053873,281537,1069439,1081331,5890347,654192,213299,2046951,165415,1006693,1546167,736456,1961166,1750848,210610,653288,997772,439838,211419,726161,724597,1717077,786892,4180755,3090729,891325,2122786,1509688,1041066,720342,883748,2170418,2479183,155017,515211,231708,993037,505823,1225938,702541,1326646,4522994,2048759,193841,203974,501614,198342,1437490,1804352,1788850,7854285,418642,111252,200267,439687,2589026,883702,261617,909146,1087190,872520,173703,296268,1420543,200152,615717,1266546,545708,343602,1914254,1134661,534774,750241,1168266,206040,638517,327812,703088,1340383,3154834,1803800,1323101,756764,1255656,582315,1057631,178573,1237258,1522925,515096,381329,2279543,1346481,700714,825879,126054,147375,2328677,1071645,1247652,3471915,2496071,954173,647744,153684,1630866,2142651,1198584,200336,125050,1088845,158220,164676,1071971,164958,367462,101273,317323,5668731,4569843,3376519,5054917,136244,246166,1036364,1852475,692634,340511,592929,1051670,2728372,2364269,189951,777732,1557286,242584,740600,167398,1462330,915018,495961,1594511,1367705,6745485,472422,735740,8274473,415335,3433428,135865,307101,219262]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>year<\/th>\n      <th>state<\/th>\n      <th>party_simplified<\/th>\n      <th>total_votes<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":10,"scrollX":true,"dom":"tip","columnDefs":[{"className":"dt-right","targets":[1,4]},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"year","targets":1},{"name":"state","targets":2},{"name":"party_simplified","targets":3},{"name":"total_votes","targets":4}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Step 3: Bar chart for party count per year</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>party_count_per_year <span class="ot">&lt;-</span> state_winners_atlarge <span class="sc">%&gt;%</span></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(year, party_simplified) <span class="sc">%&gt;%</span></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(year, <span class="fu">desc</span>(n))  <span class="co"># Arrange the data for better display in the bar chart</span></span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a bar chart to show the count of each party per year</span></span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(party_count_per_year, <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">factor</span>(year), <span class="at">y =</span> n, <span class="at">fill =</span> party_simplified)) <span class="sc">+</span></span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>, <span class="at">position =</span> <span class="st">"dodge"</span>) <span class="sc">+</span></span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb19-10"><a href="#cb19-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Party Count per Year in US Presidential Elections (1976 - 2020)"</span>,</span>
<span id="cb19-11"><a href="#cb19-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Year"</span>,</span>
<span id="cb19-12"><a href="#cb19-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Number of States"</span>,</span>
<span id="cb19-13"><a href="#cb19-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">fill =</span> <span class="st">"Party"</span></span>
<span id="cb19-14"><a href="#cb19-14" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb19-15"><a href="#cb19-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"DEMOCRAT"</span> <span class="ot">=</span> <span class="st">"blue"</span>, <span class="st">"REPUBLICAN"</span> <span class="ot">=</span> <span class="st">"red"</span>, <span class="st">"OTHER"</span> <span class="ot">=</span> <span class="st">"grey"</span>)) <span class="sc">+</span></span>
<span id="cb19-16"><a href="#cb19-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb19-17"><a href="#cb19-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"top"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="mp03_files/figure-html/unnamed-chunk-12-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co">#EC Tables</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(stringr)</span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Define a function to generate EC data for a specific election year</span></span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a>generate_ec_table <span class="ot">&lt;-</span> <span class="cf">function</span>(year, district_file, president_data, ucla_shapefiles, state_abbreviations) {</span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Load the shapefile for the corresponding congressional districts</span></span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true" tabindex="-1"></a>  congressional_districts <span class="ot">&lt;-</span> ucla_shapefiles[[<span class="fu">paste0</span>(<span class="st">"districts"</span>, district_file, <span class="st">".shp"</span>)]] <span class="sc">%&gt;%</span></span>
<span id="cb20-11"><a href="#cb20-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">STATENAME =</span> <span class="fu">tolower</span>(STATENAME)) <span class="sc">%&gt;%</span></span>
<span id="cb20-12"><a href="#cb20-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(<span class="sc">-</span>geometry) <span class="sc">%&gt;%</span></span>
<span id="cb20-13"><a href="#cb20-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">as.data.frame</span>() <span class="sc">%&gt;%</span></span>
<span id="cb20-14"><a href="#cb20-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(STATENAME) <span class="sc">%&gt;%</span></span>
<span id="cb20-15"><a href="#cb20-15" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarize</span>(<span class="at">EC =</span> <span class="fu">n</span>() <span class="sc">+</span> <span class="dv">2</span>)  <span class="co"># EC based on the number of districts + 2 senators per state</span></span>
<span id="cb20-16"><a href="#cb20-16" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb20-17"><a href="#cb20-17" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Filter and summarize presidential data for the given year</span></span>
<span id="cb20-18"><a href="#cb20-18" aria-hidden="true" tabindex="-1"></a>  vote_results <span class="ot">&lt;-</span> president_data <span class="sc">%&gt;%</span></span>
<span id="cb20-19"><a href="#cb20-19" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(year <span class="sc">==</span> year) <span class="sc">%&gt;%</span></span>
<span id="cb20-20"><a href="#cb20-20" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">state =</span> <span class="fu">tolower</span>(state)) <span class="sc">%&gt;%</span></span>
<span id="cb20-21"><a href="#cb20-21" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(state) <span class="sc">%&gt;%</span></span>
<span id="cb20-22"><a href="#cb20-22" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarize</span>(</span>
<span id="cb20-23"><a href="#cb20-23" aria-hidden="true" tabindex="-1"></a>      <span class="at">winning_party =</span> party_simplified[<span class="fu">which.max</span>(candidatevotes)],</span>
<span id="cb20-24"><a href="#cb20-24" aria-hidden="true" tabindex="-1"></a>      <span class="at">total_votes =</span> <span class="fu">max</span>(totalvotes)</span>
<span id="cb20-25"><a href="#cb20-25" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb20-26"><a href="#cb20-26" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ungroup</span>()</span>
<span id="cb20-27"><a href="#cb20-27" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb20-28"><a href="#cb20-28" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Combine EC with winning party information</span></span>
<span id="cb20-29"><a href="#cb20-29" aria-hidden="true" tabindex="-1"></a>  ec_table <span class="ot">&lt;-</span> congressional_districts <span class="sc">%&gt;%</span></span>
<span id="cb20-30"><a href="#cb20-30" aria-hidden="true" tabindex="-1"></a>    <span class="fu">left_join</span>(vote_results, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"STATENAME"</span> <span class="ot">=</span> <span class="st">"state"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb20-31"><a href="#cb20-31" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(</span>
<span id="cb20-32"><a href="#cb20-32" aria-hidden="true" tabindex="-1"></a>      <span class="at">winning_party =</span> <span class="fu">if_else</span>(STATENAME <span class="sc">==</span> <span class="st">"district of columbia"</span> <span class="sc">&amp;</span> <span class="fu">is.na</span>(winning_party), <span class="st">"DEMOCRAT"</span>, winning_party)</span>
<span id="cb20-33"><a href="#cb20-33" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb20-34"><a href="#cb20-34" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(STATENAME, winning_party, EC)</span>
<span id="cb20-35"><a href="#cb20-35" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb20-36"><a href="#cb20-36" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Rename columns to match `usmap` requirements and merge state abbreviations</span></span>
<span id="cb20-37"><a href="#cb20-37" aria-hidden="true" tabindex="-1"></a>  ec_table <span class="ot">&lt;-</span> ec_table <span class="sc">%&gt;%</span></span>
<span id="cb20-38"><a href="#cb20-38" aria-hidden="true" tabindex="-1"></a>    <span class="fu">rename</span>(<span class="at">state =</span> STATENAME) <span class="sc">%&gt;%</span></span>
<span id="cb20-39"><a href="#cb20-39" aria-hidden="true" tabindex="-1"></a>    <span class="fu">left_join</span>(state_abbreviations, <span class="at">by =</span> <span class="st">"state"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb20-40"><a href="#cb20-40" aria-hidden="true" tabindex="-1"></a>    <span class="fu">rename</span>(<span class="at">Abbreviation =</span> abbreviation)  <span class="co"># Rename 'abbreviation' to 'Abbreviation'</span></span>
<span id="cb20-41"><a href="#cb20-41" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb20-42"><a href="#cb20-42" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(ec_table)</span>
<span id="cb20-43"><a href="#cb20-43" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb20-44"><a href="#cb20-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-45"><a href="#cb20-45" aria-hidden="true" tabindex="-1"></a><span class="co"># List of years and corresponding district shapefile codes</span></span>
<span id="cb20-46"><a href="#cb20-46" aria-hidden="true" tabindex="-1"></a>years_and_districts <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb20-47"><a href="#cb20-47" aria-hidden="true" tabindex="-1"></a>  <span class="fu">c</span>(<span class="dv">1976</span>, <span class="st">"094"</span>), <span class="fu">c</span>(<span class="dv">1980</span>, <span class="st">"096"</span>), <span class="fu">c</span>(<span class="dv">1984</span>, <span class="st">"098"</span>), </span>
<span id="cb20-48"><a href="#cb20-48" aria-hidden="true" tabindex="-1"></a>  <span class="fu">c</span>(<span class="dv">1988</span>, <span class="st">"100"</span>), <span class="fu">c</span>(<span class="dv">1992</span>, <span class="st">"102"</span>), <span class="fu">c</span>(<span class="dv">1996</span>, <span class="st">"104"</span>), </span>
<span id="cb20-49"><a href="#cb20-49" aria-hidden="true" tabindex="-1"></a>   <span class="fu">c</span>(<span class="dv">2000</span>, <span class="st">"106"</span>), <span class="fu">c</span>(<span class="dv">2004</span>, <span class="st">"108"</span>), <span class="fu">c</span>(<span class="dv">2008</span>, <span class="st">"110"</span>), </span>
<span id="cb20-50"><a href="#cb20-50" aria-hidden="true" tabindex="-1"></a>  <span class="fu">c</span>(<span class="dv">2012</span>, <span class="st">"112"</span>)</span>
<span id="cb20-51"><a href="#cb20-51" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb20-52"><a href="#cb20-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-53"><a href="#cb20-53" aria-hidden="true" tabindex="-1"></a><span class="co"># Loop through each year and generate the EC tables</span></span>
<span id="cb20-54"><a href="#cb20-54" aria-hidden="true" tabindex="-1"></a>ec_tables <span class="ot">&lt;-</span> <span class="fu">lapply</span>(years_and_districts, <span class="cf">function</span>(info) {</span>
<span id="cb20-55"><a href="#cb20-55" aria-hidden="true" tabindex="-1"></a>  year <span class="ot">&lt;-</span> info[<span class="dv">1</span>]</span>
<span id="cb20-56"><a href="#cb20-56" aria-hidden="true" tabindex="-1"></a>  district_file <span class="ot">&lt;-</span> info[<span class="dv">2</span>]</span>
<span id="cb20-57"><a href="#cb20-57" aria-hidden="true" tabindex="-1"></a>  <span class="fu">generate_ec_table</span>(<span class="fu">as.numeric</span>(year), district_file, president_data, ucla_shapefiles, state_abbreviations)</span>
<span id="cb20-58"><a href="#cb20-58" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb20-59"><a href="#cb20-59" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-60"><a href="#cb20-60" aria-hidden="true" tabindex="-1"></a><span class="co"># Assign each generated EC table to a named list element for easy reference</span></span>
<span id="cb20-61"><a href="#cb20-61" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(ec_tables) <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">"EC_"</span>, <span class="fu">sapply</span>(years_and_districts, <span class="st">`</span><span class="at">[[</span><span class="st">`</span>, <span class="dv">1</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="task-7---state-wide-proportional" class="level3">
<h3 class="anchored" data-anchor-id="task-7---state-wide-proportional">Task 7 - State-Wide Proportional</h3>
<p>Next, this strategy and code focuses on filtering U.S. presidential election data between 1976 and 2020, identifying the candidate with the highest vote in each state for each election year. This is done using the dplyr package to group and filter the data based on the maximum vote count per state, followed by summarizing to capture the winner, their party, and the highest votes. The results are displayed in a formatted table using the gt package and a bar chart is created to show the count of each party winning by state across the years.</p>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Step 1: Combine all electoral college data into a single dataframe from 1976 to 2012</span></span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>ec_data <span class="ot">&lt;-</span> <span class="fu">bind_rows</span>(</span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">lapply</span>(<span class="fu">names</span>(ec_tables), <span class="cf">function</span>(name) {</span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a>    year <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(<span class="fu">sub</span>(<span class="st">"EC_"</span>, <span class="st">""</span>, name))</span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(ec_tables[[name]], <span class="at">year =</span> year)</span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb21-10"><a href="#cb21-10" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb21-11"><a href="#cb21-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-12"><a href="#cb21-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Step 2: Filter for presidential data in all required years (1976 to 2012)</span></span>
<span id="cb21-13"><a href="#cb21-13" aria-hidden="true" tabindex="-1"></a>filtered_data <span class="ot">&lt;-</span> president_data <span class="sc">%&gt;%</span></span>
<span id="cb21-14"><a href="#cb21-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(office <span class="sc">==</span> <span class="st">"US PRESIDENT"</span>, year <span class="sc">%in%</span> <span class="fu">seq</span>(<span class="dv">1976</span>, <span class="dv">2012</span>, <span class="dv">4</span>))  <span class="co"># Only presidential election years</span></span>
<span id="cb21-15"><a href="#cb21-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-16"><a href="#cb21-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Step 3: Find the winning candidate for Democrat and Republican parties in each state and year</span></span>
<span id="cb21-17"><a href="#cb21-17" aria-hidden="true" tabindex="-1"></a>party_winners <span class="ot">&lt;-</span> filtered_data <span class="sc">%&gt;%</span></span>
<span id="cb21-18"><a href="#cb21-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(party_simplified <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"DEMOCRAT"</span>, <span class="st">"REPUBLICAN"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb21-19"><a href="#cb21-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year, state, party_simplified) <span class="sc">%&gt;%</span></span>
<span id="cb21-20"><a href="#cb21-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb21-21"><a href="#cb21-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">candidate =</span> candidate[<span class="fu">which.max</span>(candidatevotes)],  <span class="co"># Get candidate with highest votes per party</span></span>
<span id="cb21-22"><a href="#cb21-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">candidate_votes =</span> <span class="fu">max</span>(candidatevotes, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb21-23"><a href="#cb21-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">total_state_votes =</span> <span class="fu">max</span>(totalvotes, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb21-24"><a href="#cb21-24" aria-hidden="true" tabindex="-1"></a>    <span class="at">.groups =</span> <span class="st">"drop"</span></span>
<span id="cb21-25"><a href="#cb21-25" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb21-26"><a href="#cb21-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">vote_percentage =</span> candidate_votes <span class="sc">/</span> total_state_votes)  <span class="co"># Calculate percentage of votes</span></span>
<span id="cb21-27"><a href="#cb21-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-28"><a href="#cb21-28" aria-hidden="true" tabindex="-1"></a><span class="co"># Ensure consistent formatting of state names</span></span>
<span id="cb21-29"><a href="#cb21-29" aria-hidden="true" tabindex="-1"></a>party_winners <span class="ot">&lt;-</span> party_winners <span class="sc">%&gt;%</span></span>
<span id="cb21-30"><a href="#cb21-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">state =</span> <span class="fu">str_to_title</span>(state))</span>
<span id="cb21-31"><a href="#cb21-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-32"><a href="#cb21-32" aria-hidden="true" tabindex="-1"></a>ec_data <span class="ot">&lt;-</span> ec_data <span class="sc">%&gt;%</span></span>
<span id="cb21-33"><a href="#cb21-33" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">state =</span> <span class="fu">str_to_title</span>(state))</span>
<span id="cb21-34"><a href="#cb21-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-35"><a href="#cb21-35" aria-hidden="true" tabindex="-1"></a><span class="co"># Step 4: Join with EC data and calculate allocated EC votes</span></span>
<span id="cb21-36"><a href="#cb21-36" aria-hidden="true" tabindex="-1"></a>proportional_ec_votes <span class="ot">&lt;-</span> party_winners <span class="sc">%&gt;%</span></span>
<span id="cb21-37"><a href="#cb21-37" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(ec_data, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"year"</span>, <span class="st">"state"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb21-38"><a href="#cb21-38" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb21-39"><a href="#cb21-39" aria-hidden="true" tabindex="-1"></a>    <span class="at">allocated_ec_votes =</span> <span class="fu">round</span>(EC <span class="sc">*</span> vote_percentage)</span>
<span id="cb21-40"><a href="#cb21-40" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb21-41"><a href="#cb21-41" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(year, state, candidate, party_simplified, EC, vote_percentage, allocated_ec_votes)</span>
<span id="cb21-42"><a href="#cb21-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-43"><a href="#cb21-43" aria-hidden="true" tabindex="-1"></a><span class="co"># Step 5: Calculate total allocated EC votes by year and party</span></span>
<span id="cb21-44"><a href="#cb21-44" aria-hidden="true" tabindex="-1"></a>total_ec_votes_by_party <span class="ot">&lt;-</span> proportional_ec_votes <span class="sc">%&gt;%</span></span>
<span id="cb21-45"><a href="#cb21-45" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year, party_simplified) <span class="sc">%&gt;%</span></span>
<span id="cb21-46"><a href="#cb21-46" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">total_allocated_ec_votes =</span> <span class="fu">sum</span>(allocated_ec_votes, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="at">.groups =</span> <span class="st">"drop"</span>)</span>
<span id="cb21-47"><a href="#cb21-47" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-48"><a href="#cb21-48" aria-hidden="true" tabindex="-1"></a><span class="co"># Step 6: Create bar chart for EC votes by year and party</span></span>
<span id="cb21-49"><a href="#cb21-49" aria-hidden="true" tabindex="-1"></a>ec_votes_bar_chart <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(total_ec_votes_by_party, <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">factor</span>(year), <span class="at">y =</span> total_allocated_ec_votes, <span class="at">fill =</span> party_simplified)) <span class="sc">+</span></span>
<span id="cb21-50"><a href="#cb21-50" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>, <span class="at">position =</span> <span class="st">"dodge"</span>) <span class="sc">+</span></span>
<span id="cb21-51"><a href="#cb21-51" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb21-52"><a href="#cb21-52" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Total Allocated Electoral Votes by Party (1976 to 2012)"</span>,</span>
<span id="cb21-53"><a href="#cb21-53" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Year"</span>,</span>
<span id="cb21-54"><a href="#cb21-54" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Total Allocated EC Votes"</span>,</span>
<span id="cb21-55"><a href="#cb21-55" aria-hidden="true" tabindex="-1"></a>    <span class="at">fill =</span> <span class="st">"Party"</span></span>
<span id="cb21-56"><a href="#cb21-56" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb21-57"><a href="#cb21-57" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"DEMOCRAT"</span> <span class="ot">=</span> <span class="st">"blue"</span>, <span class="st">"REPUBLICAN"</span> <span class="ot">=</span> <span class="st">"red"</span>)) <span class="sc">+</span></span>
<span id="cb21-58"><a href="#cb21-58" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span>
<span id="cb21-59"><a href="#cb21-59" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-60"><a href="#cb21-60" aria-hidden="true" tabindex="-1"></a><span class="co"># Display the bar chart</span></span>
<span id="cb21-61"><a href="#cb21-61" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(ec_votes_bar_chart)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="mp03_files/figure-html/unnamed-chunk-14-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="task-7---national-proportional" class="level3">
<h3 class="anchored" data-anchor-id="task-7---national-proportional">Task 7 - National Proportional</h3>
<p>Lastly, the code starts similarly by filtering data from the same period, but it focuses on calculating the total candidate votes for each party in each state, rather than identifying a single candidate’s vote. The party with the highest total votes is considered the winner for that state in each election year. The results are again shown in a gt table and visualized with a bar chart that counts the number of states won by each party for every election year, providing insights into the distribution of electoral outcomes across the U.S.</p>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Step 3: Calculate vote percentage for Democrat and Republican parties in each state and year</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>party_percentage <span class="ot">&lt;-</span> filtered_data <span class="sc">%&gt;%</span></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(party_simplified <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"DEMOCRAT"</span>, <span class="st">"REPUBLICAN"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year, state, party_simplified) <span class="sc">%&gt;%</span></span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">total_party_votes =</span> <span class="fu">sum</span>(candidatevotes, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">total_state_votes =</span> <span class="fu">max</span>(totalvotes, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">.groups =</span> <span class="st">"drop"</span></span>
<span id="cb22-9"><a href="#cb22-9" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb22-10"><a href="#cb22-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">vote_percentage =</span> total_party_votes <span class="sc">/</span> total_state_votes)</span>
<span id="cb22-11"><a href="#cb22-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-12"><a href="#cb22-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Ensure consistent formatting of state names</span></span>
<span id="cb22-13"><a href="#cb22-13" aria-hidden="true" tabindex="-1"></a>party_percentage <span class="ot">&lt;-</span> party_percentage <span class="sc">%&gt;%</span></span>
<span id="cb22-14"><a href="#cb22-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">state =</span> <span class="fu">str_to_title</span>(state))</span>
<span id="cb22-15"><a href="#cb22-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-16"><a href="#cb22-16" aria-hidden="true" tabindex="-1"></a>ec_data <span class="ot">&lt;-</span> ec_data <span class="sc">%&gt;%</span></span>
<span id="cb22-17"><a href="#cb22-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">state =</span> <span class="fu">str_to_title</span>(state))</span>
<span id="cb22-18"><a href="#cb22-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-19"><a href="#cb22-19" aria-hidden="true" tabindex="-1"></a><span class="co"># Step 4: Join with EC data and calculate allocated EC votes for each party by vote percentage</span></span>
<span id="cb22-20"><a href="#cb22-20" aria-hidden="true" tabindex="-1"></a>proportional_ec_votes <span class="ot">&lt;-</span> party_percentage <span class="sc">%&gt;%</span></span>
<span id="cb22-21"><a href="#cb22-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(ec_data, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"year"</span>, <span class="st">"state"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb22-22"><a href="#cb22-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb22-23"><a href="#cb22-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">allocated_ec_votes =</span> <span class="fu">round</span>(EC <span class="sc">*</span> vote_percentage)</span>
<span id="cb22-24"><a href="#cb22-24" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb22-25"><a href="#cb22-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(year, state, party_simplified, EC, vote_percentage, allocated_ec_votes)</span>
<span id="cb22-26"><a href="#cb22-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-27"><a href="#cb22-27" aria-hidden="true" tabindex="-1"></a><span class="co"># Step 5: Calculate total allocated EC votes by year and party</span></span>
<span id="cb22-28"><a href="#cb22-28" aria-hidden="true" tabindex="-1"></a>total_ec_votes_by_party <span class="ot">&lt;-</span> proportional_ec_votes <span class="sc">%&gt;%</span></span>
<span id="cb22-29"><a href="#cb22-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year, party_simplified) <span class="sc">%&gt;%</span></span>
<span id="cb22-30"><a href="#cb22-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">total_allocated_ec_votes =</span> <span class="fu">sum</span>(allocated_ec_votes, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="at">.groups =</span> <span class="st">"drop"</span>)</span>
<span id="cb22-31"><a href="#cb22-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-32"><a href="#cb22-32" aria-hidden="true" tabindex="-1"></a><span class="co"># Step 6: Create bar chart for EC votes by year and party</span></span>
<span id="cb22-33"><a href="#cb22-33" aria-hidden="true" tabindex="-1"></a>ec_votes_bar_chart <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(total_ec_votes_by_party, <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">factor</span>(year), <span class="at">y =</span> total_allocated_ec_votes, <span class="at">fill =</span> party_simplified)) <span class="sc">+</span></span>
<span id="cb22-34"><a href="#cb22-34" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>, <span class="at">position =</span> <span class="st">"dodge"</span>) <span class="sc">+</span></span>
<span id="cb22-35"><a href="#cb22-35" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb22-36"><a href="#cb22-36" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Total Allocated Electoral Votes by Party (1976 to 2012)"</span>,</span>
<span id="cb22-37"><a href="#cb22-37" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Year"</span>,</span>
<span id="cb22-38"><a href="#cb22-38" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Total Allocated EC Votes"</span>,</span>
<span id="cb22-39"><a href="#cb22-39" aria-hidden="true" tabindex="-1"></a>    <span class="at">fill =</span> <span class="st">"Party"</span></span>
<span id="cb22-40"><a href="#cb22-40" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb22-41"><a href="#cb22-41" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"DEMOCRAT"</span> <span class="ot">=</span> <span class="st">"blue"</span>, <span class="st">"REPUBLICAN"</span> <span class="ot">=</span> <span class="st">"red"</span>)) <span class="sc">+</span></span>
<span id="cb22-42"><a href="#cb22-42" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span>
<span id="cb22-43"><a href="#cb22-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-44"><a href="#cb22-44" aria-hidden="true" tabindex="-1"></a><span class="co"># Display the bar chart</span></span>
<span id="cb22-45"><a href="#cb22-45" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(ec_votes_bar_chart)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="mp03_files/figure-html/unnamed-chunk-15-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="evaluating-fairness-of-ecv-allocation-schemes" class="level2">
<h2 class="anchored" data-anchor-id="evaluating-fairness-of-ecv-allocation-schemes">Evaluating Fairness of ECV Allocation Schemes</h2>
<p>In evaluating the fairness of different Electoral College Vote (ECV) allocation schemes, I considered several methods: State-Wide Winner-Take-All, District-Wide Winner-Take-All + State-Wide “At Large” Votes, State-Wide Proportional, and National Proportional. After analyzing the results, I determined that the State-Wide Proportional method is the fairest. This is because, when applied across various election years, there is no significant variance in the results, and it seems to provide a more balanced representation of the popular vote relative to the electoral vote.</p>
<p>The District-Wide Winner-Take-All + State-Wide “At Large” Votes method, however, exhibits a notable shift in the 1984 election, showing the largest impact and variance. This method tends to amplify the margin of victory for the candidate with a slight statewide edge. In contrast, under the State-Wide Proportional method, the bar chart for 1984 reveals much less variance, reflecting a more equitable distribution of votes.</p>
<p>From this analysis, it is clear that the State-Wide Proportional allocation scheme provides the most consistent and balanced results across elections, while the District-Wide Winner-Take-All method can lead to more dramatic swings in electoral outcomes.</p>


</section>


<div id="quarto-appendix" class="default"><section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p>https://cdmaps.polisci.ucla.edu/<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2"><p>https://www.census.gov/geographies/mapping-files/time-series/geo/tiger-line-file.html<a href="#fnref2" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn3"><p>MIT Election Data and Science Lab, 2017, “U.S. House 1976-2022,” https://doi.org/10.7910/DVN/IGOUN2, Harvard Dataverse, v13, UNF:6: Ky5FkettbvohjTSN/IvldA== [fileUNF].<a href="#fnref3" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn4"><p>MIT Election Data and Science Lab, 2017, “U.S. President 1976-2020,” https://doi.org/10.7910/DVN/42MVDX, Harvard Dataverse, v8, UNF:6:F0opd1IRbeY190yVfzglUw== [fileUNF].<a href="#fnref4" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn5"><p>Partial code was collaborated with Chloe Yu.<a href="#fnref5" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/<YantingZhao11>\.github\.io\/STA9750-2024-FALL\/");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>